(function(){function t(t){function e(e,i,n,s,o,r){for(;o>=0&&r>o;o+=t){var a=s?s[o]:o;n=i(n,e[a],a,e)}return n}return function(i,n,s,o){n=b(n,o,4);var r=!x(i)&&y.keys(i),a=(r||i).length,l=t>0?0:a-1;return arguments.length<3&&(s=i[r?r[l]:l],l+=t),e(i,n,s,r,l,a)}}function e(t){return function(e,i,n){i=_(i,n);for(var s=T(e),o=t>0?0:s-1;o>=0&&s>o;o+=t)if(i(e[o],o,e))return o;return-1}}function i(t,e,i){return function(n,s,o){var r=0,a=T(n);if("number"==typeof o)t>0?r=o>=0?o:Math.max(o+a,r):a=o>=0?Math.min(o+1,a):o+a+1;else if(i&&o&&a)return o=i(n,s),n[o]===s?o:-1;if(s!==s)return o=e(c.call(n,r,a),y.isNaN),o>=0?o+r:-1;for(o=t>0?r:a-1;o>=0&&a>o;o+=t)if(n[o]===s)return o;return-1}}function n(t,e){var i=O.length,n=t.constructor,s=y.isFunction(n)&&n.prototype||a,o="constructor";for(y.has(t,o)&&!y.contains(e,o)&&e.push(o);i--;)o=O[i],o in t&&t[o]!==s[o]&&!y.contains(e,o)&&e.push(o)}var s=this,o=s._,r=Array.prototype,a=Object.prototype,l=Function.prototype,u=r.push,c=r.slice,d=a.toString,h=a.hasOwnProperty,f=Array.isArray,p=Object.keys,g=l.bind,m=Object.create,v=function(){},y=function(t){return t instanceof y?t:this instanceof y?void(this._wrapped=t):new y(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):s._=y,y.VERSION="1.8.3";var b=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,s){return t.call(e,i,n,s)};case 4:return function(i,n,s,o){return t.call(e,i,n,s,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,i){return null==t?y.identity:y.isFunction(t)?b(t,e,i):y.isObject(t)?y.matcher(t):y.property(t)};y.iteratee=function(t,e){return _(t,e,1/0)};var w=function(t,e){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var s=1;n>s;s++)for(var o=arguments[s],r=t(o),a=r.length,l=0;a>l;l++){var u=r[l];e&&void 0!==i[u]||(i[u]=o[u])}return i}},P=function(t){if(!y.isObject(t))return{};if(m)return m(t);v.prototype=t;var e=new v;return v.prototype=null,e},k=function(t){return function(e){return null==e?void 0:e[t]}},C=Math.pow(2,53)-1,T=k("length"),x=function(t){var e=T(t);return"number"==typeof e&&e>=0&&C>=e};y.each=y.forEach=function(t,e,i){e=b(e,i);var n,s;if(x(t))for(n=0,s=t.length;s>n;n++)e(t[n],n,t);else{var o=y.keys(t);for(n=0,s=o.length;s>n;n++)e(t[o[n]],o[n],t)}return t},y.map=y.collect=function(t,e,i){e=_(e,i);for(var n=!x(t)&&y.keys(t),s=(n||t).length,o=Array(s),r=0;s>r;r++){var a=n?n[r]:r;o[r]=e(t[a],a,t)}return o},y.reduce=y.foldl=y.inject=t(1),y.reduceRight=y.foldr=t(-1),y.find=y.detect=function(t,e,i){var n;return n=x(t)?y.findIndex(t,e,i):y.findKey(t,e,i),void 0!==n&&-1!==n?t[n]:void 0},y.filter=y.select=function(t,e,i){var n=[];return e=_(e,i),y.each(t,function(t,i,s){e(t,i,s)&&n.push(t)}),n},y.reject=function(t,e,i){return y.filter(t,y.negate(_(e)),i)},y.every=y.all=function(t,e,i){e=_(e,i);for(var n=!x(t)&&y.keys(t),s=(n||t).length,o=0;s>o;o++){var r=n?n[o]:o;if(!e(t[r],r,t))return!1}return!0},y.some=y.any=function(t,e,i){e=_(e,i);for(var n=!x(t)&&y.keys(t),s=(n||t).length,o=0;s>o;o++){var r=n?n[o]:o;if(e(t[r],r,t))return!0}return!1},y.contains=y.includes=y.include=function(t,e,i,n){return x(t)||(t=y.values(t)),("number"!=typeof i||n)&&(i=0),y.indexOf(t,e,i)>=0},y.invoke=function(t,e){var i=c.call(arguments,2),n=y.isFunction(e);return y.map(t,function(t){var s=n?e:t[e];return null==s?s:s.apply(t,i)})},y.pluck=function(t,e){return y.map(t,y.property(e))},y.where=function(t,e){return y.filter(t,y.matcher(e))},y.findWhere=function(t,e){return y.find(t,y.matcher(e))},y.max=function(t,e,i){var n,s,o=-(1/0),r=-(1/0);if(null==e&&null!=t){t=x(t)?t:y.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],n>o&&(o=n)}else e=_(e,i),y.each(t,function(t,i,n){s=e(t,i,n),(s>r||s===-(1/0)&&o===-(1/0))&&(o=t,r=s)});return o},y.min=function(t,e,i){var n,s,o=1/0,r=1/0;if(null==e&&null!=t){t=x(t)?t:y.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],o>n&&(o=n)}else e=_(e,i),y.each(t,function(t,i,n){s=e(t,i,n),(r>s||s===1/0&&o===1/0)&&(o=t,r=s)});return o},y.shuffle=function(t){for(var e,i=x(t)?t:y.values(t),n=i.length,s=Array(n),o=0;n>o;o++)e=y.random(0,o),e!==o&&(s[o]=s[e]),s[e]=i[o];return s},y.sample=function(t,e,i){return null==e||i?(x(t)||(t=y.values(t)),t[y.random(t.length-1)]):y.shuffle(t).slice(0,Math.max(0,e))},y.sortBy=function(t,e,i){return e=_(e,i),y.pluck(y.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,i,n){var s={};return i=_(i,n),y.each(e,function(n,o){var r=i(n,o,e);t(s,n,r)}),s}};y.groupBy=A(function(t,e,i){y.has(t,i)?t[i].push(e):t[i]=[e]}),y.indexBy=A(function(t,e,i){t[i]=e}),y.countBy=A(function(t,e,i){y.has(t,i)?t[i]++:t[i]=1}),y.toArray=function(t){return t?y.isArray(t)?c.call(t):x(t)?y.map(t,y.identity):y.values(t):[]},y.size=function(t){return null==t?0:x(t)?t.length:y.keys(t).length},y.partition=function(t,e,i){e=_(e,i);var n=[],s=[];return y.each(t,function(t,i,o){(e(t,i,o)?n:s).push(t)}),[n,s]},y.first=y.head=y.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:y.initial(t,t.length-e)},y.initial=function(t,e,i){return c.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},y.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:y.rest(t,Math.max(0,t.length-e))},y.rest=y.tail=y.drop=function(t,e,i){return c.call(t,null==e||i?1:e)},y.compact=function(t){return y.filter(t,y.identity)};var E=function(t,e,i,n){for(var s=[],o=0,r=n||0,a=T(t);a>r;r++){var l=t[r];if(x(l)&&(y.isArray(l)||y.isArguments(l))){e||(l=E(l,e,i));var u=0,c=l.length;for(s.length+=c;c>u;)s[o++]=l[u++]}else i||(s[o++]=l)}return s};y.flatten=function(t,e){return E(t,e,!1)},y.without=function(t){return y.difference(t,c.call(arguments,1))},y.uniq=y.unique=function(t,e,i,n){y.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=_(i,n));for(var s=[],o=[],r=0,a=T(t);a>r;r++){var l=t[r],u=i?i(l,r,t):l;e?(r&&o===u||s.push(l),o=u):i?y.contains(o,u)||(o.push(u),s.push(l)):y.contains(s,l)||s.push(l)}return s},y.union=function(){return y.uniq(E(arguments,!0,!0))},y.intersection=function(t){for(var e=[],i=arguments.length,n=0,s=T(t);s>n;n++){var o=t[n];if(!y.contains(e,o)){for(var r=1;i>r&&y.contains(arguments[r],o);r++);r===i&&e.push(o)}}return e},y.difference=function(t){var e=E(arguments,!0,!0,1);return y.filter(t,function(t){return!y.contains(e,t)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(t){for(var e=t&&y.max(t,T).length||0,i=Array(e),n=0;e>n;n++)i[n]=y.pluck(t,n);return i},y.object=function(t,e){for(var i={},n=0,s=T(t);s>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},y.findIndex=e(1),y.findLastIndex=e(-1),y.sortedIndex=function(t,e,i,n){i=_(i,n,1);for(var s=i(e),o=0,r=T(t);r>o;){var a=Math.floor((o+r)/2);i(t[a])<s?o=a+1:r=a}return o},y.indexOf=i(1,y.findIndex,y.sortedIndex),y.lastIndexOf=i(-1,y.findLastIndex),y.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),s=Array(n),o=0;n>o;o++,t+=i)s[o]=t;return s};var M=function(t,e,i,n,s){if(!(n instanceof e))return t.apply(i,s);var o=P(t.prototype),r=t.apply(o,s);return y.isObject(r)?r:o};y.bind=function(t,e){if(g&&t.bind===g)return g.apply(t,c.call(arguments,1));if(!y.isFunction(t))throw new TypeError("Bind must be called on a function");var i=c.call(arguments,2),n=function(){return M(t,n,e,this,i.concat(c.call(arguments)))};return n},y.partial=function(t){var e=c.call(arguments,1),i=function(){for(var n=0,s=e.length,o=Array(s),r=0;s>r;r++)o[r]=e[r]===y?arguments[n++]:e[r];for(;n<arguments.length;)o.push(arguments[n++]);return M(t,i,this,this,o)};return i},y.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=y.bind(t[i],t);return t},y.memoize=function(t,e){var i=function(n){var s=i.cache,o=""+(e?e.apply(this,arguments):n);return y.has(s,o)||(s[o]=t.apply(this,arguments)),s[o]};return i.cache={},i},y.delay=function(t,e){var i=c.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},y.defer=y.partial(y.delay,y,1),y.throttle=function(t,e,i){var n,s,o,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:y.now(),r=null,o=t.apply(n,s),r||(n=s=null)};return function(){var u=y.now();a||i.leading!==!1||(a=u);var c=e-(u-a);return n=this,s=arguments,0>=c||c>e?(r&&(clearTimeout(r),r=null),a=u,o=t.apply(n,s),r||(n=s=null)):r||i.trailing===!1||(r=setTimeout(l,c)),o}},y.debounce=function(t,e,i){var n,s,o,r,a,l=function(){var u=y.now()-r;e>u&&u>=0?n=setTimeout(l,e-u):(n=null,i||(a=t.apply(o,s),n||(o=s=null)))};return function(){o=this,s=arguments,r=y.now();var u=i&&!n;return n||(n=setTimeout(l,e)),u&&(a=t.apply(o,s),o=s=null),a}},y.wrap=function(t,e){return y.partial(e,t)},y.negate=function(t){return function(){return!t.apply(this,arguments)}},y.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},y.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},y.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=null),i}},y.once=y.partial(y.before,2);var S=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(t){if(!y.isObject(t))return[];if(p)return p(t);var e=[];for(var i in t)y.has(t,i)&&e.push(i);return S&&n(t,e),e},y.allKeys=function(t){if(!y.isObject(t))return[];var e=[];for(var i in t)e.push(i);return S&&n(t,e),e},y.values=function(t){for(var e=y.keys(t),i=e.length,n=Array(i),s=0;i>s;s++)n[s]=t[e[s]];return n},y.mapObject=function(t,e,i){e=_(e,i);for(var n,s=y.keys(t),o=s.length,r={},a=0;o>a;a++)n=s[a],r[n]=e(t[n],n,t);return r},y.pairs=function(t){for(var e=y.keys(t),i=e.length,n=Array(i),s=0;i>s;s++)n[s]=[e[s],t[e[s]]];return n},y.invert=function(t){for(var e={},i=y.keys(t),n=0,s=i.length;s>n;n++)e[t[i[n]]]=i[n];return e},y.functions=y.methods=function(t){var e=[];for(var i in t)y.isFunction(t[i])&&e.push(i);return e.sort()},y.extend=w(y.allKeys),y.extendOwn=y.assign=w(y.keys),y.findKey=function(t,e,i){e=_(e,i);for(var n,s=y.keys(t),o=0,r=s.length;r>o;o++)if(n=s[o],e(t[n],n,t))return n},y.pick=function(t,e,i){var n,s,o={},r=t;if(null==r)return o;y.isFunction(e)?(s=y.allKeys(r),n=b(e,i)):(s=E(arguments,!1,!1,1),n=function(t,e,i){return e in i},r=Object(r));for(var a=0,l=s.length;l>a;a++){var u=s[a],c=r[u];n(c,u,r)&&(o[u]=c)}return o},y.omit=function(t,e,i){if(y.isFunction(e))e=y.negate(e);else{var n=y.map(E(arguments,!1,!1,1),String);e=function(t,e){return!y.contains(n,e)}}return y.pick(t,e,i)},y.defaults=w(y.allKeys,!0),y.create=function(t,e){var i=P(t);return e&&y.extendOwn(i,e),i},y.clone=function(t){return y.isObject(t)?y.isArray(t)?t.slice():y.extend({},t):t},y.tap=function(t,e){return e(t),t},y.isMatch=function(t,e){var i=y.keys(e),n=i.length;if(null==t)return!n;for(var s=Object(t),o=0;n>o;o++){var r=i[o];if(e[r]!==s[r]||!(r in s))return!1}return!0};var L=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof y&&(t=t._wrapped),e instanceof y&&(e=e._wrapped);var s=d.call(t);if(s!==d.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===s;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var r=t.constructor,a=e.constructor;if(r!==a&&!(y.isFunction(r)&&r instanceof r&&y.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),o){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!L(t[l],e[l],i,n))return!1}else{var u,c=y.keys(t);if(l=c.length,y.keys(e).length!==l)return!1;for(;l--;)if(u=c[l],!y.has(e,u)||!L(t[u],e[u],i,n))return!1}return i.pop(),n.pop(),!0};y.isEqual=function(t,e){return L(t,e)},y.isEmpty=function(t){return null==t?!0:x(t)&&(y.isArray(t)||y.isString(t)||y.isArguments(t))?0===t.length:0===y.keys(t).length},y.isElement=function(t){return!(!t||1!==t.nodeType)},y.isArray=f||function(t){return"[object Array]"===d.call(t)},y.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){y["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(t){return y.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(t){return"function"==typeof t||!1}),y.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},y.isNaN=function(t){return y.isNumber(t)&&t!==+t},y.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},y.isNull=function(t){return null===t},y.isUndefined=function(t){return void 0===t},y.has=function(t,e){return null!=t&&h.call(t,e)},y.noConflict=function(){return s._=o,this},y.identity=function(t){return t},y.constant=function(t){return function(){return t}},y.noop=function(){},y.property=k,y.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},y.matcher=y.matches=function(t){return t=y.extendOwn({},t),function(e){return y.isMatch(e,t)}},y.times=function(t,e,i){var n=Array(Math.max(0,t));e=b(e,i,1);for(var s=0;t>s;s++)n[s]=e(s);return n},y.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},y.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=y.invert(I),$=function(t){var e=function(e){return t[e]},i="(?:"+y.keys(t).join("|")+")",n=RegExp(i),s=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(s,e):t}};y.escape=$(I),y.unescape=$(B),y.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),y.isFunction(n)?n.call(t):n};var D=0;y.uniqueId=function(t){var e=++D+"";return t?t+e:e},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,U=function(t){return"\\"+N[t]};y.template=function(t,e,i){!e&&i&&(e=i),e=y.defaults({},e,y.templateSettings);var n=RegExp([(e.escape||j).source,(e.interpolate||j).source,(e.evaluate||j).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(n,function(e,i,n,r,a){return o+=t.slice(s,a).replace(F,U),s=a+e.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(o+="';\n"+r+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var r=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var l=function(t){return r.call(this,t,y)},u=e.variable||"obj";return l.source="function("+u+"){\n"+o+"}",l},y.chain=function(t){var e=y(t);return e._chain=!0,e};var H=function(t,e){return t._chain?y(e).chain():e};y.mixin=function(t){y.each(y.functions(t),function(e){var i=y[e]=t[e];y.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),H(this,i.apply(y,t))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];y.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],H(this,i)}}),y.each(["concat","join","slice"],function(t){var e=r[t];y.prototype[t]=function(){return H(this,e.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}).call(this),function(t){var e="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){e.Backbone=t(e,s,i,n)});else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(s){}t(e,exports,n,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,i,n){var s=t.Backbone,o=[].slice;e.VERSION="1.2.1",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var r=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,s){return i[e](this[n],t,s)};case 4:return function(t,s,o){return i[e](this[n],t,s,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},a=function(t,e,n){i.each(e,function(e,s){i[s]&&(t.prototype[s]=r(e,s,n))})},l=e.Events={},u=/\s+/,c=function(t,e,n,s,o){var r,a=0;if(n&&"object"==typeof n){void 0!==s&&"context"in o&&void 0===o.context&&(o.context=s);for(r=i.keys(n);a<r.length;a++)e=t(e,r[a],n[r[a]],o)}else if(n&&u.test(n))for(r=n.split(u);a<r.length;a++)e=t(e,r[a],s,o);else e=t(e,n,s,o);return e};l.on=function(t,e,i){return d(this,t,e,i)};var d=function(t,e,i,n,s){if(t._events=c(h,t._events||{},e,i,{context:n,ctx:t,listening:s}),s){var o=t._listeners||(t._listeners={});o[s.id]=s}return t};l.listenTo=function(t,e,n){if(!t)return this;var s=t._listenId||(t._listenId=i.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),r=o[s];if(!r){var a=this._listenId||(this._listenId=i.uniqueId("l"));r=o[s]={obj:t,objId:s,id:a,listeningTo:o,count:0}}return d(t,e,n,this,r),this};var h=function(t,e,i,n){if(i){var s=t[e]||(t[e]=[]),o=n.context,r=n.ctx,a=n.listening;a&&a.count++,s.push({callback:i,context:o,ctx:o||r,listening:a})}return t};l.off=function(t,e,i){return this._events?(this._events=c(f,this._events,t,e,{context:i,listeners:this._listeners}),this):this},l.stopListening=function(t,e,n){var s=this._listeningTo;if(!s)return this;for(var o=t?[t._listenId]:i.keys(s),r=0;r<o.length;r++){var a=s[o[r]];if(!a)break;a.obj.off(e,n,this)}return i.isEmpty(s)&&(this._listeningTo=void 0),this};var f=function(t,e,n,s){if(t){var o,r=0,a=s.context,l=s.listeners;if(e||n||a){for(var u=e?[e]:i.keys(t);r<u.length;r++){e=u[r];var c=t[e];if(!c)break;for(var d=[],h=0;h<c.length;h++){var f=c[h];n&&n!==f.callback&&n!==f.callback._callback||a&&a!==f.context?d.push(f):(o=f.listening,o&&0===--o.count&&(delete l[o.id],delete o.listeningTo[o.objId]))}d.length?t[e]=d:delete t[e]}return i.size(t)?t:void 0}for(var p=i.keys(l);r<p.length;r++)o=l[p[r]],delete l[o.id],delete o.listeningTo[o.objId]}};l.once=function(t,e,n){var s=c(p,{},t,e,i.bind(this.off,this));return this.on(s,void 0,n)},l.listenToOnce=function(t,e,n){var s=c(p,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,s)};var p=function(t,e,n,s){if(n){var o=t[e]=i.once(function(){s(e,o),n.apply(this,arguments)});o._callback=n}return t};l.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;e>n;n++)i[n]=arguments[n+1];return c(g,this._events,t,void 0,i),this};var g=function(t,e,i,n){if(t){var s=t[e],o=t.all;s&&o&&(o=o.slice()),s&&m(s,n),o&&m(o,[e].concat(n))}return t},m=function(t,e){var i,n=-1,s=t.length,o=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r,a);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}};l.bind=l.on,l.unbind=l.off,i.extend(e,l);var v=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(v.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var s;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;var o=n.unset,r=n.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var u=this.attributes,c=this.changed,d=this._previousAttributes;this.idAttribute in s&&(this.id=s[this.idAttribute]);for(var h in s)e=s[h],i.isEqual(u[h],e)||a.push(h),i.isEqual(d[h],e)?delete c[h]:c[h]=e,o?delete u[h]:u[h]=e;if(!r){a.length&&(this._pending=n);for(var f=0;f<a.length;f++)this.trigger("change:"+a[f],this,u[a[f]],n)}if(l)return this;if(!r)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e=this._changing?this._previousAttributes:this.attributes,n={};for(var s in t){var o=t[s];i.isEqual(e[s],o)||(n[s]=o)}return i.size(n)?n:!1},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var s=t.parse?e.parse(i,t):i;return e.set(s,t)?(n&&n.call(t.context,e,i,t),void e.trigger("sync",e,i,t)):!1},F(this,t),this.sync("read",this,t)},save:function(t,e,n){var s;null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var o=n.wait;if(s&&!o){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;var r=this,a=n.success,l=this.attributes;n.success=function(t){r.attributes=l;var e=n.parse?r.parse(t,n):t;return o&&(e=i.extend({},s,e)),e&&!r.set(e,n)?!1:(a&&a.call(n.context,r,t,n),void r.trigger("sync",r,t,n))},F(this,n),s&&o&&(this.attributes=i.extend({},l,s));var u=this.isNew()?"create":n.patch?"patch":"update";"patch"!==u||n.attrs||(n.attrs=s);var c=this.sync(u,this,n);return this.attributes=l,c},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){s&&o(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var r=!1;return this.isNew()?i.defer(t.success):(F(this,t),r=this.sync("delete",this,t)),s||o(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||N();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.defaults({validate:!0},t))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var y={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(v,y,"attributes");var b=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},_={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1};i.extend(b.prototype,l,{model:v,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,w))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:i.clone(t);var s=this._removeModels(t,e);return!e.silent&&s&&this.trigger("update",this,e),n?s[0]:s},set:function(t,e){e=i.defaults({},e,_),e.parse&&!this._isModel(t)&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:t.slice();var s,o,r,a,l,u=e.at;null!=u&&(u=+u),0>u&&(u+=this.length+1);for(var c=this.comparator&&null==u&&e.sort!==!1,d=i.isString(this.comparator)?this.comparator:null,h=[],f=[],p={},g=e.add,m=e.merge,v=e.remove,y=!c&&g&&v?[]:!1,b=!1,w=0;w<t.length;w++){if(r=t[w],a=this.get(r))v&&(p[a.cid]=!0),m&&r!==a&&(r=this._isModel(r)?r.attributes:r,e.parse&&(r=a.parse(r,e)),a.set(r,e),c&&!l&&a.hasChanged(d)&&(l=!0)),t[w]=a;else if(g){if(o=t[w]=this._prepareModel(r,e),!o)continue;h.push(o),this._addReference(o,e)}o=a||o,o&&(s=this.modelId(o.attributes),!y||!o.isNew()&&p[s]||(y.push(o),b=b||!this.models[w]||o.cid!==this.models[w].cid),p[s]=!0)}if(v){for(var w=0;w<this.length;w++)p[(o=this.models[w]).cid]||f.push(o);f.length&&this._removeModels(f,e)}if(h.length||b)if(c&&(l=!0),this.length+=h.length,null!=u)for(var w=0;w<h.length;w++)this.models.splice(u+w,0,h[w]);else{y&&(this.models.length=0);for(var P=y||h,w=0;w<P.length;w++)this.models.push(P[w])}if(l&&this.sort({silent:!0}),!e.silent){for(var k=null!=u?i.clone(e):e,w=0;w<h.length;w++)null!=u&&(k.index=u+w),(o=h[w]).trigger("add",o,this,k);(l||b)&&this.trigger("sort",this,e),(h.length||f.length)&&this.trigger("update",this,e)}return n?t[0]:t},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null==t)return void 0;var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){var n=i.matches(t);return this[e?"find":"filter"](function(t){return n(t.attributes)})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},F(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(t=this._prepareModel(t,e),!t)return!1;n||this.add(t,e);var s=this,o=e.success;return e.success=function(t,e,i){n&&s.add(t,i),o&&o.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var s=this.get(t[n]);if(s){var o=this.indexOf(s);this.models.splice(o,1),this.length--,e.silent||(e.index=o,s.trigger("remove",s,this,e)),i.push(s),this._removeReference(s,e)}}return i.length?i:!1},_isModel:function(t){return t instanceof v},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if("add"!==t&&"remove"!==t||i===this){if("destroy"===t&&this.remove(e,n),"change"===t){var s=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);s!==o&&(null!=s&&delete this._byId[s],null!=o&&(this._byId[o]=e))}this.trigger.apply(this,arguments)}}});var P={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};a(b,P,"models");var k=["groupBy","countBy","sortBy","indexBy"];i.each(k,function(t){i[t]&&(b.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)})});var C=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,x)),this._ensureElement(),this.initialize.apply(this,arguments)},T=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];i.extend(C.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var s=e.match(T);this.delegate(s[1],s[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,s){var o=A[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:o,dataType:"json"};if(s.url||(r.url=i.result(n,"url")||N()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),s.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",s.emulateJSON&&(r.data._method=o);var a=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),
a?a.apply(this,arguments):void 0}}"GET"===r.type||s.emulateJSON||(r.processData=!1);var l=s.error;s.error=function(t,e,i){s.textStatus=e,s.errorThrown=i,l&&l.call(s.context,t,e,i)};var u=s.xhr=e.ajax(i.extend(r,s));return n.trigger("request",n,u,s),u};var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,O=/\*\w+/g,L=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(E.prototype,l,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var o=this;return e.history.route(t,function(i){var r=o._extractParameters(t,i);o.execute(s,r,n)!==!1&&(o.trigger.apply(o,["route:"+n].concat(r)),o.trigger("route",n,r),e.history.trigger("route",o,n,r))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(L,"\\$&").replace(M,"(?:$1)?").replace(S,function(t,e){return e?t:"([^/?]+)"}).replace(O,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var I=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,$=/^\/+|\/+$/g,D=/#.*$/;I.started=!1,i.extend(I.prototype,l,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(B,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");if(I.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace($,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,s=n.insertBefore(this.iframe,n.firstChild).contentWindow;s.document.open(),s.document.close(),s.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};return this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),I.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return this.matchRoot()?(t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})):!1},navigate:function(t,e){if(!I.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;(""===t||"?"===t.charAt(0))&&(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(D,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;e.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new I;var j=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var o=function(){this.constructor=n};return o.prototype=s.prototype,n.prototype=new o,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};v.extend=b.extend=E.extend=C.extend=I.extend=j;var N=function(){throw new Error('A "url" property or function must be specified')},F=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["underscore","backbone"],t):t(_,Backbone)}(function(t,e){"use strict";var i,n=!1,s={},o=e.View.prototype.delegateEvents,r=e.View.prototype.undelegateEvents;return e.Mediator={debugMode:function(t){n=t?!0:!1},subscribe:function(e,i,o,r){if(t.isObject(o)||(o=window),!t.isUndefined(i)){if(!t.isFunction(i)&&!t.isFunction(o[i]))return void(n&&console.warn("Fuction passed as callback to channel subscription named  "+e+" seems invalid! Skipped!"));s[e]||(s[e]=[]),s[e].push({fn:i,context:o||this,once:r})}},unsubscribe:function(t,e,i){if(s[t])for(var n,o=0;o<s[t].length;o++)n=s[t][o],n.fn===e&&n.context===i&&(s[t].splice(o,1),o--)},publish:function(t){if(t.indexOf("*")>-1)throw new Error("When publishing to a channel, you cannot use wildcards");var i=[].slice.call(arguments,1),n=t.split(":"),o=n.length,r=function(i,n){for(var s=0;s<i.length;s++){var o=i[s];o.fn.apply(o.context,n),o.once&&(e.Mediator.unsubscribe(t,o.fn,o.context),s--)}};for(var a in s)for(var l=a.split(":"),u=0;o>u&&(n[u]===l[u]||"*"===l[u]);++u)u===o-1&&r(s[a],i)},subscribeOnce:function(t,i,n){e.Mediator.subscribe(t,i,n,!0)}},i={delegateEvents:function(){o.apply(this,arguments),this.setSubscriptions()},undelegateEvents:function(){r.apply(this,arguments),this.unsetSubscriptions()},subscriptions:{},setSubscriptions:function(i){i&&t.extend(this.subscriptions||{},i),i=i||this.subscriptions,i&&!t.isEmpty(i)&&(this.unsetSubscriptions(i),t.each(i,function(i,n){var s;i.$once&&(i=i.$once,s=!0),t.isString(i)&&(i=this[i]),e.Mediator.subscribe(n,i,this,s)},this))},unsetSubscriptions:function(i){i=i||this.subscriptions,i&&!t.isEmpty(i)&&t.each(i,function(i,n){t.isString(i)&&(i=this[i]),e.Mediator.unsubscribe(n,i.$once||i,this)},this)}},t.extend(e.View.prototype,i),t.extend(e.Mediator,{pub:e.Mediator.publish,sub:e.Mediator.subscribe}),e}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["underscore","backbone"],function(){return e.apply(t,arguments)}):"object"==typeof module&&module.exports?module.exports=e.call(t,require("underscore"),require("backbone")):e.call(t,t._,t.Backbone)}("object"==typeof global?global:this,function(t,e){"use strict";var i=function(e,i){return e&&e[i]?t.isFunction(e[i])?e[i]():e[i]:null},n=/^(\S+)\s*(.*)$/;return t.extend(e.View.prototype,{_touching:!1,touchPrevents:!0,touchThreshold:10,isTouch:this.document&&"ontouchstart"in this.document&&!("callPhantom"in this),delegateEvents:function(e){if(e||(e=i(this,"events"))){this.undelegateEvents();var s=".delegateEvents"+this.cid;t(e).each(function(i,o){if(t.isFunction(i)||(i=this[e[o]]),!i)throw new Error('Method "'+e[o]+'" does not exist');var r=o.match(n),a=r[1],l=r[2],u=t.bind(this._touchHandler,this);i=t.bind(i,this),this._useTouchHandlers(a,l)?(this.$el.on("touchstart"+s,l,u),this.$el.on("touchend"+s,l,{method:i},u)):(a+=s,""===l?this.$el.bind(a,i):this.$el.on(a,l,i))},this)}},_useTouchHandlers:function(t,e){return this.isTouch&&"click"===t},_touchHandler:function(t){var e=t.originalEvent||t;if("changedTouches"in e){var i=e.changedTouches[0],n=i.clientX,s=i.clientY;switch(t.type){case"touchstart":this._touching=[n,s];break;case"touchend":var o=this._touching[0],r=this._touching[1],a=this.touchThreshold;if(o+a>n&&n>o-a&&r+a>s&&s>r-a){if(this._touching=!1,this.touchPrevents){var l=t.currentTarget.tagName;("BUTTON"===l||"A"===l)&&(t.preventDefault(),t.stopPropagation())}t.data.method(t)}}}}}),e}),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,s=this,o=s.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if("object"==typeof t){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,s=this.getListenersAsObject(t),o="object"==typeof i;for(n in s)s.hasOwnProperty(n)&&-1===e(s[n],i)&&s[n].push(o?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,s,o=this.getListenersAsObject(t);for(s in o)o.hasOwnProperty(s)&&(n=e(o[s],i),-1!==n&&o[s].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,s,o=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)o.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(s=e[n])&&("function"==typeof s?o.call(this,n,s):r.call(this,n,s));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if("object"===i)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,s,o,r=this.getListenersAsObject(t);for(s in r)if(r.hasOwnProperty(s))for(n=r[s].length;n--;)i=r[s][n],i.once===!0&&this.removeListener(t,i.listener),o=i.listener.apply(this,e||[]),o===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return s.EventEmitter=o,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var s=function(){};i.removeEventListener?s=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(s=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var o={bind:n,unbind:s};"function"==typeof define&&define.amd?define("eventie/eventie",o):t.eventie=o}(this),function(t,e){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(i,n){return e(t,i,n)}):"object"==typeof exports?module.exports=e(t,require("wolfy87-eventemitter"),require("eventie")):t.imagesLoaded=e(t,t.EventEmitter,t.eventie)}(window,function(t,e,i){function n(t,e){for(var i in e)t[i]=e[i];return t}function s(t){return"[object Array]"===h.call(t)}function o(t){var e=[];if(s(t))e=t;else if("number"==typeof t.length)for(var i=0,n=t.length;n>i;i++)e.push(t[i]);else e.push(t);return e}function r(t,e,i){if(!(this instanceof r))return new r(t,e);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=o(t),this.options=n({},this.options),"function"==typeof e?i=e:n(this.options,e),i&&this.on("always",i),this.getImages(),u&&(this.jqDeferred=new u.Deferred);var s=this;setTimeout(function(){s.check()})}function a(t){this.img=t}function l(t){this.src=t,f[t]=this}var u=t.jQuery,c=t.console,d="undefined"!=typeof c,h=Object.prototype.toString;r.prototype=new e,r.prototype.options={},r.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var i=this.elements[t];"IMG"===i.nodeName&&this.addImage(i);var n=i.nodeType;if(n&&(1===n||9===n||11===n))for(var s=i.querySelectorAll("img"),o=0,r=s.length;r>o;o++){var a=s[o];this.addImage(a)}}},r.prototype.addImage=function(t){var e=new a(t);this.images.push(e)},r.prototype.check=function(){function t(t,s){return e.options.debug&&d&&c.log("confirm",t,s),e.progress(t),i++,i===n&&e.complete(),!0}var e=this,i=0,n=this.images.length;if(this.hasAnyBroken=!1,!n)return void this.complete();for(var s=0;n>s;s++){var o=this.images[s];o.on("confirm",t),o.check()}},r.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify&&e.jqDeferred.notify(e,t)})},r.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var i=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[i](e)}})},u&&(u.fn.imagesLoaded=function(t,e){var i=new r(this,t,e);return i.jqDeferred.promise(u(this))}),a.prototype=new e,a.prototype.check=function(){var t=f[this.img.src]||new l(this.img.src);if(t.isConfirmed)return void this.confirm(t.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this;t.on("confirm",function(t,i){return e.confirm(t.isLoaded,i),!0}),t.check()},a.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("confirm",this,e)};var f={};return l.prototype=new e,l.prototype.check=function(){if(!this.isChecked){var t=new Image;i.bind(t,"load",this),i.bind(t,"error",this),t.src=this.src,this.isChecked=!0}},l.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.prototype.onload=function(t){this.confirm(!0,"onload"),this.unbindProxyEvents(t)},l.prototype.onerror=function(t){this.confirm(!1,"onerror"),this.unbindProxyEvents(t)},l.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},l.prototype.unbindProxyEvents=function(t){i.unbind(t.target,"load",this),i.unbind(t.target,"error",this)},r}),function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function s(e,i){t.fn[e]=function(s){if("string"==typeof s){for(var r=n.call(arguments,1),a=0,l=this.length;l>a;a++){var u=this[a],c=t.data(u,e);if(c)if(t.isFunction(c[s])&&"_"!==s.charAt(0)){var d=c[s].apply(c,r);if(void 0!==d)return d}else o("no such method '"+s+"' for "+e+" instance");else o("cannot call methods on "+e+" prior to initialization; attempted to call '"+s+"'")}return this}return this.each(function(){var n=t.data(this,e);n?(n.option(s),n._init()):(n=new i(this,s),t.data(this,e,n))})}}if(t){var o="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),s(t,e)},t.bridget}}var n=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):i("object"==typeof exports?require("jquery"):t.jQuery)}(window),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var s=function(){};i.removeEventListener?s=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(s=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var o={bind:n,unbind:s};"function"==typeof define&&define.amd?define("eventie/eventie",o):"object"==typeof exports?module.exports=o:t.eventie=o}(window),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,s=this,o=s.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if(t instanceof RegExp){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,s=this.getListenersAsObject(t),o="object"==typeof i;for(n in s)s.hasOwnProperty(n)&&-1===e(s[n],i)&&s[n].push(o?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,s,o=this.getListenersAsObject(t);for(s in o)o.hasOwnProperty(s)&&(n=e(o[s],i),-1!==n&&o[s].splice(n,1));return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,s,o=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)o.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(s=e[n])&&("function"==typeof s?o.call(this,n,s):r.call(this,n,s));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,s,o,r=this.getListenersAsObject(t);for(s in r)if(r.hasOwnProperty(s))for(n=r[s].length;n--;)i=r[s][n],i.once===!0&&this.removeListener(t,i.listener),o=i.listener.apply(this,e||[]),o===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return s.EventEmitter=o,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:s.EventEmitter=t}.call(this),function(t){function e(t){if(t){if("string"==typeof n[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,s=0,o=i.length;o>s;s++)if(e=i[s]+t,"string"==typeof n[e])return e}}var i="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),function(t,e){function i(t){var e=parseFloat(t),i=-1===t.indexOf("%")&&!isNaN(e);return i&&e}function n(){}function s(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=a.length;i>e;e++){var n=a[e];t[n]=0}return t}function o(e){function n(){if(!h){h=!0;var n=t.getComputedStyle;if(u=function(){var t=n?function(t){return n(t,null)}:function(t){return t.currentStyle};return function(e){var i=t(e);return i||r("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),i}}(),c=e("boxSizing")){var s=document.createElement("div");s.style.width="200px",s.style.padding="1px 2px 3px 4px",s.style.borderStyle="solid",s.style.borderWidth="1px 2px 3px 4px",s.style[c]="border-box";var o=document.body||document.documentElement;o.appendChild(s);var a=u(s);d=200===i(a.width),o.removeChild(s)}}}function o(t){if(n(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var e=u(t);if("none"===e.display)return s();var o={};o.width=t.offsetWidth,o.height=t.offsetHeight;for(var r=o.isBorderBox=!(!c||!e[c]||"border-box"!==e[c]),h=0,f=a.length;f>h;h++){var p=a[h],g=e[p];g=l(t,g);var m=parseFloat(g);o[p]=isNaN(m)?0:m}var v=o.paddingLeft+o.paddingRight,y=o.paddingTop+o.paddingBottom,b=o.marginLeft+o.marginRight,_=o.marginTop+o.marginBottom,w=o.borderLeftWidth+o.borderRightWidth,P=o.borderTopWidth+o.borderBottomWidth,k=r&&d,C=i(e.width);C!==!1&&(o.width=C+(k?0:v+w));var T=i(e.height);return T!==!1&&(o.height=T+(k?0:y+P)),o.innerWidth=o.width-(v+w),o.innerHeight=o.height-(y+P),o.outerWidth=o.width+b,o.outerHeight=o.height+_,o}}function l(e,i){if(t.getComputedStyle||-1===i.indexOf("%"))return i;var n=e.style,s=n.left,o=e.runtimeStyle,r=o&&o.left;return r&&(o.left=e.currentStyle.left),n.left=i,i=n.pixelLeft,n.left=s,r&&(o.left=r),i}var u,c,d,h=!1;return o}var r="undefined"==typeof console?n:function(t){console.error(t)},a=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],o):"object"==typeof exports?module.exports=o(require("desandro-get-style-property")):t.getSize=o(t.getStyleProperty)}(window),function(t){function e(t){"function"==typeof t&&(e.isReady?t():r.push(t))}function i(t){var i="readystatechange"===t.type&&"complete"!==o.readyState;e.isReady||i||n()}function n(){e.isReady=!0;for(var t=0,i=r.length;i>t;t++){var n=r[t];n()}}function s(s){return"complete"===o.readyState?n():(s.bind(o,"DOMContentLoaded",i),s.bind(o,"readystatechange",i),s.bind(t,"load",i)),e}var o=t.document,r=[];e.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],s):"object"==typeof exports?module.exports=s(require("eventie")):t.docReady=s(t.eventie)}(window),function(t){function e(t,e){return t[r](e)}function i(t){if(!t.parentNode){var e=document.createDocumentFragment();e.appendChild(t)}}function n(t,e){i(t);for(var n=t.parentNode.querySelectorAll(e),s=0,o=n.length;o>s;s++)if(n[s]===t)return!0;return!1}function s(t,n){return i(t),e(t,n)}var o,r=function(){if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0,n=e.length;n>i;i++){var s=e[i],o=s+"MatchesSelector";if(t[o])return o}}();if(r){var a=document.createElement("div"),l=e(a,"div");o=l?e:s}else o=n;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return o}):"object"==typeof exports?module.exports=o:window.matchesSelector=o}(Element.prototype),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(i,n){return e(t,i,n)}):"object"==typeof exports?module.exports=e(t,require("doc-ready"),require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.docReady,t.matchesSelector)}(window,function(t,e,i){var n={};n.extend=function(t,e){for(var i in e)t[i]=e[i];return t},n.modulo=function(t,e){return(t%e+e)%e};var s=Object.prototype.toString;n.isArray=function(t){return"[object Array]"==s.call(t)},n.makeArray=function(t){var e=[];if(n.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var i=0,s=t.length;s>i;i++)e.push(t[i]);else e.push(t);return e},n.indexOf=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},n.removeFrom=function(t,e){var i=n.indexOf(t,e);-1!=i&&t.splice(i,1)},n.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1==t.nodeType&&"string"==typeof t.nodeName},n.setText=function(){function t(t,i){e=e||(void 0!==document.documentElement.textContent?"textContent":"innerText"),t[e]=i}var e;return t}(),n.getParent=function(t,e){for(;t!=document.body;)if(t=t.parentNode,i(t,e))return t},n.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},n.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},n.filterFindElements=function(t,e){t=n.makeArray(t);for(var s=[],o=0,r=t.length;r>o;o++){var a=t[o];if(n.isElement(a))if(e){i(a,e)&&s.push(a);for(var l=a.querySelectorAll(e),u=0,c=l.length;c>u;u++)s.push(l[u])}else s.push(a)}return s},n.debounceMethod=function(t,e,i){var n=t.prototype[e],s=e+"Timeout";t.prototype[e]=function(){var t=this[s];t&&clearTimeout(t);var e=arguments,o=this;this[s]=setTimeout(function(){n.apply(o,e),delete o[s]},i||100)}},n.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var o=t.console;return n.htmlInit=function(i,s){e(function(){for(var e=n.toDashed(s),r=document.querySelectorAll(".js-"+e),a="data-"+e+"-options",l=0,u=r.length;u>l;l++){var c,d=r[l],h=d.getAttribute(a);try{c=h&&JSON.parse(h)}catch(f){o&&o.error("Error parsing "+a+" on "+d.nodeName.toLowerCase()+(d.id?"#"+d.id:"")+": "+f);continue}var p=new i(d,c),g=t.jQuery;g&&g.data(d,s,p)}})},n}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(i,n,s,o){return e(t,i,n,s,o)}):"object"==typeof exports?module.exports=e(t,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(t.Outlayer={},t.Outlayer.Item=e(t,t.EventEmitter,t.getSize,t.getStyleProperty,t.fizzyUIUtils))}(window,function(t,e,i,n,s){function o(t){for(var e in t)return!1;return e=null,!0}function r(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}function a(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}var l=t.getComputedStyle,u=l?function(t){return l(t,null)}:function(t){return t.currentStyle},c=n("transition"),d=n("transform"),h=c&&d,f=!!n("perspective"),p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[c],g=["transform","transition","transitionDuration","transitionProperty"],m=function(){for(var t={},e=0,i=g.length;i>e;e++){var s=g[e],o=n(s);o&&o!==s&&(t[s]=o)}return t}();s.extend(r.prototype,e.prototype),r.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.getSize=function(){this.size=i(this.element)},r.prototype.css=function(t){var e=this.element.style;for(var i in t){var n=m[i]||i;e[n]=t[i]}},r.prototype.getPosition=function(){var t=u(this.element),e=this.layout.options,i=e.isOriginLeft,n=e.isOriginTop,s=t[i?"left":"right"],o=t[n?"top":"bottom"],r=parseInt(s,10),a=parseInt(o,10),l=this.layout.size;r=-1!=s.indexOf("%")?r/100*l.width:r,a=-1!=o.indexOf("%")?a/100*l.height:a,r=isNaN(r)?0:r,a=isNaN(a)?0:a,r-=i?l.paddingLeft:l.paddingRight,a-=n?l.paddingTop:l.paddingBottom,this.position.x=r,this.position.y=a},r.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,i={},n=e.isOriginLeft?"paddingLeft":"paddingRight",s=e.isOriginLeft?"left":"right",o=e.isOriginLeft?"right":"left",r=this.position.x+t[n];i[s]=this.getXValue(r),i[o]="";var a=e.isOriginTop?"paddingTop":"paddingBottom",l=e.isOriginTop?"top":"bottom",u=e.isOriginTop?"bottom":"top",c=this.position.y+t[a];i[l]=this.getYValue(c),i[u]="",this.css(i),this.emitEvent("layout",[this])},r.prototype.getXValue=function(t){var e=this.layout.options;return e.percentPosition&&!e.isHorizontal?t/this.layout.size.width*100+"%":t+"px"},r.prototype.getYValue=function(t){var e=this.layout.options;return e.percentPosition&&e.isHorizontal?t/this.layout.size.height*100+"%":t+"px"},r.prototype._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,s=parseInt(t,10),o=parseInt(e,10),r=s===this.position.x&&o===this.position.y;if(this.setPosition(t,e),r&&!this.isTransitioning)return void this.layoutPosition();var a=t-i,l=e-n,u={};u.transform=this.getTranslate(a,l),this.transition({to:u,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},r.prototype.getTranslate=function(t,e){var i=this.layout.options;return t=i.isOriginLeft?t:-t,e=i.isOriginTop?e:-e,t=this.getXValue(t),e=this.getYValue(e),f?"translate3d("+t+", "+e+", 0)":"translate("+t+", "+e+")"},r.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},r.prototype.moveTo=h?r.prototype._transitionTo:r.prototype.goTo,r.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},r.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},r.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);var n=this.element.offsetHeight;n=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var v="opacity,"+a(m.transform||"transform");r.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:v,transitionDuration:this.layout.options.transitionDuration
}),this.element.addEventListener(p,this,!1))},r.prototype.transition=r.prototype[c?"_transition":"_nonTransition"],r.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},r.prototype.onotransitionend=function(t){this.ontransitionend(t)};var y={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};r.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,i=y[t.propertyName]||t.propertyName;if(delete e.ingProperties[i],o(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd){var n=e.onEnd[i];n.call(this),delete e.onEnd[i]}this.emitEvent("transitionEnd",[this])}},r.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(p,this,!1),this.isTransitioning=!1},r.prototype._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var b={transitionProperty:"",transitionDuration:""};return r.prototype.removeTransitionStyles=function(){this.css(b)},r.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},r.prototype.remove=function(){if(!c||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var t=this;this.once("transitionEnd",function(){t.removeElem()}),this.hide()},r.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("visibleStyle");e[i]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},r.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},r.prototype.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},r.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={},i=this.getHideRevealTransitionEndProperty("hiddenStyle");e[i]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},r.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},r.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},r}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,n,s,o,r){return e(t,i,n,s,o,r)}):"object"==typeof exports?module.exports=e(t,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.eventie,t.EventEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,i,n,s,o){function r(t,e){var i=s.getQueryElement(t);if(!i)return void(a&&a.error("Bad element for "+this.constructor.namespace+": "+(i||t)));this.element=i,l&&(this.$element=l(this.element)),this.options=s.extend({},this.constructor.defaults),this.option(e);var n=++c;this.element.outlayerGUID=n,d[n]=this,this._create(),this.options.isInitLayout&&this.layout()}var a=t.console,l=t.jQuery,u=function(){},c=0,d={};return r.namespace="outlayer",r.Item=o,r.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},s.extend(r.prototype,i.prototype),r.prototype.option=function(t){s.extend(this.options,t)},r.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),s.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},r.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},r.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],s=0,o=e.length;o>s;s++){var r=e[s],a=new i(r,this);n.push(a)}return n},r.prototype._filterFindItemElements=function(t){return s.filterFindElements(t,this.options.itemSelector)},r.prototype.getItemElements=function(){for(var t=[],e=0,i=this.items.length;i>e;e++)t.push(this.items[e].element);return t},r.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},r.prototype._init=r.prototype.layout,r.prototype._resetLayout=function(){this.getSize()},r.prototype.getSize=function(){this.size=n(this.element)},r.prototype._getMeasurement=function(t,e){var i,o=this.options[t];o?("string"==typeof o?i=this.element.querySelector(o):s.isElement(o)&&(i=o),this[t]=i?n(i)[e]:o):this[t]=0},r.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},r.prototype._getItemsForLayout=function(t){for(var e=[],i=0,n=t.length;n>i;i++){var s=t[i];s.isIgnored||e.push(s)}return e},r.prototype._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){for(var i=[],n=0,s=t.length;s>n;n++){var o=t[n],r=this._getItemLayoutPosition(o);r.item=o,r.isInstant=e||o.isLayoutInstant,i.push(r)}this._processLayoutQueue(i)}},r.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},r.prototype._processLayoutQueue=function(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];this._positionItem(n.item,n.x,n.y,n.isInstant)}},r.prototype._positionItem=function(t,e,i,n){n?t.goTo(e,i):t.moveTo(e,i)},r.prototype._postLayout=function(){this.resizeContainer()},r.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},r.prototype._getContainerSize=u,r.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},r.prototype._emitCompleteOnItems=function(t,e){function i(){s.dispatchEvent(t+"Complete",null,[e])}function n(){r++,r===o&&i()}var s=this,o=e.length;if(!e||!o)return void i();for(var r=0,a=0,l=e.length;l>a;a++){var u=e[a];u.once(t,n)}},r.prototype.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),l)if(this.$element=this.$element||l(this.element),e){var s=l.Event(e);s.type=t,this.$element.trigger(s,i)}else this.$element.trigger(t,i)},r.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},r.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},r.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,i=t.length;i>e;e++){var n=t[e];this.ignore(n)}}},r.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,i=t.length;i>e;e++){var n=t[e];s.removeFrom(this.stamps,n),this.unignore(n)}},r.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=s.makeArray(t)):void 0},r.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var i=this.stamps[t];this._manageStamp(i)}}},r.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},r.prototype._manageStamp=u,r.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,s=n(t),o={left:e.left-i.left-s.marginLeft,top:e.top-i.top-s.marginTop,right:i.right-e.right-s.marginRight,bottom:i.bottom-e.bottom-s.marginBottom};return o},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.bindResize=function(){this.isResizeBound||(e.bind(t,"resize",this),this.isResizeBound=!0)},r.prototype.unbindResize=function(){this.isResizeBound&&e.unbind(t,"resize",this),this.isResizeBound=!1},r.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},r.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},r.prototype.needsResizeLayout=function(){var t=n(this.element),e=this.size&&t;return e&&t.innerWidth!==this.size.innerWidth},r.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},r.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},r.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},r.prototype.reveal=function(t){this._emitCompleteOnItems("reveal",t);for(var e=t&&t.length,i=0;e&&e>i;i++){var n=t[i];n.reveal()}},r.prototype.hide=function(t){this._emitCompleteOnItems("hide",t);for(var e=t&&t.length,i=0;e&&e>i;i++){var n=t[i];n.hide()}},r.prototype.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},r.prototype.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},r.prototype.getItem=function(t){for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e];if(n.element===t)return n}},r.prototype.getItems=function(t){t=s.makeArray(t);for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i],r=this.getItem(o);r&&e.push(r)}return e},r.prototype.remove=function(t){var e=this.getItems(t);if(this._emitCompleteOnItems("remove",e),e&&e.length)for(var i=0,n=e.length;n>i;i++){var o=e[i];o.remove(),s.removeFrom(this.items,o)}},r.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e];n.destroy()}this.unbindResize();var s=this.element.outlayerGUID;delete d[s],delete this.element.outlayerGUID,l&&l.removeData(this.element,this.constructor.namespace)},r.data=function(t){t=s.getQueryElement(t);var e=t&&t.outlayerGUID;return e&&d[e]},r.create=function(t,e){function i(){r.apply(this,arguments)}return Object.create?i.prototype=Object.create(r.prototype):s.extend(i.prototype,r.prototype),i.prototype.constructor=i,i.defaults=s.extend({},r.defaults),s.extend(i.defaults,e),i.prototype.settings={},i.namespace=t,i.data=r.data,i.Item=function(){o.apply(this,arguments)},i.Item.prototype=new o,s.htmlInit(i,t),l&&l.bridget&&l.bridget(t,i),i},r.Item=o,r}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],e):"object"==typeof exports?module.exports=e(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):t.Masonry=e(t.Outlayer,t.getSize,t.fizzyUIUtils)}(window,function(t,e,i){var n=t.create("masonry");return n.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},n.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,s=this.containerWidth+this.gutter,o=s/n,r=n-s%n,a=r&&1>r?"round":"floor";o=Math[a](o),this.cols=Math.max(o,1)},n.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},n.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,n=e&&1>e?"round":"ceil",s=Math[n](t.size.outerWidth/this.columnWidth);s=Math.min(s,this.cols);for(var o=this._getColGroup(s),r=Math.min.apply(Math,o),a=i.indexOf(o,r),l={x:this.columnWidth*a,y:r},u=r+t.size.outerHeight,c=this.cols+1-o.length,d=0;c>d;d++)this.colYs[a+d]=u;return l},n.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++){var s=this.colYs.slice(n,n+t);e[n]=Math.max.apply(Math,s)}return e},n.prototype._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),s=this.options.isOriginLeft?n.left:n.right,o=s+i.outerWidth,r=Math.floor(s/this.columnWidth);r=Math.max(0,r);var a=Math.floor(o/this.columnWidth);a-=o%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var l=(this.options.isOriginTop?n.top:n.bottom)+i.outerHeight,u=r;a>=u;u++)this.colYs[u]=Math.max(l,this.colYs[u])},n.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},n.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!==this.containerWidth},n}),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(){return e.apply(t,arguments)}):"object"==typeof module&&module.exports?module.exports=e.call(t,require("jquery")):e.call(t,t.jQuery)}("object"==typeof global?global:this,function(t){function e(t){return t.match(/\D+$/)}function i(e,i,n,s){if("d"!=n&&c(e)){var o=y.exec(i),r="auto"===e.css(n)?0:e.css(n),a="string"==typeof r?u(r):r,d=("string"==typeof i?u(i):i,s===!0?0:a),h=e.is(":hidden"),f=e.translation();if("left"==n&&(d=parseInt(a,10)+f.x),"right"==n&&(d=parseInt(a,10)+f.x),"top"==n&&(d=parseInt(a,10)+f.y),"bottom"==n&&(d=parseInt(a,10)+f.y),o||"show"!=i?o||"hide"!=i||(d=0):(d=1,h&&(elem=e[0],elem.style&&(display=elem.style.display,t._data(elem,"olddisplay")||"none"!==display||(display=elem.style.display=""),""===display&&"none"===t.css(elem,"display")&&t._data(elem,"olddisplay",l(elem.tagName)),(""===display||"none"===display)&&(elem.style.display=t._data(elem,"olddisplay")||"")),e.css("opacity",0))),o){var p=parseFloat(o[2]);return o[1]&&(p=("-="===o[1]?-1:1)*p+parseInt(d,10)),o[3]&&"px"!=o[3]&&(p+=o[3]),p}return d}}function n(t,e,i){return i===!0||L===!0&&i!==!1&&O?"translate3d("+t+"px, "+e+"px, 0)":"translate("+t+"px,"+e+"px)"}function s(e,i,n,s,r,l,c,d){var h=e.data(P),f=h&&!a(h)?h:t.extend(!0,{},_),p=r,m=t.inArray(i,g)>-1;if(m){var v=f.meta,y=u(e.css(i))||0,b=i+"_o";p=r-y,v[i]=p,v[b]="auto"==e.css(i)?0+p:y+p||0,f.meta=v,c&&0===p&&(p=0-v[b],v[i]=p,v[b]=0)}return e.data(P,o(e,f,i,n,s,p,l,c,d))}function o(t,e,i,s,o,r,a,l,u){var c=!1,d=a===!0&&l===!0;e=e||{},e.original||(e.original={},c=!0),e.properties=e.properties||{},e.secondary=e.secondary||{};for(var h=e.meta,f=e.original,p=e.properties,g=e.secondary,v=m.length-1;v>=0;v--){var y=m[v]+"transition-property",b=m[v]+"transition-duration",_=m[v]+"transition-timing-function";i=d?m[v]+"transform":i,c&&(f[y]=t.css(y)||"",f[b]=t.css(b)||"",f[_]=t.css(_)||""),g[i]=d?n(h.left,h.top,u):r,p[y]=(p[y]?p[y]+",":"")+i,p[b]=(p[b]?p[b]+",":"")+s+"ms",p[_]=(p[_]?p[_]+",":"")+o}return e}function r(t){for(var e in t)if(!("width"!=e&&"height"!=e||"show"!=t[e]&&"hide"!=t[e]&&"toggle"!=t[e]))return!0;return!1}function a(t){for(var e in t)return!1;return!0}function l(t){t=t.toUpperCase();var e={LI:"list-item",TR:"table-row",TD:"table-cell",TH:"table-cell",CAPTION:"table-caption",COL:"table-column",COLGROUP:"table-column-group",TFOOT:"table-footer-group",THEAD:"table-header-group",TBODY:"table-row-group"};return"string"==typeof e[t]?e[t]:"block"}function u(t){return parseFloat(t.replace(e(t),""))}function c(t){var e=!0;return t.each(function(t,i){return e=e&&i.ownerDocument}),e}function d(e,i,n){if(!c(n))return!1;var s=t.inArray(e,p)>-1;return"width"!=e&&"height"!=e&&"opacity"!=e||parseFloat(i)!==parseFloat(n.css(e))||(s=!1),s}var h=t.fn.animate,f=t.fn.stop,p=["top","right","bottom","left","opacity","height","width"],g=["top","right","bottom","left"],m=["-webkit-","-moz-","-o-",""],v=["avoidTransforms","useTranslate3d","leaveTransforms"],y=/^([+-]=)?([\d+-.]+)(.*)$/,b=/([A-Z])/g,_={secondary:{},meta:{top:0,right:0,bottom:0,left:0}},w="px",P="jQe",k="cubic-bezier(",C=")",T=null,x=!1,A=document.body||document.documentElement,E=A.style,M="webkitTransitionEnd oTransitionEnd transitionend",S=void 0!==E.WebkitTransition||void 0!==E.MozTransition||void 0!==E.OTransition||void 0!==E.transition,O="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,L=O;t.expr&&t.expr.filters&&(T=t.expr.filters.animated,t.expr.filters.animated=function(e){return t(e).data("events")&&t(e).data("events")[M]?!0:T.call(this,e)}),t.extend({toggle3DByDefault:function(){return L=!L},toggleDisabledByDefault:function(){return x=!x},setDisabledByDefault:function(t){return x=t}}),t.fn.translation=function(){if(!this[0])return null;var t=this[0],e=window.getComputedStyle(t,null),i={x:0,y:0};if(e)for(var n=m.length-1;n>=0;n--){var s=e.getPropertyValue(m[n]+"transform");if(s&&/matrix/i.test(s)){var o=s.replace(/^matrix\(/i,"").split(/, |\)$/g);i={x:parseInt(o[4],10),y:parseInt(o[5],10)};break}}return i},t.fn.animate=function(e,n,o,l){e=e||{};var u=!("undefined"!=typeof e.bottom||"undefined"!=typeof e.right),c=t.speed(n,o,l),f=0,p=function(){f--,0===f&&"function"==typeof c.complete&&c.complete.apply(this,arguments)},y="undefined"!=typeof e.avoidCSSTransitions?e.avoidCSSTransitions:x;return y===!0||!S||a(e)||r(e)||c.duration<=0||c.step?h.apply(this,arguments):this[c.queue===!0?"queue":"each"](function(){var n=t(this),o=t.extend({},c),r=function(i){var s=n.data(P)||{original:{}},o={};if(2==i.eventPhase){if(e.leaveTransforms!==!0){for(var r=m.length-1;r>=0;r--)o[m[r]+"transform"]="";if(u&&"undefined"!=typeof s.meta)for(var a,l=0;a=g[l];++l){var c=s.meta[a+"_o"];c&&(o[a]=c+w,t(this).css(a,o[a]))}}n.unbind(M).css(s.original).css(o).data(P,null),"hide"===e.opacity&&(elem=n[0],elem.style&&(display=t.css(elem,"display"),"none"===display||t._data(elem,"olddisplay")||t._data(elem,"olddisplay",display),elem.style.display="none"),n.css("opacity","")),p.call(this)}},l={bounce:k+"0.0, 0.35, .5, 1.3"+C,linear:"linear",swing:"ease-in-out",easeInQuad:k+"0.550, 0.085, 0.680, 0.530"+C,easeInCubic:k+"0.550, 0.055, 0.675, 0.190"+C,easeInQuart:k+"0.895, 0.030, 0.685, 0.220"+C,easeInQuint:k+"0.755, 0.050, 0.855, 0.060"+C,easeInSine:k+"0.470, 0.000, 0.745, 0.715"+C,easeInExpo:k+"0.950, 0.050, 0.795, 0.035"+C,easeInCirc:k+"0.600, 0.040, 0.980, 0.335"+C,easeInBack:k+"0.600, -0.280, 0.735, 0.045"+C,easeOutQuad:k+"0.250, 0.460, 0.450, 0.940"+C,easeOutCubic:k+"0.215, 0.610, 0.355, 1.000"+C,easeOutQuart:k+"0.165, 0.840, 0.440, 1.000"+C,easeOutQuint:k+"0.230, 1.000, 0.320, 1.000"+C,easeOutSine:k+"0.390, 0.575, 0.565, 1.000"+C,easeOutExpo:k+"0.190, 1.000, 0.220, 1.000"+C,easeOutCirc:k+"0.075, 0.820, 0.165, 1.000"+C,easeOutBack:k+"0.175, 0.885, 0.320, 1.275"+C,easeInOutQuad:k+"0.455, 0.030, 0.515, 0.955"+C,easeInOutCubic:k+"0.645, 0.045, 0.355, 1.000"+C,easeInOutQuart:k+"0.770, 0.000, 0.175, 1.000"+C,easeInOutQuint:k+"0.860, 0.000, 0.070, 1.000"+C,easeInOutSine:k+"0.445, 0.050, 0.550, 0.950"+C,easeInOutExpo:k+"1.000, 0.000, 0.000, 1.000"+C,easeInOutCirc:k+"0.785, 0.135, 0.150, 0.860"+C,easeInOutBack:k+"0.680, -0.550, 0.265, 1.550"+C},y={},b=l[o.easing||"swing"]?l[o.easing||"swing"]:o.easing||"swing";for(var _ in e)if(-1===t.inArray(_,v)){var T=t.inArray(_,g)>-1,x=i(n,e[_],_,T&&e.avoidTransforms!==!0);d(_,x,n)?s(n,_,o.duration,b,x,T&&e.avoidTransforms!==!0,u,e.useTranslate3d):y[_]=e[_]}n.unbind(M);var A=n.data(P);if(!A||a(A)||a(A.secondary))o.queue=!1;else{f++,n.css(A.properties);var E=A.secondary;setTimeout(function(){n.bind(M,r).css(E)})}return a(y)||(f++,h.apply(n,[y,{duration:o.duration,easing:t.easing[o.easing]?o.easing:t.easing.swing?"swing":"linear",complete:p,queue:o.queue}])),!0})},t.fn.animate.defaults={},t.fn.stop=function(e,i,n){return S?(e&&this.queue([]),this.each(function(){var s=t(this),o=s.data(P);if(o&&!a(o)){var r,l={};if(i){if(l=o.secondary,!n&&void 0!==typeof o.meta.left_o||void 0!==typeof o.meta.top_o)for(l.left=void 0!==typeof o.meta.left_o?o.meta.left_o:"auto",l.top=void 0!==typeof o.meta.top_o?o.meta.top_o:"auto",r=m.length-1;r>=0;r--)l[m[r]+"transform"]=""}else if(!a(o.secondary)){var u=window.getComputedStyle(s[0],null);if(u)for(var c in o.secondary)if(o.secondary.hasOwnProperty(c)&&(c=c.replace(b,"-$1").toLowerCase(),l[c]=u.getPropertyValue(c),!n&&/matrix/i.test(l[c]))){var d=l[c].replace(/^matrix\(/i,"").split(/, |\)$/g);for(l.left=parseFloat(d[4])+parseFloat(s.css("left"))+w||"auto",l.top=parseFloat(d[5])+parseFloat(s.css("top"))+w||"auto",r=m.length-1;r>=0;r--)l[m[r]+"transform"]=""}}s.unbind(M),s.css(o.original).css(l).data(P,null)}else f.apply(s,[e,i])}),this):f.apply(this,[e,i])}}),function(t){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],t):t(jQuery)}(function(t){"use strict";function e(e){return!e||void 0!==e.allowPageScroll||void 0===e.swipe&&void 0===e.swipeStatus||(e.allowPageScroll=c),void 0!==e.click&&void 0===e.tap&&(e.tap=e.click),e||(e={}),e=t.extend({},t.fn.swipe.defaults,e),this.each(function(){var n=t(this),s=n.data(E);s||(s=new i(this,e),n.data(E,s))})}function i(e,i){function n(e){if(!(ut()||t(e.target).closest(i.excludedElements,zt).length>0)){var n,s=e.originalEvent?e.originalEvent:e,o=s.touches,r=o?o[0]:s;return qt=w,o?Gt=o.length:e.preventDefault(),$t=0,Dt=null,Vt=null,jt=0,Nt=0,Ft=0,Ut=1,Ht=0,Wt=pt(),Rt=vt(),at(),!o||Gt===i.fingers||i.fingers===b||R()?(dt(0,r),Kt=xt(),2==Gt&&(dt(1,o[1]),Nt=Ft=_t(Wt[0].start,Wt[1].start)),(i.swipeStatus||i.pinchStatus)&&(n=$(s,qt))):n=!1,n===!1?(qt=C,$(s,qt),n):(i.hold&&(te=setTimeout(t.proxy(function(){zt.trigger("hold",[s.target]),i.hold&&(n=i.hold.call(zt,s,s.target))},this),i.longTapThreshold)),ct(!0),null)}}function M(t){var e=t.originalEvent?t.originalEvent:t;if(qt!==k&&qt!==C&&!lt()){var n,s=e.touches,o=s?s[0]:e,r=ht(o);if(Qt=xt(),s&&(Gt=s.length),i.hold&&clearTimeout(te),qt=P,2==Gt&&(0==Nt?(dt(1,s[1]),Nt=Ft=_t(Wt[0].start,Wt[1].start)):(ht(s[1]),Ft=_t(Wt[0].end,Wt[1].end),Vt=Pt(Wt[0].end,Wt[1].end)),Ut=wt(Nt,Ft),Ht=Math.abs(Nt-Ft)),Gt===i.fingers||i.fingers===b||!s||R()){if(Dt=Tt(r.start,r.end),H(t,Dt),$t=kt(r.start,r.end),jt=bt(),gt(Dt,$t),(i.swipeStatus||i.pinchStatus)&&(n=$(e,qt)),!i.triggerOnTouchEnd||i.triggerOnTouchLeave){var a=!0;if(i.triggerOnTouchLeave){var l=At(this);a=Et(r.end,l)}!i.triggerOnTouchEnd&&a?qt=B(P):i.triggerOnTouchLeave&&!a&&(qt=B(k)),(qt==C||qt==k)&&$(e,qt)}}else qt=C,$(e,qt);n===!1&&(qt=C,$(e,qt))}}function S(t){var e=t.originalEvent?t.originalEvent:t,n=e.touches;return n&&n.length?(rt(),!0):(lt()&&(Gt=Jt),Qt=xt(),jt=bt(),N()||!j()?(qt=C,$(e,qt)):i.triggerOnTouchEnd||0==i.triggerOnTouchEnd&&qt===P?(t.preventDefault(),qt=k,$(e,qt)):!i.triggerOnTouchEnd&&Y()?(qt=k,D(e,qt,p)):qt===P&&(qt=C,$(e,qt)),ct(!1),null)}function O(){Gt=0,Qt=0,Kt=0,Nt=0,Ft=0,Ut=1,at(),ct(!1)}function L(t){var e=t.originalEvent?t.originalEvent:t;i.triggerOnTouchLeave&&(qt=B(k),$(e,qt))}function I(){zt.unbind(St,n),zt.unbind(Bt,O),zt.unbind(Ot,M),zt.unbind(Lt,S),It&&zt.unbind(It,L),ct(!1)}function B(t){var e=t,n=U(),s=j(),o=N();return!n||o?e=C:!s||t!=P||i.triggerOnTouchEnd&&!i.triggerOnTouchLeave?!s&&t==k&&i.triggerOnTouchLeave&&(e=C):e=k,e}function $(t,e){var i,n=t.touches;return W()||G()||z()||R()?((W()||G())&&(i=D(t,e,h)),(z()||R())&&i!==!1&&(i=D(t,e,f))):st()&&i!==!1?i=D(t,e,g):ot()&&i!==!1?i=D(t,e,m):nt()&&i!==!1&&(i=D(t,e,p)),e===C&&O(t),e===k&&(n?n.length||O(t):O(t)),i}function D(e,n,c){var d;if(c==h){if(zt.trigger("swipeStatus",[n,Dt||null,$t||0,jt||0,Gt,Wt]),i.swipeStatus&&(d=i.swipeStatus.call(zt,e,n,Dt||null,$t||0,jt||0,Gt,Wt),d===!1))return!1;if(n==k&&q()){if(zt.trigger("swipe",[Dt,$t,jt,Gt,Wt]),i.swipe&&(d=i.swipe.call(zt,e,Dt,$t,jt,Gt,Wt),d===!1))return!1;switch(Dt){case s:zt.trigger("swipeLeft",[Dt,$t,jt,Gt,Wt]),i.swipeLeft&&(d=i.swipeLeft.call(zt,e,Dt,$t,jt,Gt,Wt));break;case o:zt.trigger("swipeRight",[Dt,$t,jt,Gt,Wt]),i.swipeRight&&(d=i.swipeRight.call(zt,e,Dt,$t,jt,Gt,Wt));break;case r:zt.trigger("swipeUp",[Dt,$t,jt,Gt,Wt]),i.swipeUp&&(d=i.swipeUp.call(zt,e,Dt,$t,jt,Gt,Wt));break;case a:zt.trigger("swipeDown",[Dt,$t,jt,Gt,Wt]),i.swipeDown&&(d=i.swipeDown.call(zt,e,Dt,$t,jt,Gt,Wt))}}}if(c==f){if(zt.trigger("pinchStatus",[n,Vt||null,Ht||0,jt||0,Gt,Ut,Wt]),i.pinchStatus&&(d=i.pinchStatus.call(zt,e,n,Vt||null,Ht||0,jt||0,Gt,Ut,Wt),d===!1))return!1;if(n==k&&V())switch(Vt){case l:zt.trigger("pinchIn",[Vt||null,Ht||0,jt||0,Gt,Ut,Wt]),i.pinchIn&&(d=i.pinchIn.call(zt,e,Vt||null,Ht||0,jt||0,Gt,Ut,Wt));break;case u:zt.trigger("pinchOut",[Vt||null,Ht||0,jt||0,Gt,Ut,Wt]),i.pinchOut&&(d=i.pinchOut.call(zt,e,Vt||null,Ht||0,jt||0,Gt,Ut,Wt))}}return c==p?(n===C||n===k)&&(clearTimeout(Zt),clearTimeout(te),J()&&!tt()?(Xt=xt(),Zt=setTimeout(t.proxy(function(){Xt=null,zt.trigger("tap",[e.target]),i.tap&&(d=i.tap.call(zt,e,e.target))},this),i.doubleTapThreshold)):(Xt=null,zt.trigger("tap",[e.target]),i.tap&&(d=i.tap.call(zt,e,e.target)))):c==g?(n===C||n===k)&&(clearTimeout(Zt),Xt=null,zt.trigger("doubletap",[e.target]),i.doubleTap&&(d=i.doubleTap.call(zt,e,e.target))):c==m&&(n===C||n===k)&&(clearTimeout(Zt),Xt=null,zt.trigger("longtap",[e.target]),i.longTap&&(d=i.longTap.call(zt,e,e.target))),d}function j(){var t=!0;return null!==i.threshold&&(t=$t>=i.threshold),t}function N(){var t=!1;return null!==i.cancelThreshold&&null!==Dt&&(t=mt(Dt)-$t>=i.cancelThreshold),t}function F(){return null!==i.pinchThreshold?Ht>=i.pinchThreshold:!0}function U(){var t;return t=i.maxTimeThreshold&&jt>=i.maxTimeThreshold?!1:!0}function H(t,e){if(i.preventDefaultEvents!==!1)if(i.allowPageScroll===c)t.preventDefault();else{var n=i.allowPageScroll===d;switch(e){case s:(i.swipeLeft&&n||!n&&i.allowPageScroll!=v)&&t.preventDefault();break;case o:(i.swipeRight&&n||!n&&i.allowPageScroll!=v)&&t.preventDefault();break;case r:(i.swipeUp&&n||!n&&i.allowPageScroll!=y)&&t.preventDefault();break;case a:(i.swipeDown&&n||!n&&i.allowPageScroll!=y)&&t.preventDefault()}}}function V(){var t=K(),e=Q(),i=F();return t&&e&&i}function R(){return!!(i.pinchStatus||i.pinchIn||i.pinchOut)}function z(){return!(!V()||!R())}function q(){var t=U(),e=j(),i=K(),n=Q(),s=N(),o=!s&&n&&i&&e&&t;return o}function G(){return!!(i.swipe||i.swipeStatus||i.swipeLeft||i.swipeRight||i.swipeUp||i.swipeDown)}function W(){return!(!q()||!G())}function K(){return Gt===i.fingers||i.fingers===b||!T}function Q(){return 0!==Wt[0].end.x}function Y(){return!!i.tap}function J(){return!!i.doubleTap}function X(){return!!i.longTap}function Z(){if(null==Xt)return!1;var t=xt();return J()&&t-Xt<=i.doubleTapThreshold}function tt(){return Z()}function et(){return(1===Gt||!T)&&(isNaN($t)||$t<i.threshold)}function it(){return jt>i.longTapThreshold&&_>$t}function nt(){return!(!et()||!Y())}function st(){return!(!Z()||!J())}function ot(){return!(!it()||!X())}function rt(){Yt=xt(),Jt=event.touches.length+1}function at(){Yt=0,Jt=0}function lt(){var t=!1;if(Yt){var e=xt()-Yt;e<=i.fingerReleaseThreshold&&(t=!0)}return t}function ut(){return!(zt.data(E+"_intouch")!==!0)}function ct(t){t===!0?(zt.bind(Ot,M),zt.bind(Lt,S),It&&zt.bind(It,L)):(zt.unbind(Ot,M,!1),zt.unbind(Lt,S,!1),It&&zt.unbind(It,L,!1)),zt.data(E+"_intouch",t===!0)}function dt(t,e){var i=void 0!==e.identifier?e.identifier:0;return Wt[t].identifier=i,Wt[t].start.x=Wt[t].end.x=e.pageX||e.clientX,Wt[t].start.y=Wt[t].end.y=e.pageY||e.clientY,Wt[t]}function ht(t){var e=void 0!==t.identifier?t.identifier:0,i=ft(e);return i.end.x=t.pageX||t.clientX,i.end.y=t.pageY||t.clientY,i}function ft(t){for(var e=0;e<Wt.length;e++)if(Wt[e].identifier==t)return Wt[e]}function pt(){for(var t=[],e=0;5>=e;e++)t.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return t}function gt(t,e){e=Math.max(e,mt(t)),Rt[t].distance=e}function mt(t){return Rt[t]?Rt[t].distance:void 0}function vt(){var t={};return t[s]=yt(s),t[o]=yt(o),t[r]=yt(r),t[a]=yt(a),t}function yt(t){return{direction:t,distance:0}}function bt(){return Qt-Kt}function _t(t,e){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return Math.round(Math.sqrt(i*i+n*n))}function wt(t,e){var i=e/t*1;return i.toFixed(2)}function Pt(){return 1>Ut?u:l}function kt(t,e){return Math.round(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))}function Ct(t,e){var i=t.x-e.x,n=e.y-t.y,s=Math.atan2(n,i),o=Math.round(180*s/Math.PI);return 0>o&&(o=360-Math.abs(o)),o}function Tt(t,e){var i=Ct(t,e);return 45>=i&&i>=0?s:360>=i&&i>=315?s:i>=135&&225>=i?o:i>45&&135>i?a:r}function xt(){var t=new Date;return t.getTime()}function At(e){e=t(e);var i=e.offset(),n={left:i.left,right:i.left+e.outerWidth(),top:i.top,bottom:i.top+e.outerHeight()};return n}function Et(t,e){return t.x>e.left&&t.x<e.right&&t.y>e.top&&t.y<e.bottom}var Mt=T||A||!i.fallbackToMouseEvents,St=Mt?A?x?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Ot=Mt?A?x?"MSPointerMove":"pointermove":"touchmove":"mousemove",Lt=Mt?A?x?"MSPointerUp":"pointerup":"touchend":"mouseup",It=Mt?null:"mouseleave",Bt=A?x?"MSPointerCancel":"pointercancel":"touchcancel",$t=0,Dt=null,jt=0,Nt=0,Ft=0,Ut=1,Ht=0,Vt=0,Rt=null,zt=t(e),qt="start",Gt=0,Wt=null,Kt=0,Qt=0,Yt=0,Jt=0,Xt=0,Zt=null,te=null;try{zt.bind(St,n),zt.bind(Bt,O)}catch(ee){t.error("events not supported "+St+","+Bt+" on jQuery.swipe")}this.enable=function(){return zt.bind(St,n),zt.bind(Bt,O),zt},this.disable=function(){return I(),zt},this.destroy=function(){I(),zt.data(E,null),zt=null},this.option=function(e,n){if(void 0!==i[e]){if(void 0===n)return i[e];i[e]=n}else t.error("Option "+e+" does not exist on jQuery.swipe.options");return null}}var n="1.6.9",s="left",o="right",r="up",a="down",l="in",u="out",c="none",d="auto",h="swipe",f="pinch",p="tap",g="doubletap",m="longtap",v="horizontal",y="vertical",b="all",_=10,w="start",P="move",k="end",C="cancel",T="ontouchstart"in window,x=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,A=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,E="TouchSwipe",M={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};t.fn.swipe=function(i){var n=t(this),s=n.data(E);if(s&&"string"==typeof i){if(s[i])return s[i].apply(this,Array.prototype.slice.call(arguments,1));t.error("Method "+i+" does not exist on jQuery.swipe")}else if(!(s||"object"!=typeof i&&i))return e.apply(this,arguments);return n},t.fn.swipe.version=n,t.fn.swipe.defaults=M,t.fn.swipe.phases={PHASE_START:w,PHASE_MOVE:P,PHASE_END:k,PHASE_CANCEL:C},t.fn.swipe.directions={LEFT:s,RIGHT:o,UP:r,DOWN:a,IN:l,OUT:u},t.fn.swipe.pageScroll={NONE:c,HORIZONTAL:v,VERTICAL:y,AUTO:d},t.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:b}}),function(t,e,i){function n(i,n,s){var o=e.createElement(i);return n&&(o.id=Z+n),s&&(o.style.cssText=s),t(o)}function s(){return i.innerHeight?i.innerHeight:t(i).height()}function o(e,i){i!==Object(i)&&(i={}),this.cache={},this.el=e,this.value=function(e){var n;return void 0===this.cache[e]&&(n=t(this.el).attr("data-cbox-"+e),void 0!==n?this.cache[e]=n:void 0!==i[e]?this.cache[e]=i[e]:void 0!==J[e]&&(this.cache[e]=J[e])),this.cache[e]},this.get=function(e){var i=this.value(e);return t.isFunction(i)?i.call(this.el,this):i}}function r(t){var e=x.length,i=(R+t)%e;return 0>i?e+i:i}function a(t,e){return Math.round((/%/.test(t)?("x"===e?A.width():s())/100:1)*parseInt(t,10))}function l(t,e){
return t.get("photo")||t.get("photoRegex").test(e)}function u(t,e){return t.get("retinaUrl")&&i.devicePixelRatio>1?e.replace(t.get("photoRegex"),t.get("retinaSuffix")):e}function c(t){"contains"in b[0]&&!b[0].contains(t.target)&&t.target!==y[0]&&(t.stopPropagation(),b.focus())}function d(t){d.str!==t&&(b.add(y).removeClass(d.str).addClass(t),d.str=t)}function h(e){R=0,e&&e!==!1&&"nofollow"!==e?(x=t("."+tt).filter(function(){var i=t.data(this,X),n=new o(this,i);return n.get("rel")===e}),R=x.index(N.el),-1===R&&(x=x.add(N.el),R=x.length-1)):x=t(N.el)}function f(i){t(e).trigger(i),at.triggerHandler(i)}function p(i){var s;if(!W){if(s=t(i).data(X),N=new o(i,s),h(N.get("rel")),!q){q=G=!0,d(N.get("className")),b.css({visibility:"hidden",display:"block",opacity:""}),E=n(lt,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),w.css({width:"",height:""}).append(E),F=P.height()+T.height()+w.outerHeight(!0)-w.height(),U=k.width()+C.width()+w.outerWidth(!0)-w.width(),H=E.outerHeight(!0),V=E.outerWidth(!0);var r=a(N.get("initialWidth"),"x"),l=a(N.get("initialHeight"),"y"),u=N.get("maxWidth"),p=N.get("maxHeight");N.w=Math.max((u!==!1?Math.min(r,a(u,"x")):r)-V-U,0),N.h=Math.max((p!==!1?Math.min(l,a(p,"y")):l)-H-F,0),E.css({width:"",height:N.h}),Q.position(),f(et),N.get("onOpen"),j.add(O).hide(),b.focus(),N.get("trapFocus")&&e.addEventListener&&(e.addEventListener("focus",c,!0),at.one(ot,function(){e.removeEventListener("focus",c,!0)})),N.get("returnFocus")&&at.one(ot,function(){t(N.el).focus()})}var g=parseFloat(N.get("opacity"));y.css({opacity:g===g?g:"",cursor:N.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),N.get("closeButton")?D.html(N.get("close")).appendTo(w):D.appendTo("<div/>"),v()}}function g(){b||(Y=!1,A=t(i),b=n(lt).attr({id:X,"class":t.support.opacity===!1?Z+"IE":"",role:"dialog",tabindex:"-1"}).hide(),y=n(lt,"Overlay").hide(),S=t([n(lt,"LoadingOverlay")[0],n(lt,"LoadingGraphic")[0]]),_=n(lt,"Wrapper"),w=n(lt,"Content").append(O=n(lt,"Title"),L=n(lt,"Current"),$=t('<button type="button"/>').attr({id:Z+"Previous"}),B=t('<button type="button"/>').attr({id:Z+"Next"}),I=n("button","Slideshow"),S),D=t('<button type="button"/>').attr({id:Z+"Close"}),_.append(n(lt).append(n(lt,"TopLeft"),P=n(lt,"TopCenter"),n(lt,"TopRight")),n(lt,!1,"clear:left").append(k=n(lt,"MiddleLeft"),w,C=n(lt,"MiddleRight")),n(lt,!1,"clear:left").append(n(lt,"BottomLeft"),T=n(lt,"BottomCenter"),n(lt,"BottomRight"))).find("div div").css({"float":"left"}),M=n(lt,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),j=B.add($).add(L).add(I)),e.body&&!b.parent().length&&t(e.body).append(y,b.append(_,M))}function m(){function i(t){t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey||(t.preventDefault(),p(this))}return b?(Y||(Y=!0,B.click(function(){Q.next()}),$.click(function(){Q.prev()}),D.click(function(){Q.close()}),y.click(function(){N.get("overlayClose")&&Q.close()}),t(e).bind("keydown."+Z,function(t){var e=t.keyCode;q&&N.get("escKey")&&27===e&&(t.preventDefault(),Q.close()),q&&N.get("arrowKey")&&x[1]&&!t.altKey&&(37===e?(t.preventDefault(),$.click()):39===e&&(t.preventDefault(),B.click()))}),t.isFunction(t.fn.on)?t(e).on("click."+Z,"."+tt,i):t("."+tt).live("click."+Z,i)),!0):!1}function v(){var e,s,o,r=Q.prep,c=++ut;if(G=!0,z=!1,f(rt),f(it),N.get("onLoad"),N.h=N.get("height")?a(N.get("height"),"y")-H-F:N.get("innerHeight")&&a(N.get("innerHeight"),"y"),N.w=N.get("width")?a(N.get("width"),"x")-V-U:N.get("innerWidth")&&a(N.get("innerWidth"),"x"),N.mw=N.w,N.mh=N.h,N.get("maxWidth")&&(N.mw=a(N.get("maxWidth"),"x")-V-U,N.mw=N.w&&N.w<N.mw?N.w:N.mw),N.get("maxHeight")&&(N.mh=a(N.get("maxHeight"),"y")-H-F,N.mh=N.h&&N.h<N.mh?N.h:N.mh),e=N.get("href"),K=setTimeout(function(){S.show()},100),N.get("inline")){var d=t(e);o=t("<div>").hide().insertBefore(d),at.one(rt,function(){o.replaceWith(d)}),r(d)}else N.get("iframe")?r(" "):N.get("html")?r(N.get("html")):l(N,e)?(e=u(N,e),z=N.get("createImg"),t(z).addClass(Z+"Photo").bind("error."+Z,function(){r(n(lt,"Error").html(N.get("imgError")))}).one("load",function(){c===ut&&setTimeout(function(){var e;N.get("retinaImage")&&i.devicePixelRatio>1&&(z.height=z.height/i.devicePixelRatio,z.width=z.width/i.devicePixelRatio),N.get("scalePhotos")&&(s=function(){z.height-=z.height*e,z.width-=z.width*e},N.mw&&z.width>N.mw&&(e=(z.width-N.mw)/z.width,s()),N.mh&&z.height>N.mh&&(e=(z.height-N.mh)/z.height,s())),N.h&&(z.style.marginTop=Math.max(N.mh-z.height,0)/2+"px"),x[1]&&(N.get("loop")||x[R+1])&&(z.style.cursor="pointer",t(z).bind("click."+Z,function(){Q.next()})),z.style.width=z.width+"px",z.style.height=z.height+"px",r(z)},1)}),z.src=e):e&&M.load(e,N.get("data"),function(e,i){c===ut&&r("error"===i?n(lt,"Error").html(N.get("xhrError")):t(this).contents())})}var y,b,_,w,P,k,C,T,x,A,E,M,S,O,L,I,B,$,D,j,N,F,U,H,V,R,z,q,G,W,K,Q,Y,J={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return t(this).attr("href")},title:function(){return this.title},createImg:function(){var e=new Image,i=t(this).data("cbox-img-attrs");return"object"==typeof i&&t.each(i,function(t,i){e[t]=i}),e},createIframe:function(){var i=e.createElement("iframe"),n=t(this).data("cbox-iframe-attrs");return"object"==typeof n&&t.each(n,function(t,e){i[t]=e}),"frameBorder"in i&&(i.frameBorder=0),"allowTransparency"in i&&(i.allowTransparency="true"),i.name=(new Date).getTime(),i.allowFullscreen=!0,i}},X="colorbox",Z="cbox",tt=Z+"Element",et=Z+"_open",it=Z+"_load",nt=Z+"_complete",st=Z+"_cleanup",ot=Z+"_closed",rt=Z+"_purge",at=t("<a/>"),lt="div",ut=0,ct={},dt=function(){function t(){clearTimeout(r)}function e(){(N.get("loop")||x[R+1])&&(t(),r=setTimeout(Q.next,N.get("slideshowSpeed")))}function i(){I.html(N.get("slideshowStop")).unbind(l).one(l,n),at.bind(nt,e).bind(it,t),b.removeClass(a+"off").addClass(a+"on")}function n(){t(),at.unbind(nt,e).unbind(it,t),I.html(N.get("slideshowStart")).unbind(l).one(l,function(){Q.next(),i()}),b.removeClass(a+"on").addClass(a+"off")}function s(){o=!1,I.hide(),t(),at.unbind(nt,e).unbind(it,t),b.removeClass(a+"off "+a+"on")}var o,r,a=Z+"Slideshow_",l="click."+Z;return function(){o?N.get("slideshow")||(at.unbind(st,s),s()):N.get("slideshow")&&x[1]&&(o=!0,at.one(st,s),N.get("slideshowAuto")?i():n(),I.show())}}();t[X]||(t(g),Q=t.fn[X]=t[X]=function(e,i){var n,s=this;return e=e||{},t.isFunction(s)&&(s=t("<a/>"),e.open=!0),s[0]?(g(),m()&&(i&&(e.onComplete=i),s.each(function(){var i=t.data(this,X)||{};t.data(this,X,t.extend(i,e))}).addClass(tt),n=new o(s[0],e),n.get("open")&&p(s[0])),s):s},Q.position=function(e,i){function n(){P[0].style.width=T[0].style.width=w[0].style.width=parseInt(b[0].style.width,10)-U+"px",w[0].style.height=k[0].style.height=C[0].style.height=parseInt(b[0].style.height,10)-F+"px"}var o,r,l,u=0,c=0,d=b.offset();if(A.unbind("resize."+Z),b.css({top:-9e4,left:-9e4}),r=A.scrollTop(),l=A.scrollLeft(),N.get("fixed")?(d.top-=r,d.left-=l,b.css({position:"fixed"})):(u=r,c=l,b.css({position:"absolute"})),c+=N.get("right")!==!1?Math.max(A.width()-N.w-V-U-a(N.get("right"),"x"),0):N.get("left")!==!1?a(N.get("left"),"x"):Math.round(Math.max(A.width()-N.w-V-U,0)/2),u+=N.get("bottom")!==!1?Math.max(s()-N.h-H-F-a(N.get("bottom"),"y"),0):N.get("top")!==!1?a(N.get("top"),"y"):Math.round(Math.max(s()-N.h-H-F,0)/2),b.css({top:d.top,left:d.left,visibility:"visible"}),_[0].style.width=_[0].style.height="9999px",o={width:N.w+V+U,height:N.h+H+F,top:u,left:c},e){var h=0;t.each(o,function(t){return o[t]!==ct[t]?void(h=e):void 0}),e=h}ct=o,e||b.css(o),b.dequeue().animate(o,{duration:e||0,complete:function(){n(),G=!1,_[0].style.width=N.w+V+U+"px",_[0].style.height=N.h+H+F+"px",N.get("reposition")&&setTimeout(function(){A.bind("resize."+Z,Q.position)},1),t.isFunction(i)&&i()},step:n})},Q.resize=function(t){var e;q&&(t=t||{},t.width&&(N.w=a(t.width,"x")-V-U),t.innerWidth&&(N.w=a(t.innerWidth,"x")),E.css({width:N.w}),t.height&&(N.h=a(t.height,"y")-H-F),t.innerHeight&&(N.h=a(t.innerHeight,"y")),t.innerHeight||t.height||(e=E.scrollTop(),E.css({height:"auto"}),N.h=E.height()),E.css({height:N.h}),e&&E.scrollTop(e),Q.position("none"===N.get("transition")?0:N.get("speed")))},Q.prep=function(i){function s(){return N.w=N.w||E.width(),N.w=N.mw&&N.mw<N.w?N.mw:N.w,N.w}function a(){return N.h=N.h||E.height(),N.h=N.mh&&N.mh<N.h?N.mh:N.h,N.h}if(q){var c,h="none"===N.get("transition")?0:N.get("speed");E.remove(),E=n(lt,"LoadedContent").append(i),E.hide().appendTo(M.show()).css({width:s(),overflow:N.get("scrolling")?"auto":"hidden"}).css({height:a()}).prependTo(w),M.hide(),t(z).css({"float":"none"}),d(N.get("className")),c=function(){function i(){t.support.opacity===!1&&b[0].style.removeAttribute("filter")}var n,s,a=x.length;q&&(s=function(){clearTimeout(K),S.hide(),f(nt),N.get("onComplete")},O.html(N.get("title")).show(),E.show(),a>1?("string"==typeof N.get("current")&&L.html(N.get("current").replace("{current}",R+1).replace("{total}",a)).show(),B[N.get("loop")||a-1>R?"show":"hide"]().html(N.get("next")),$[N.get("loop")||R?"show":"hide"]().html(N.get("previous")),dt(),N.get("preloading")&&t.each([r(-1),r(1)],function(){var i,n=x[this],s=new o(n,t.data(n,X)),r=s.get("href");r&&l(s,r)&&(r=u(s,r),i=e.createElement("img"),i.src=r)})):j.hide(),N.get("iframe")?(n=N.get("createIframe"),N.get("scrolling")||(n.scrolling="no"),t(n).attr({src:N.get("href"),"class":Z+"Iframe"}).one("load",s).appendTo(E),at.one(rt,function(){n.src="//about:blank"}),N.get("fastIframe")&&t(n).trigger("load")):s(),"fade"===N.get("transition")?b.fadeTo(h,1,i):i())},"fade"===N.get("transition")?b.fadeTo(h,0,function(){Q.position(0,c)}):Q.position(h,c)}},Q.next=function(){!G&&x[1]&&(N.get("loop")||x[R+1])&&(R=r(1),p(x[R]))},Q.prev=function(){!G&&x[1]&&(N.get("loop")||R)&&(R=r(-1),p(x[R]))},Q.close=function(){q&&!W&&(W=!0,q=!1,f(st),N.get("onCleanup"),A.unbind("."+Z),y.fadeTo(N.get("fadeOut")||0,0),b.stop().fadeTo(N.get("fadeOut")||0,0,function(){b.hide(),y.hide(),f(rt),E.remove(),setTimeout(function(){W=!1,f(ot),N.get("onClosed")},1)}))},Q.remove=function(){b&&(b.stop(),t[X].close(),b.stop(!1,!0).remove(),y.remove(),W=!1,b=null,t("."+tt).removeData(X).removeClass(tt),t(e).unbind("click."+Z).unbind("keydown."+Z))},Q.element=function(){return t(N.el)},Q.settings=J)}(jQuery,document,window),function(t,e){var i,n=e.fn,s="[object Opera]"==Object.prototype.toString.call(window.opera),o=function(t){var e,i,n,s=t.createElement("details");return"open"in s?(i=t.body||function(){var i=t.documentElement;return e=!0,i.insertBefore(t.createElement("body"),i.firstElementChild||i.firstChild)}(),s.innerHTML="<summary>a</summary>b",s.style.display="block",i.appendChild(s),n=s.offsetHeight,s.open=!0,n=n!=s.offsetHeight,i.removeChild(s),e&&i.parentNode.removeChild(i),n):!1}(t),r=function(t,e,i,n){var s=t.prop("open"),o=s&&n||!s&&!n;o?(t.removeClass("open").prop("open",!1).triggerHandler("close.details"),e.attr("aria-expanded",!1),i.hide()):(t.addClass("open").prop("open",!0).triggerHandler("open.details"),e.attr("aria-expanded",!0),i.show())};n.noSelect=function(){var t="none";return this.bind("selectstart dragstart mousedown",function(){return!1}).css({MozUserSelect:t,msUserSelect:t,webkitUserSelect:t,userSelect:t})},o?(i=n.details=function(){return this.each(function(){var t=e(this),i=e("summary",t).first();i.attr({role:"button","aria-expanded":t.prop("open")}).on("click",function(){var e=t.prop("open");i.attr("aria-expanded",!e),t.triggerHandler((e?"close":"open")+".details")})})},i.support=o):(i=n.details=function(){return this.each(function(){var t=e(this),i=e("summary",t).first(),n=t.children(":not(summary)"),o=t.contents(":not(summary)");i.length||(i=e("<summary>").text("Details").prependTo(t)),n.length!=o.length&&(o.filter(function(){return 3==this.nodeType&&/[^ \t\n\f\r]/.test(this.data)}).wrap("<span>"),n=t.children(":not(summary)")),t.prop("open","string"==typeof t.attr("open")),r(t,i,n),i.attr("role","button").noSelect().prop("tabIndex",0).on("click",function(){i.focus(),r(t,i,n,!0)}).keyup(function(t){(32==t.keyCode||13==t.keyCode&&!s)&&(t.preventDefault(),i.click())})})},i.support=o)}(document,jQuery),function(t){var e;if("object"==typeof exports){try{e=require("jquery")}catch(i){}module.exports=t(window,document,e)}else window.Dropkick=t(window,document,window.jQuery)}(function(t,e,i,n){var s,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),r=t.parent!==t.self&&location.host===parent.location.host,a=-1!==navigator.appVersion.indexOf("MSIE"),l=function(i,n){var s,o;if(this===t)return new l(i,n);for("string"==typeof i&&"#"===i[0]&&(i=e.getElementById(i.substr(1))),s=0;s<l.uid;s++)if(o=l.cache[s],o instanceof l&&o.data.select===i)return d.extend(o.data.settings,n),o;return i?"SELECT"===i.nodeName?this.init(i,n):void 0:(console.error("You must pass a select to DropKick"),!1)},u=function(){},c={initialize:u,change:u,open:u,close:u,search:"strict",bubble:!0},d={hasClass:function(t,e){var i=new RegExp("(^|\\s+)"+e+"(\\s+|$)");return t&&i.test(t.className)},addClass:function(t,e){t&&!d.hasClass(t,e)&&(t.className+=" "+e)},removeClass:function(t,e){var i=new RegExp("(^|\\s+)"+e+"(\\s+|$)");t&&(t.className=t.className.replace(i," "))},toggleClass:function(t,e){var i=d.hasClass(t,e)?"remove":"add";d[i+"Class"](t,e)},extend:function(t){return Array.prototype.slice.call(arguments,1).forEach(function(e){if(e)for(var i in e)t[i]=e[i]}),t},offset:function(i){var n=i.getBoundingClientRect()||{top:0,left:0},s=e.documentElement,o=a?s.scrollTop:t.pageYOffset,r=a?s.scrollLeft:t.pageXOffset;return{top:n.top+o-s.clientTop,left:n.left+r-s.clientLeft}},position:function(t,e){for(var i={top:0,left:0};t&&t!==e;)i.top+=t.offsetTop,i.left+=t.offsetLeft,t=t.parentNode;return i},closest:function(t,e){for(;t;){if(t===e)return t;t=t.parentNode}return!1},create:function(t,i){var n,s=e.createElement(t);i||(i={});for(n in i)i.hasOwnProperty(n)&&("innerHTML"===n?s.innerHTML=i[n]:s.setAttribute(n,i[n]));return s},deferred:function(e){return function(){var i=arguments,n=this;t.setTimeout(function(){e.apply(n,i)},1)}}};return l.cache={},l.uid=0,l.prototype={add:function(t,i){var n,s,o;"string"==typeof t&&(n=t,t=e.createElement("option"),t.text=n),"OPTION"===t.nodeName&&(s=d.create("li",{"class":"dk-option","data-value":t.value,innerHTML:t.text,role:"option","aria-selected":"false",id:"dk"+this.data.cacheID+"-"+(t.id||t.value.replace(" ","-"))}),d.addClass(s,t.className),this.length+=1,t.disabled&&(d.addClass(s,"dk-option-disabled"),s.setAttribute("aria-disabled","true")),this.data.select.add(t,i),"number"==typeof i&&(i=this.item(i)),this.options.indexOf(i)>-1?i.parentNode.insertBefore(s,i):this.data.elem.lastChild.appendChild(s),s.addEventListener("mouseover",this),o=this.options.indexOf(i),this.options.splice(o,0,s),t.selected&&this.select(o))},item:function(t){return t=0>t?this.options.length+t:t,this.options[t]||null},remove:function(t){var e=this.item(t);e.parentNode.removeChild(e),this.options.splice(t,1),this.data.select.remove(t),this.select(this.data.select.selectedIndex),this.length-=1},init:function(t,i){var n,a=l.build(t,"dk"+l.uid);if(this.data={},this.data.select=t,this.data.elem=a.elem,this.data.settings=d.extend({},c,i),this.disabled=t.disabled,this.form=t.form,this.length=t.length,this.multiple=t.multiple,this.options=a.options.slice(0),this.selectedIndex=t.selectedIndex,this.selectedOptions=a.selected.slice(0),this.value=t.value,this.data.cacheID=l.uid,l.cache[this.data.cacheID]=this,this.data.settings.initialize.call(this),l.uid+=1,this._changeListener||(t.addEventListener("change",this),this._changeListener=!0),!o||this.data.settings.mobile){if(t.parentNode.insertBefore(this.data.elem,t),t.setAttribute("data-dkCacheId",this.data.cacheID),this.data.elem.addEventListener("click",this),this.data.elem.addEventListener("keydown",this),this.data.elem.addEventListener("keypress",this),this.form&&this.form.addEventListener("reset",this),!this.multiple)for(n=0;n<this.options.length;n++)this.options[n].addEventListener("mouseover",this);s||(e.addEventListener("click",l.onDocClick),r&&parent.document.addEventListener("click",l.onDocClick),s=!0)}return this},close:function(){var t,e=this.data.elem;if(!this.isOpen||this.multiple)return!1;for(t=0;t<this.options.length;t++)d.removeClass(this.options[t],"dk-option-highlight");e.lastChild.setAttribute("aria-expanded","false"),d.removeClass(e.lastChild,"dk-select-options-highlight"),d.removeClass(e,"dk-select-open-(up|down)"),this.isOpen=!1,this.data.settings.close.call(this)},open:d.deferred(function(){var i,n,s,o,r,l,u=this.data.elem,c=u.lastChild;return r=a?d.offset(u).top-e.documentElement.scrollTop:d.offset(u).top-t.scrollY,l=t.innerHeight-(r+u.offsetHeight),this.isOpen||this.multiple?!1:(c.style.display="block",i=c.offsetHeight,c.style.display="",n=r>i,s=l>i,o=n&&!s?"-up":"-down",this.isOpen=!0,d.addClass(u,"dk-select-open"+o),c.setAttribute("aria-expanded","true"),this._scrollTo(this.options.length-1),this._scrollTo(this.selectedIndex),void this.data.settings.open.call(this))}),disable:function(t,e){var i="dk-option-disabled";(0===arguments.length||"boolean"==typeof t)&&(e=t===n?!0:!1,t=this.data.elem,i="dk-select-disabled",this.disabled=e),e===n&&(e=!0),"number"==typeof t&&(t=this.item(t)),d[e?"addClass":"removeClass"](t,i)},select:function(t,e){var i,n,s,o,r=this.data.select;if("number"==typeof t&&(t=this.item(t)),"string"==typeof t)for(i=0;i<this.length;i++)this.options[i].getAttribute("data-value")===t&&(t=this.options[i]);return!t||"string"==typeof t||!e&&d.hasClass(t,"dk-option-disabled")?!1:d.hasClass(t,"dk-option")?(n=this.options.indexOf(t),s=r.options[n],this.multiple?(d.toggleClass(t,"dk-option-selected"),s.selected=!s.selected,d.hasClass(t,"dk-option-selected")?(t.setAttribute("aria-selected","true"),this.selectedOptions.push(t)):(t.setAttribute("aria-selected","false"),n=this.selectedOptions.indexOf(t),this.selectedOptions.splice(n,1))):(o=this.data.elem.firstChild,this.selectedOptions.length&&(d.removeClass(this.selectedOptions[0],"dk-option-selected"),this.selectedOptions[0].setAttribute("aria-selected","false")),d.addClass(t,"dk-option-selected"),t.setAttribute("aria-selected","true"),o.setAttribute("aria-activedescendant",t.id),o.className="dk-selected "+s.className,o.innerHTML=s.text,this.selectedOptions[0]=t,s.selected=!0),this.selectedIndex=r.selectedIndex,this.value=r.value,e||this.data.select.dispatchEvent(new CustomEvent("change",{bubbles:this.data.settings.bubble})),t):void 0},selectOne:function(t,e){return this.reset(!0),this._scrollTo(t),this.select(t,e)},search:function(t,e){var i,n,s,o,r,a,l,u,c=this.data.select.options,d=[];if(!t)return this.options;for(e=e?e.toLowerCase():"strict",e="fuzzy"===e?2:"partial"===e?1:0,u=new RegExp((e?"":"^")+t,"i"),i=0;i<c.length;i++)if(s=c[i].text.toLowerCase(),2==e){for(n=t.toLowerCase().split(""),o=r=a=l=0;r<s.length;)s[r]===n[o]?(a+=1+a,o++):a=0,l+=a,r++;o===n.length&&d.push({e:this.options[i],s:l,i:i})}else u.test(s)&&d.push(this.options[i]);return 2===e&&(d=d.sort(function(t,e){return e.s-t.s||t.i-e.i}).reduce(function(t,e){return t[t.length]=e.e,t},[])),d},focus:function(){this.disabled||(this.multiple?this.data.elem:this.data.elem.children[0]).focus()},reset:function(t){var e,i=this.data.select;for(this.selectedOptions.length=0,e=0;e<i.options.length;e++)i.options[e].selected=!1,d.removeClass(this.options[e],"dk-option-selected"),this.options[e].setAttribute("aria-selected","false"),!t&&i.options[e].defaultSelected&&this.select(e,!0);this.selectedOptions.length||this.multiple||this.select(0,!0)},refresh:function(){this.dispose().init(this.data.select,this.data.settings)},dispose:function(){return delete l.cache[this.data.cacheID],this.data.elem.parentNode.removeChild(this.data.elem),this.data.select.removeAttribute("data-dkCacheId"),this},handleEvent:function(t){if(!this.disabled)switch(t.type){case"click":this._delegate(t);break;case"keydown":this._keyHandler(t);break;case"keypress":this._searchOptions(t);break;case"mouseover":this._highlight(t);break;case"reset":this.reset();break;case"change":this.data.settings.change.call(this)}},_delegate:function(e){var i,n,s,o,r=e.target;if(d.hasClass(r,"dk-option-disabled"))return!1;if(this.multiple){if(d.hasClass(r,"dk-option"))if(i=t.getSelection(),"Range"===i.type&&i.collapseToStart(),e.shiftKey)if(s=this.options.indexOf(this.selectedOptions[0]),o=this.options.indexOf(this.selectedOptions[this.selectedOptions.length-1]),n=this.options.indexOf(r),n>s&&o>n&&(n=s),n>o&&o>s&&(o=s),this.reset(!0),o>n)for(;o+1>n;)this.select(n++);else for(;n>o-1;)this.select(n--);else e.ctrlKey||e.metaKey?this.select(r):(this.reset(!0),this.select(r))}else this[this.isOpen?"close":"open"](),d.hasClass(r,"dk-option")&&this.select(r)},_highlight:function(t){var e,i=t.target;if(!this.multiple){for(e=0;e<this.options.length;e++)d.removeClass(this.options[e],"dk-option-highlight");d.addClass(this.data.elem.lastChild,"dk-select-options-highlight"),d.addClass(i,"dk-option-highlight")}},_keyHandler:function(t){var e,i,n=this.selectedOptions,s=this.options,o=1,r={tab:9,enter:13,esc:27,space:32,up:38,down:40};switch(t.keyCode){case r.up:o=-1;case r.down:if(t.preventDefault(),e=n[n.length-1],d.hasClass(this.data.elem.lastChild,"dk-select-options-highlight"))for(d.removeClass(this.data.elem.lastChild,"dk-select-options-highlight"),i=0;i<s.length;i++)d.hasClass(s[i],"dk-option-highlight")&&(d.removeClass(s[i],"dk-option-highlight"),e=s[i]);o=s.indexOf(e)+o,o>s.length-1?o=s.length-1:0>o&&(o=0),this.data.select.options[o].disabled||(this.reset(!0),this.select(o),this._scrollTo(o));break;case r.space:if(!this.isOpen){t.preventDefault(),this.open();break}case r.tab:case r.enter:for(o=0;o<s.length;o++)d.hasClass(s[o],"dk-option-highlight")&&this.select(o);case r.esc:this.isOpen&&(t.preventDefault(),this.close())}},_searchOptions:function(t){var e,i=this,s=String.fromCharCode(t.keyCode||t.which),o=function(){i.data.searchTimeout&&clearTimeout(i.data.searchTimeout),i.data.searchTimeout=setTimeout(function(){i.data.searchString=""},1e3)};this.data.searchString===n&&(this.data.searchString=""),o(),this.data.searchString+=s,e=this.search(this.data.searchString,this.data.settings.search),e.length&&(d.hasClass(e[0],"dk-option-disabled")||this.selectOne(e[0]))},_scrollTo:function(t){var e,i,n,s=this.data.elem.lastChild;return-1===t||"number"!=typeof t&&!t||!this.isOpen&&!this.multiple?!1:("number"==typeof t&&(t=this.item(t)),e=d.position(t,s).top,i=e-s.scrollTop,n=i+t.offsetHeight,void(n>s.offsetHeight?(e+=t.offsetHeight,s.scrollTop=e-s.offsetHeight):0>i&&(s.scrollTop=e)))}},l.build=function(t,e){var i,n,s,o=[],r={elem:null,options:[],selected:[]},a=function(t){var i,n,s,o,l=[];switch(t.nodeName){case"OPTION":i=d.create("li",{"class":"dk-option ","data-value":t.value,innerHTML:t.text,role:"option","aria-selected":"false",id:e+"-"+(t.id||t.value.replace(" ","-"))}),d.addClass(i,t.className),t.disabled&&(d.addClass(i,"dk-option-disabled"),i.setAttribute("aria-disabled","true")),t.selected&&(d.addClass(i,"dk-option-selected"),i.setAttribute("aria-selected","true"),r.selected.push(i)),r.options.push(this.appendChild(i));break;case"OPTGROUP":for(n=d.create("li",{"class":"dk-optgroup"}),t.label&&n.appendChild(d.create("div",{"class":"dk-optgroup-label",innerHTML:t.label})),s=d.create("ul",{"class":"dk-optgroup-options"}),o=t.children.length;o--;l.unshift(t.children[o]));l.forEach(a,s),this.appendChild(n).appendChild(s)}};for(r.elem=d.create("div",{"class":"dk-select"+(t.multiple?"-multi":"")}),n=d.create("ul",{"class":"dk-select-options",id:e+"-listbox",role:"listbox"}),t.disabled&&d.addClass(r.elem,"dk-select-disabled"),r.elem.id=e+(t.id?"-"+t.id:""),d.addClass(r.elem,t.className),t.multiple?(r.elem.setAttribute("tabindex",t.getAttribute("tabindex")||"0"),n.setAttribute("aria-multiselectable","true")):(i=t.options[t.selectedIndex],r.elem.appendChild(d.create("div",{"class":"dk-selected "+i.className,tabindex:t.tabindex||0,innerHTML:i?i.text:"&nbsp;",id:e+"-combobox","aria-live":"assertive","aria-owns":n.id,role:"combobox"})),n.setAttribute("aria-expanded","false")),s=t.children.length;s--;o.unshift(t.children[s]));return o.forEach(a,r.elem.appendChild(n)),r},l.onDocClick=function(t){var e,i;if(1!==t.target.nodeType)return!1;null!==(e=t.target.getAttribute("data-dkcacheid"))&&l.cache[e].focus();for(i in l.cache)d.closest(t.target,l.cache[i].data.elem)||i===e||l.cache[i].disabled||l.cache[i].close()},i!==n&&(i.fn.dropkick=function(){var t=Array.prototype.slice.call(arguments);return i(this).each(function(){t[0]&&"object"!=typeof t[0]?"string"==typeof t[0]&&l.prototype[t[0]].apply(new l(this),t.slice(1)):new l(this,t[0]||{})})}),l}),function(){var t,e,i,n,s,o,r,a,l,u,c,d,h,f,p,g,m,v,y,b,_,w,P,k,C,T,x,A,E,M,S,O,L,I,B,$,D,j,N,F,U,H,V,R,z,q,G,W,K,Q=[].slice,Y={}.hasOwnProperty,J=function(t,e){function i(){this.constructor=t}for(var n in e)Y.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},X=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};for(_={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},E=function(){var t;return null!=(t="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?t:+new Date},S=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,b=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==S&&(S=function(t){return setTimeout(t,50)},b=function(t){return clearTimeout(t)}),L=function(t){var e,i;return e=E(),(i=function(){var n;return n=E()-e,n>=33?(e=E(),t(n,function(){return S(i)})):setTimeout(i,33-n)})()},O=function(){var t,e,i;return i=arguments[0],e=arguments[1],t=3<=arguments.length?Q.call(arguments,2):[],"function"==typeof i[e]?i[e].apply(i,t):i[e]},w=function(){var t,e,i,n,s,o,r;for(e=arguments[0],n=2<=arguments.length?Q.call(arguments,1):[],o=0,r=n.length;r>o;o++)if(i=n[o])for(t in i)Y.call(i,t)&&(s=i[t],null!=e[t]&&"object"==typeof e[t]&&null!=s&&"object"==typeof s?w(e[t],s):e[t]=s);return e},m=function(t){var e,i,n,s,o;for(i=e=0,s=0,o=t.length;o>s;s++)n=t[s],i+=Math.abs(n),e++;return i/e},k=function(t,e){var i,n,s;if(null==t&&(t="options"),null==e&&(e=!0),s=document.querySelector("[data-pace-"+t+"]")){if(i=s.getAttribute("data-pace-"+t),!e)return i;try{return JSON.parse(i)}catch(o){return n=o,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",n):void 0}}},r=function(){function t(){}return t.prototype.on=function(t,e,i,n){var s;return null==n&&(n=!1),null==this.bindings&&(this.bindings={}),null==(s=this.bindings)[t]&&(s[t]=[]),this.bindings[t].push({handler:e,ctx:i,once:n})},t.prototype.once=function(t,e,i){return this.on(t,e,i,!0)},t.prototype.off=function(t,e){var i,n,s;if(null!=(null!=(n=this.bindings)?n[t]:void 0)){if(null==e)return delete this.bindings[t];for(i=0,s=[];i<this.bindings[t].length;)s.push(this.bindings[t][i].handler===e?this.bindings[t].splice(i,1):i++);return s}},t.prototype.trigger=function(){var t,e,i,n,s,o,r,a,l;if(i=arguments[0],t=2<=arguments.length?Q.call(arguments,1):[],null!=(r=this.bindings)?r[i]:void 0){for(s=0,l=[];s<this.bindings[i].length;)a=this.bindings[i][s],n=a.handler,e=a.ctx,o=a.once,n.apply(null!=e?e:this,t),l.push(o?this.bindings[i].splice(s,1):s++);return l}},t}(),u=window.Pace||{},window.Pace=u,w(u,r.prototype),M=u.options=w({},_,window.paceOptions,k()),G=["ajax","document","eventLag","elements"],V=0,z=G.length;z>V;V++)D=G[V],M[D]===!0&&(M[D]=_[D]);l=function(t){function e(){return W=e.__super__.constructor.apply(this,arguments)}return J(e,t),e}(Error),e=function(){function t(){this.progress=0}return t.prototype.getElement=function(){var t;if(null==this.el){if(t=document.querySelector(M.target),!t)throw new l;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=t.firstChild?t.insertBefore(this.el,t.firstChild):t.appendChild(this.el)}return this.el},t.prototype.finish=function(){var t;return t=this.getElement(),t.className=t.className.replace("pace-active",""),t.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},t.prototype.update=function(t){return this.progress=t,this.render()},t.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(t){l=t}return this.el=void 0},t.prototype.render=function(){var t,e,i,n,s,o,r;if(null==document.querySelector(M.target))return!1;for(t=this.getElement(),n="translate3d("+this.progress+"%, 0, 0)",r=["webkitTransform","msTransform","transform"],s=0,o=r.length;o>s;s++)e=r[s],t.children[0].style[e]=n;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(t.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?i="99":(i=this.progress<10?"0":"",i+=0|this.progress),t.children[0].setAttribute("data-progress",""+i)),this.lastRenderedProgress=this.progress},t.prototype.done=function(){return this.progress>=100},t}(),a=function(){function t(){this.bindings={}}return t.prototype.trigger=function(t,e){var i,n,s,o,r;if(null!=this.bindings[t]){for(o=this.bindings[t],r=[],n=0,s=o.length;s>n;n++)i=o[n],r.push(i.call(this,e));return r}},t.prototype.on=function(t,e){var i;return null==(i=this.bindings)[t]&&(i[t]=[]),this.bindings[t].push(e)},t}(),H=window.XMLHttpRequest,U=window.XDomainRequest,F=window.WebSocket,P=function(t,e){var i,n,s;s=[];for(n in e.prototype)try{s.push(null==t[n]&&"function"!=typeof e[n]?"function"==typeof Object.defineProperty?Object.defineProperty(t,n,{get:function(){return e.prototype[n]},configurable:!0,enumerable:!0}):t[n]=e.prototype[n]:void 0)}catch(o){i=o}return s},x=[],u.ignore=function(){var t,e,i;return e=arguments[0],t=2<=arguments.length?Q.call(arguments,1):[],x.unshift("ignore"),i=e.apply(null,t),x.shift(),i},u.track=function(){var t,e,i;return e=arguments[0],t=2<=arguments.length?Q.call(arguments,1):[],x.unshift("track"),i=e.apply(null,t),x.shift(),i},$=function(t){var e;if(null==t&&(t="GET"),"track"===x[0])return"force";if(!x.length&&M.ajax){if("socket"===t&&M.ajax.trackWebSockets)return!0;if(e=t.toUpperCase(),X.call(M.ajax.trackMethods,e)>=0)return!0}return!1},c=function(t){function e(){var t,i=this;e.__super__.constructor.apply(this,arguments),t=function(t){var e;return e=t.open,t.open=function(n,s,o){return $(n)&&i.trigger("request",{type:n,url:s,request:t}),e.apply(t,arguments);

}},window.XMLHttpRequest=function(e){var i;return i=new H(e),t(i),i};try{P(window.XMLHttpRequest,H)}catch(n){}if(null!=U){window.XDomainRequest=function(){var e;return e=new U,t(e),e};try{P(window.XDomainRequest,U)}catch(n){}}if(null!=F&&M.ajax.trackWebSockets){window.WebSocket=function(t,e){var n;return n=null!=e?new F(t,e):new F(t),$("socket")&&i.trigger("request",{type:"socket",url:t,protocols:e,request:n}),n};try{P(window.WebSocket,F)}catch(n){}}}return J(e,t),e}(a),R=null,C=function(){return null==R&&(R=new c),R},B=function(t){var e,i,n,s;for(s=M.ajax.ignoreURLs,i=0,n=s.length;n>i;i++)if(e=s[i],"string"==typeof e){if(-1!==t.indexOf(e))return!0}else if(e.test(t))return!0;return!1},C().on("request",function(e){var i,n,s,o,r;return o=e.type,s=e.request,r=e.url,B(r)?void 0:u.running||M.restartOnRequestAfter===!1&&"force"!==$(o)?void 0:(n=arguments,i=M.restartOnRequestAfter||0,"boolean"==typeof i&&(i=0),setTimeout(function(){var e,i,r,a,l,c;if(e="socket"===o?s.readyState<2:0<(a=s.readyState)&&4>a){for(u.restart(),l=u.sources,c=[],i=0,r=l.length;r>i;i++){if(D=l[i],D instanceof t){D.watch.apply(D,n);break}c.push(void 0)}return c}},i))}),t=function(){function t(){var t=this;this.elements=[],C().on("request",function(){return t.watch.apply(t,arguments)})}return t.prototype.watch=function(t){var e,i,n,s;return n=t.type,e=t.request,s=t.url,B(s)?void 0:(i="socket"===n?new f(e):new p(e),this.elements.push(i))},t}(),p=function(){function t(t){var e,i,n,s,o,r,a=this;if(this.progress=0,null!=window.ProgressEvent)for(i=null,t.addEventListener("progress",function(t){return a.progress=t.lengthComputable?100*t.loaded/t.total:a.progress+(100-a.progress)/2},!1),r=["load","abort","timeout","error"],n=0,s=r.length;s>n;n++)e=r[n],t.addEventListener(e,function(){return a.progress=100},!1);else o=t.onreadystatechange,t.onreadystatechange=function(){var e;return 0===(e=t.readyState)||4===e?a.progress=100:3===t.readyState&&(a.progress=50),"function"==typeof o?o.apply(null,arguments):void 0}}return t}(),f=function(){function t(t){var e,i,n,s,o=this;for(this.progress=0,s=["error","open"],i=0,n=s.length;n>i;i++)e=s[i],t.addEventListener(e,function(){return o.progress=100},!1)}return t}(),n=function(){function t(t){var e,i,n,o;for(null==t&&(t={}),this.elements=[],null==t.selectors&&(t.selectors=[]),o=t.selectors,i=0,n=o.length;n>i;i++)e=o[i],this.elements.push(new s(e))}return t}(),s=function(){function t(t){this.selector=t,this.progress=0,this.check()}return t.prototype.check=function(){var t=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return t.check()},M.elements.checkInterval)},t.prototype.done=function(){return this.progress=100},t}(),i=function(){function t(){var t,e,i=this;this.progress=null!=(e=this.states[document.readyState])?e:100,t=document.onreadystatechange,document.onreadystatechange=function(){return null!=i.states[document.readyState]&&(i.progress=i.states[document.readyState]),"function"==typeof t?t.apply(null,arguments):void 0}}return t.prototype.states={loading:0,interactive:50,complete:100},t}(),o=function(){function t(){var t,e,i,n,s,o=this;this.progress=0,t=0,s=[],n=0,i=E(),e=setInterval(function(){var r;return r=E()-i-50,i=E(),s.push(r),s.length>M.eventLag.sampleCount&&s.shift(),t=m(s),++n>=M.eventLag.minSamples&&t<M.eventLag.lagThreshold?(o.progress=100,clearInterval(e)):o.progress=100*(3/(t+3))},50)}return t}(),h=function(){function t(t){this.source=t,this.last=this.sinceLastUpdate=0,this.rate=M.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=O(this.source,"progress"))}return t.prototype.tick=function(t,e){var i;return null==e&&(e=O(this.source,"progress")),e>=100&&(this.done=!0),e===this.last?this.sinceLastUpdate+=t:(this.sinceLastUpdate&&(this.rate=(e-this.last)/this.sinceLastUpdate),this.catchup=(e-this.progress)/M.catchupTime,this.sinceLastUpdate=0,this.last=e),e>this.progress&&(this.progress+=this.catchup*t),i=1-Math.pow(this.progress/100,M.easeFactor),this.progress+=i*this.rate*t,this.progress=Math.min(this.lastProgress+M.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},t}(),j=null,I=null,v=null,N=null,g=null,y=null,u.running=!1,T=function(){return M.restartOnPushState?u.restart():void 0},null!=window.history.pushState&&(q=window.history.pushState,window.history.pushState=function(){return T(),q.apply(window.history,arguments)}),null!=window.history.replaceState&&(K=window.history.replaceState,window.history.replaceState=function(){return T(),K.apply(window.history,arguments)}),d={ajax:t,elements:n,document:i,eventLag:o},(A=function(){var t,i,n,s,o,r,a,l;for(u.sources=j=[],r=["ajax","elements","document","eventLag"],i=0,s=r.length;s>i;i++)t=r[i],M[t]!==!1&&j.push(new d[t](M[t]));for(l=null!=(a=M.extraSources)?a:[],n=0,o=l.length;o>n;n++)D=l[n],j.push(new D(M));return u.bar=v=new e,I=[],N=new h})(),u.stop=function(){return u.trigger("stop"),u.running=!1,v.destroy(),y=!0,null!=g&&("function"==typeof b&&b(g),g=null),A()},u.restart=function(){return u.trigger("restart"),u.stop(),u.start()},u.go=function(){var t;return u.running=!0,v.render(),t=E(),y=!1,g=L(function(e,i){var n,s,o,r,a,l,c,d,f,p,g,m,b,_,w,P;for(d=100-v.progress,s=g=0,o=!0,l=m=0,_=j.length;_>m;l=++m)for(D=j[l],p=null!=I[l]?I[l]:I[l]=[],a=null!=(P=D.elements)?P:[D],c=b=0,w=a.length;w>b;c=++b)r=a[c],f=null!=p[c]?p[c]:p[c]=new h(r),o&=f.done,f.done||(s++,g+=f.tick(e));return n=g/s,v.update(N.tick(e,n)),v.done()||o||y?(v.update(100),u.trigger("done"),setTimeout(function(){return v.finish(),u.running=!1,u.trigger("hide")},Math.max(M.ghostTime,Math.max(M.minTime-(E()-t),0)))):i()})},u.start=function(t){w(M,t),u.running=!0;try{v.render()}catch(e){l=e}return document.querySelector(".pace")?(u.trigger("start"),u.go()):setTimeout(u.start,50)},"function"==typeof define&&define.amd?define(["pace"],function(){return u}):"object"==typeof exports?module.exports=u:M.startOnPageLoad&&u.start()}.call(this),function(t,e){function i(){C=M=T=x=A=E=D}function n(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}function s(t){return parseFloat(t)||0}function o(){O={top:e.pageYOffset,left:e.pageXOffset}}function r(){return e.pageXOffset!=O.left?(o(),void T()):void(e.pageYOffset!=O.top&&(o(),l()))}function a(t){setTimeout(function(){e.pageYOffset!=O.top&&(O.top=e.pageYOffset,l())},0)}function l(){for(var t=I.length-1;t>=0;t--)u(I[t])}function u(t){if(t.inited){var e=O.top<=t.limit.start?0:O.top>=t.limit.end?2:1;t.mode!=e&&g(t,e)}}function c(){for(var t=I.length-1;t>=0;t--)if(I[t].inited){var e=Math.abs(b(I[t].clone)-I[t].docOffsetTop),i=Math.abs(I[t].parent.node.offsetHeight-I[t].parent.height);if(e>=2||i>=2)return!1}return!0}function d(t){isNaN(parseFloat(t.computed.top))||t.isCell||(t.inited=!0,t.clone||m(t),"absolute"!=t.parent.computed.position&&"relative"!=t.parent.computed.position&&(t.parent.node.style.position="relative"),u(t),t.parent.height=t.parent.node.offsetHeight,t.docOffsetTop=b(t.clone))}function h(t){var e=!0;t.clone&&v(t),n(t.node.style,t.css);for(var i=I.length-1;i>=0;i--)if(I[i].node!==t.node&&I[i].parent.node===t.parent.node){e=!1;break}e&&(t.parent.node.style.position=t.parent.css.position),t.mode=-1}function f(){for(var t=I.length-1;t>=0;t--)d(I[t])}function p(){for(var t=I.length-1;t>=0;t--)h(I[t])}function g(t,e){var i=t.node.style;switch(e){case 0:i.position="absolute",i.left=t.offset.left+"px",i.right=t.offset.right+"px",i.top=t.offset.top+"px",i.bottom="auto",i.width="auto",i.marginLeft=0,i.marginRight=0,i.marginTop=0;break;case 1:i.position="fixed",i.left=t.box.left+"px",i.right=t.box.right+"px",i.top=t.css.top,i.bottom="auto",i.width="auto",i.marginLeft=0,i.marginRight=0,i.marginTop=0;break;case 2:i.position="absolute",i.left=t.offset.left+"px",i.right=t.offset.right+"px",i.top="auto",i.bottom=0,i.width="auto",i.marginLeft=0,i.marginRight=0}t.mode=e}function m(t){t.clone=document.createElement("div");var e=t.node.nextSibling||t.node,i=t.clone.style;i.height=t.height+"px",i.width=t.width+"px",i.marginTop=t.computed.marginTop,i.marginBottom=t.computed.marginBottom,i.marginLeft=t.computed.marginLeft,i.marginRight=t.computed.marginRight,i.padding=i.border=i.borderSpacing=0,i.fontSize="1em",i.position="static",i.cssFloat=t.computed.cssFloat,t.node.parentNode.insertBefore(t.clone,e)}function v(t){t.clone.parentNode.removeChild(t.clone),t.clone=void 0}function y(t){var e=getComputedStyle(t),i=t.parentNode,n=getComputedStyle(i),o=t.style.position;t.style.position="relative";var r={top:e.top,marginTop:e.marginTop,marginBottom:e.marginBottom,marginLeft:e.marginLeft,marginRight:e.marginRight,cssFloat:e.cssFloat},a={top:s(e.top),marginBottom:s(e.marginBottom),paddingLeft:s(e.paddingLeft),paddingRight:s(e.paddingRight),borderLeftWidth:s(e.borderLeftWidth),borderRightWidth:s(e.borderRightWidth)};t.style.position=o;var l={position:t.style.position,top:t.style.top,bottom:t.style.bottom,left:t.style.left,right:t.style.right,width:t.style.width,marginTop:t.style.marginTop,marginLeft:t.style.marginLeft,marginRight:t.style.marginRight},u=_(t),c=_(i),d={node:i,css:{position:i.style.position},computed:{position:n.position},numeric:{borderLeftWidth:s(n.borderLeftWidth),borderRightWidth:s(n.borderRightWidth),borderTopWidth:s(n.borderTopWidth),borderBottomWidth:s(n.borderBottomWidth)}},h={node:t,box:{left:u.win.left,right:$.clientWidth-u.win.right},offset:{top:u.win.top-c.win.top-d.numeric.borderTopWidth,left:u.win.left-c.win.left-d.numeric.borderLeftWidth,right:-u.win.right+c.win.right-d.numeric.borderRightWidth},css:l,isCell:"table-cell"==e.display,computed:r,numeric:a,width:u.win.right-u.win.left,height:u.win.bottom-u.win.top,mode:-1,inited:!1,parent:d,limit:{start:u.doc.top-a.top,end:c.doc.top+i.offsetHeight-d.numeric.borderBottomWidth-t.offsetHeight-a.top-a.marginBottom}};return h}function b(t){for(var e=0;t;)e+=t.offsetTop,t=t.offsetParent;return e}function _(t){var i=t.getBoundingClientRect();return{doc:{top:i.top+e.pageYOffset,left:i.left+e.pageXOffset},win:i}}function w(){L=setInterval(function(){!c()&&T()},500)}function P(){clearInterval(L)}function k(){B&&(document[j]?P():w())}function C(){B||(o(),f(),e.addEventListener("scroll",r),e.addEventListener("wheel",a),e.addEventListener("resize",T),e.addEventListener("orientationchange",T),t.addEventListener(N,k),w(),B=!0)}function T(){if(B){p();for(var t=I.length-1;t>=0;t--)I[t]=y(I[t].node);f()}}function x(){e.removeEventListener("scroll",r),e.removeEventListener("wheel",a),e.removeEventListener("resize",T),e.removeEventListener("orientationchange",T),t.removeEventListener(N,k),P(),B=!1}function A(){x(),p()}function E(){for(A();I.length;)I.pop()}function M(t){for(var e=I.length-1;e>=0;e--)if(I[e].node===t)return;var i=y(t);I.push(i),B?d(i):C()}function S(t){for(var e=I.length-1;e>=0;e--)I[e].node===t&&(h(I[e]),I.splice(e,1))}var O,L,I=[],B=!1,$=t.documentElement,D=function(){},j="hidden",N="visibilitychange";void 0!==t.webkitHidden&&(j="webkitHidden",N="webkitvisibilitychange"),e.getComputedStyle||i();for(var F=["","-webkit-","-moz-","-ms-"],U=document.createElement("div"),H=F.length-1;H>=0;H--){try{U.style.position=F[H]+"sticky"}catch(V){}""!=U.style.position&&i()}o(),e.Stickyfill={stickies:I,add:M,remove:S,init:C,rebuild:T,pause:x,stop:A,kill:E}}(document,window),window.jQuery&&!function(t){t.fn.Stickyfill=function(t){return this.each(function(){Stickyfill.add(this)}),this}}(window.jQuery),function(t,e){"use strict";function i(i,n){function s(t){return ft.preferFlash&&ot&&!ft.ignoreFlash&&ft.flash[t]!==e&&ft.flash[t]}function o(t){return function(e){var i,n=this._s;return i=n&&n._a?t.call(this,e):null}}this.setupOptions={url:i||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20150601",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var r,a,l,u,c,d,h,f,p,g,m,v,y,b,_,w,P,k,C,T,x,A,E,M,S,O,L,I,B,$,D,j,N,F,U,H,V,R,z,q,G,W,K,Q,Y,J,X,Z,tt,et,it,nt,st,ot,rt,at,lt,ut,ct,dt,ht,ft=this,pt=null,gt=null,mt=navigator.userAgent,vt=t.location.href.toString(),yt=document,bt=[],_t=!1,wt=!1,Pt=!1,kt=!1,Ct=!1,Tt=8,xt=null,At=null,Et=!1,Mt=!1,St=0,Ot=null,Lt=[],It=null,Bt=Array.prototype.slice,$t=!1,Dt=0,jt=1e3,Nt=mt.match(/(ipad|iphone|ipod)/i),Ft=mt.match(/android/i),Ut=mt.match(/msie/i),Ht=mt.match(/webkit/i),Vt=mt.match(/safari/i)&&!mt.match(/chrome/i),Rt=mt.match(/opera/i),zt=mt.match(/(mobile|pre\/|xoom)/i)||Nt||Ft,qt=!vt.match(/usehtml5audio/i)&&!vt.match(/sm2\-ignorebadua/i)&&Vt&&!mt.match(/silk/i)&&mt.match(/OS X 10_6_([3-7])/i),Gt=(t.console!==e&&console.log!==e,yt.hasFocus!==e?yt.hasFocus():null),Wt=Vt&&(yt.hasFocus===e||!yt.hasFocus()),Kt=!Wt,Qt=/(mp3|mp4|mpa|m4a|m4b)/i,Yt="about:blank",Jt="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",Xt=yt.location?yt.location.protocol.match(/http/i):null,Zt=Xt?"":"http://",te=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,ee=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],ie=new RegExp("\\.("+ee.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Xt,U={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==e&&(Rt&&opera!==e&&opera.version()<10?new Audio(null):new Audio).canPlayType!==e}catch(t){return!1}}(),this.setup=function(t){var i=!ft.url;return t!==e&&Pt&&It&&ft.ok()&&(t.flashVersion!==e||t.url!==e||t.html5Test!==e),p(t),$t||(zt?(!ft.setupOptions.ignoreMobileRestrictions||ft.setupOptions.forceUseGlobalHTML5Audio)&&(Lt.push(C.globalHTML5),$t=!0):ft.setupOptions.forceUseGlobalHTML5Audio&&(Lt.push(C.globalHTML5),$t=!0)),!ht&&zt&&(ft.setupOptions.ignoreMobileRestrictions?Lt.push(C.ignoreMobile):(ft.setupOptions.useHTML5Audio=!0,ft.setupOptions.preferFlash=!1,Nt?ft.ignoreFlash=!0:(Ft&&!mt.match(/android\s2\.3/i)||!Ft)&&($t=!0))),t&&(i&&E&&t.url!==e&&ft.beginDelayedInit(),E||t.url===e||"complete"!==yt.readyState||setTimeout(x,1)),ht=!0,ft},this.ok=function(){return It?Pt&&!kt:ft.useHTML5Audio&&ft.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return a(e)||yt[e]||t[e]},this.createSound=function(t,i){function n(){return o=H(o),ft.sounds[o.id]=new r(o),ft.soundIDs.push(o.id),ft.sounds[o.id]}var s,o,a=null;if(!Pt||!ft.ok())return!1;if(i!==e&&(t={id:t,url:i}),o=f(t),o.url=K(o.url),o.id===e&&(o.id=ft.setupOptions.idPrefix+Dt++),z(o.id,!0))return ft.sounds[o.id];if(J(o))a=n(),a._setup_html5(o);else{if(ft.html5Only)return n();if(ft.html5.usingFlash&&o.url&&o.url.match(/data\:/i))return n();d>8&&null===o.isMovieStar&&(o.isMovieStar=!!(o.serverURL||(o.type?o.type.match(te):!1)||o.url&&o.url.match(ie))),o=V(o,s),a=n(),8===d?gt._createSound(o.id,o.loops||1,o.usePolicyFile):(gt._createSound(o.id,o.url,o.usePeakData,o.useWaveformData,o.useEQData,o.isMovieStar,o.isMovieStar?o.bufferTime:!1,o.loops||1,o.serverURL,o.duration||null,o.autoPlay,!0,o.autoLoad,o.usePolicyFile),o.serverURL||(a.connected=!0,o.onconnect&&o.onconnect.apply(a))),o.serverURL||!o.autoLoad&&!o.autoPlay||a.load(o)}return!o.serverURL&&o.autoPlay&&a.play(),a},this.destroySound=function(t,e){if(!z(t))return!1;var i,n=ft.sounds[t];for(n.stop(),n._iO={},n.unload(),i=0;i<ft.soundIDs.length;i++)if(ft.soundIDs[i]===t){ft.soundIDs.splice(i,1);break}return e||n.destruct(!0),n=null,delete ft.sounds[t],!0},this.load=function(t,e){return z(t)?ft.sounds[t].load(e):!1},this.unload=function(t){return z(t)?ft.sounds[t].unload():!1},this.onPosition=function(t,e,i,n){return z(t)?ft.sounds[t].onposition(e,i,n):!1},this.onposition=this.onPosition,this.clearOnPosition=function(t,e,i){return z(t)?ft.sounds[t].clearOnPosition(e,i):!1},this.play=function(t,e){var i=null,n=e&&!(e instanceof Object);if(!Pt||!ft.ok())return!1;if(z(t,n))n&&(e={url:e});else{if(!n)return!1;n&&(e={url:e}),e&&e.url&&(e.id=t,i=ft.createSound(e).play())}return null===i&&(i=ft.sounds[t].play(e)),i},this.start=this.play,this.setPosition=function(t,e){return z(t)?ft.sounds[t].setPosition(e):!1},this.stop=function(t){return z(t)?ft.sounds[t].stop():!1},this.stopAll=function(){var t;for(t in ft.sounds)ft.sounds.hasOwnProperty(t)&&ft.sounds[t].stop()},this.pause=function(t){return z(t)?ft.sounds[t].pause():!1},this.pauseAll=function(){var t;for(t=ft.soundIDs.length-1;t>=0;t--)ft.sounds[ft.soundIDs[t]].pause()},this.resume=function(t){return z(t)?ft.sounds[t].resume():!1},this.resumeAll=function(){var t;for(t=ft.soundIDs.length-1;t>=0;t--)ft.sounds[ft.soundIDs[t]].resume()},this.togglePause=function(t){return z(t)?ft.sounds[t].togglePause():!1},this.setPan=function(t,e){return z(t)?ft.sounds[t].setPan(e):!1},this.setVolume=function(t,i){var n,s;{if(t===e||isNaN(t)||i!==e)return z(t)?ft.sounds[t].setVolume(i):!1;for(n=0,s=ft.soundIDs.length;s>n;n++)ft.sounds[ft.soundIDs[n]].setVolume(t)}},this.mute=function(t){var e=0;if(t instanceof String&&(t=null),t)return z(t)?ft.sounds[t].mute():!1;for(e=ft.soundIDs.length-1;e>=0;e--)ft.sounds[ft.soundIDs[e]].mute();return ft.muted=!0,!0},this.muteAll=function(){ft.mute()},this.unmute=function(t){var e;if(t instanceof String&&(t=null),t)return z(t)?ft.sounds[t].unmute():!1;for(e=ft.soundIDs.length-1;e>=0;e--)ft.sounds[ft.soundIDs[e]].unmute();return ft.muted=!1,!0},this.unmuteAll=function(){ft.unmute()},this.toggleMute=function(t){return z(t)?ft.sounds[t].toggleMute():!1},this.getMemoryUse=function(){var t=0;return gt&&8!==d&&(t=parseInt(gt._getMemoryUse(),10)),t},this.disable=function(i){var n;if(i===e&&(i=!1),kt)return!1;for(kt=!0,n=ft.soundIDs.length-1;n>=0;n--)B(ft.sounds[ft.soundIDs[n]]);return h(i),nt.remove(t,"load",y),!0},this.canPlayMIME=function(t){var e;return ft.hasHTML5&&(e=X({type:t})),!e&&It&&(e=t&&ft.ok()?!!((d>8?t.match(te):null)||t.match(ft.mimePattern)):null),e},this.canPlayURL=function(t){var e;return ft.hasHTML5&&(e=X({url:t})),!e&&It&&(e=t&&ft.ok()?!!t.match(ft.filePattern):null),e},this.canPlayLink=function(t){return t.type!==e&&t.type&&ft.canPlayMIME(t.type)?!0:ft.canPlayURL(t.href)},this.getSoundById=function(t,e){if(!t)return null;var i=ft.sounds[t];return i},this.onready=function(e,i){var n="onready",s=!1;if("function"!=typeof e)throw j("needFunction",n);return i||(i=t),m(n,e,i),v(),s=!0,s},this.ontimeout=function(e,i){var n="ontimeout",s=!1;if("function"!=typeof e)throw j("needFunction",n);return i||(i=t),m(n,e,i),v({type:n}),s=!0,s},this._writeDebug=function(t,e){return!0},this._wD=this._writeDebug,this._debug=function(){},this.reboot=function(e,i){var n,s,o;for(n=ft.soundIDs.length-1;n>=0;n--)ft.sounds[ft.soundIDs[n]].destruct();if(gt)try{Ut&&(At=gt.innerHTML),xt=gt.parentNode.removeChild(gt)}catch(r){}if(At=xt=It=gt=null,ft.enabled=E=Pt=Et=Mt=_t=wt=kt=$t=ft.swfLoaded=!1,ft.soundIDs=[],ft.sounds={},Dt=0,ht=!1,e)bt=[];else for(n in bt)if(bt.hasOwnProperty(n))for(s=0,o=bt[n].length;o>s;s++)bt[n][s].fired=!1;return ft.html5={usingFlash:null},ft.flash={},ft.html5Only=!1,ft.ignoreFlash=!1,t.setTimeout(function(){i||ft.beginDelayedInit()},20),ft},this.reset=function(){return ft.reboot(!0,!0)},this.getMoviePercent=function(){return gt&&"PercentLoaded"in gt?gt.PercentLoaded():null},this.beginDelayedInit=function(){Ct=!0,x(),setTimeout(function(){return Mt?!1:(S(),T(),Mt=!0,!0)},20),b()},this.destruct=function(){ft.disable(!0)},r=function(t){var i,n,s,o,r,a,l,u,c,h,p=this,g=!1,m=[],v=0,y=null;c={duration:null,time:null},this.id=t.id,this.sID=this.id,this.url=t.url,this.options=f(t),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,h=this.url?!1:!0,this.id3={},this._debug=function(){},this.load=function(t){var i,n=null;if(t!==e?p._iO=f(t,p.options):(t=p.options,p._iO=t,y&&y!==p.url&&(p._iO.url=p.url,p.url=null)),p._iO.url||(p._iO.url=p.url),p._iO.url=K(p._iO.url),p.instanceOptions=p._iO,i=p._iO,!i.url&&!p.url)return p;if(i.url===p.url&&0!==p.readyState&&2!==p.readyState)return 3===p.readyState&&i.onload&&dt(p,function(){i.onload.apply(p,[!!p.duration])}),p;if(p.loaded=!1,p.readyState=1,p.playState=0,p.id3={},J(i))n=p._setup_html5(i),n._called_load||(p._html5_canplay=!1,p.url!==i.url&&(p._a.src=i.url,p.setPosition(0)),p._a.autobuffer="auto",p._a.preload="auto",p._a._called_load=!0);else{if(ft.html5Only)return p;if(p._iO.url&&p._iO.url.match(/data\:/i))return p;try{p.isHTML5=!1,p._iO=V(H(i)),p._iO.autoPlay&&(p._iO.position||p._iO.from)&&(p._iO.autoPlay=!1),i=p._iO,8===d?gt._load(p.id,i.url,i.stream,i.autoPlay,i.usePolicyFile):gt._load(p.id,i.url,!!i.stream,!!i.autoPlay,i.loops||1,!!i.autoLoad,i.usePolicyFile)}catch(s){O({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return p.url=i.url,p},this.unload=function(){return 0!==p.readyState&&(p.isHTML5?(o(),p._a&&(p._a.pause(),y=tt(p._a))):8===d?gt._unload(p.id,Yt):gt._unload(p.id),i()),p},this.destruct=function(t){p.isHTML5?(o(),p._a&&(p._a.pause(),tt(p._a),$t||s(),p._a._s=null,p._a=null)):(p._iO.onfailure=null,gt._destroySound(p.id)),t||ft.destroySound(p.id,!0)},this.play=function(t,i){var n,s,o,l,c,m,v=!0,y=null;if(i=i===e?!0:i,t||(t={}),p.url&&(p._iO.url=p.url),p._iO=f(p._iO,p.options),p._iO=f(t,p._iO),p._iO.url=K(p._iO.url),p.instanceOptions=p._iO,!p.isHTML5&&p._iO.serverURL&&!p.connected)return p.getAutoPlay()||p.setAutoPlay(!0),p;if(J(p._iO)&&(p._setup_html5(p._iO),r()),1!==p.playState||p.paused||(n=p._iO.multiShot,n||(p.isHTML5&&p.setPosition(p._iO.position),y=p)),null!==y)return y;if(t.url&&t.url!==p.url&&(p.readyState||p.isHTML5||8!==d||!h?p.load(p._iO):h=!1),p.loaded||(0===p.readyState?(p.isHTML5||ft.html5Only?p.isHTML5?p.load(p._iO):y=p:(p._iO.autoPlay=!0,p.load(p._iO)),p.instanceOptions=p._iO):2===p.readyState&&(y=p)),null!==y)return y;if(!p.isHTML5&&9===d&&p.position>0&&p.position===p.duration&&(t.position=0),p.paused&&p.position>=0&&(!p._iO.serverURL||p.position>0))p.resume();else{if(p._iO=f(t,p._iO),(!p.isHTML5&&null!==p._iO.position&&p._iO.position>0||null!==p._iO.from&&p._iO.from>0||null!==p._iO.to)&&0===p.instanceCount&&0===p.playState&&!p._iO.serverURL){if(o=function(){p._iO=f(t,p._iO),p.play(p._iO)},p.isHTML5&&!p._html5_canplay?(p.load({_oncanplay:o}),y=!1):p.isHTML5||p.loaded||p.readyState&&2===p.readyState||(p.load({onload:o}),y=!1),null!==y)return y;p._iO=u()}(!p.instanceCount||p._iO.multiShotEvents||p.isHTML5&&p._iO.multiShot&&!$t||!p.isHTML5&&d>8&&!p.getAutoPlay())&&p.instanceCount++,p._iO.onposition&&0===p.playState&&a(p),p.playState=1,p.paused=!1,p.position=p._iO.position===e||isNaN(p._iO.position)?0:p._iO.position,p.isHTML5||(p._iO=V(H(p._iO))),p._iO.onplay&&i&&(p._iO.onplay.apply(p),g=!0),p.setVolume(p._iO.volume,!0),p.setPan(p._iO.pan,!0),p.isHTML5?p.instanceCount<2?(r(),s=p._setup_html5(),p.setPosition(p._iO.position),s.play()):(l=new Audio(p._iO.url),c=function(){nt.remove(l,"ended",c),p._onfinish(p),tt(l),l=null},m=function(){nt.remove(l,"canplay",m);try{l.currentTime=p._iO.position/jt}catch(t){}l.play()},nt.add(l,"ended",c),p._iO.volume!==e&&(l.volume=Math.max(0,Math.min(1,p._iO.volume/100))),p.muted&&(l.muted=!0),p._iO.position?nt.add(l,"canplay",m):l.play()):(v=gt._start(p.id,p._iO.loops||1,9===d?p.position:p.position/jt,p._iO.multiShot||!1),9!==d||v||p._iO.onplayerror&&p._iO.onplayerror.apply(p))}return p},this.start=this.play,this.stop=function(t){var e,i=p._iO;return 1===p.playState&&(p._onbufferchange(0),p._resetOnPosition(0),p.paused=!1,p.isHTML5||(p.playState=0),l(),i.to&&p.clearOnPosition(i.to),p.isHTML5?p._a&&(e=p.position,p.setPosition(0),p.position=e,p._a.pause(),p.playState=0,p._onTimer(),o()):(gt._stop(p.id,t),i.serverURL&&p.unload()),p.instanceCount=0,p._iO={},i.onstop&&i.onstop.apply(p)),p},this.setAutoPlay=function(t){p._iO.autoPlay=t,p.isHTML5||(gt._setAutoPlay(p.id,t),t&&(p.instanceCount||1!==p.readyState||p.instanceCount++))},this.getAutoPlay=function(){return p._iO.autoPlay},this.setPosition=function(t){t===e&&(t=0);var i,n,s=p.isHTML5?Math.max(t,0):Math.min(p.duration||p._iO.duration,Math.max(t,0));if(p.position=s,n=p.position/jt,p._resetOnPosition(p.position),p._iO.position=s,p.isHTML5){if(p._a){if(p._html5_canplay){if(p._a.currentTime!==n)try{p._a.currentTime=n,(0===p.playState||p.paused)&&p._a.pause()}catch(o){}}else if(n)return p;p.paused&&p._onTimer(!0)}}else i=9===d?p.position:n,p.readyState&&2!==p.readyState&&gt._setPosition(p.id,i,p.paused||!p.playState,p._iO.multiShot);return p},this.pause=function(t){return p.paused||0===p.playState&&1!==p.readyState?p:(p.paused=!0,p.isHTML5?(p._setup_html5().pause(),o()):(t||t===e)&&gt._pause(p.id,p._iO.multiShot),p._iO.onpause&&p._iO.onpause.apply(p),p)},this.resume=function(){var t=p._iO;return p.paused?(p.paused=!1,p.playState=1,p.isHTML5?(p._setup_html5().play(),r()):(t.isMovieStar&&!t.serverURL&&p.setPosition(p.position),gt._pause(p.id,t.multiShot)),!g&&t.onplay?(t.onplay.apply(p),g=!0):t.onresume&&t.onresume.apply(p),p):p},this.togglePause=function(){return 0===p.playState?(p.play({position:9!==d||p.isHTML5?p.position/jt:p.position}),p):(p.paused?p.resume():p.pause(),p)},this.setPan=function(t,i){return t===e&&(t=0),i===e&&(i=!1),p.isHTML5||gt._setPan(p.id,t),p._iO.pan=t,i||(p.pan=t,p.options.pan=t),p},this.setVolume=function(t,i){return t===e&&(t=100),i===e&&(i=!1),p.isHTML5?p._a&&(ft.muted&&!p.muted&&(p.muted=!0,p._a.muted=!0),p._a.volume=Math.max(0,Math.min(1,t/100))):gt._setVolume(p.id,ft.muted&&!p.muted||p.muted?0:t),p._iO.volume=t,i||(p.volume=t,p.options.volume=t),p},this.mute=function(){return p.muted=!0,p.isHTML5?p._a&&(p._a.muted=!0):gt._setVolume(p.id,0),p},this.unmute=function(){p.muted=!1;var t=p._iO.volume!==e;return p.isHTML5?p._a&&(p._a.muted=!1):gt._setVolume(p.id,t?p._iO.volume:p.options.volume),p},this.toggleMute=function(){return p.muted?p.unmute():p.mute()},this.onPosition=function(t,i,n){return m.push({position:parseInt(t,10),method:i,scope:n!==e?n:p,fired:!1}),p},this.onposition=this.onPosition,this.clearOnPosition=function(t,e){var i;if(t=parseInt(t,10),isNaN(t))return!1;for(i=0;i<m.length;i++)t===m[i].position&&(e&&e!==m[i].method||(m[i].fired&&v--,m.splice(i,1)))},this._processOnPosition=function(){var t,e,i=m.length;if(!i||!p.playState||v>=i)return!1;for(t=i-1;t>=0;t--)e=m[t],!e.fired&&p.position>=e.position&&(e.fired=!0,v++,e.method.apply(e.scope,[e.position]),i=m.length);return!0},this._resetOnPosition=function(t){var e,i,n=m.length;if(!n)return!1;for(e=n-1;e>=0;e--)i=m[e],i.fired&&t<=i.position&&(i.fired=!1,v--);return!0},u=function(){var t,e,i=p._iO,n=i.from,s=i.to;return e=function(){p.clearOnPosition(s,e),p.stop()},t=function(){null===s||isNaN(s)||p.onPosition(s,e)},null===n||isNaN(n)||(i.position=n,i.multiShot=!1,t()),i},a=function(){var t,e=p._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&p.onPosition(parseInt(t,10),e[t])},l=function(){var t,e=p._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&p.clearOnPosition(parseInt(t,10))},r=function(){p.isHTML5&&q(p)},o=function(){p.isHTML5&&G(p)},i=function(t){t||(m=[],v=0),g=!1,p._hasTimer=null,p._a=null,p._html5_canplay=!1,p.bytesLoaded=null,p.bytesTotal=null,p.duration=p._iO&&p._iO.duration?p._iO.duration:null,p.durationEstimate=null,p.buffered=[],p.eqData=[],p.eqData.left=[],p.eqData.right=[],p.failures=0,p.isBuffering=!1,p.instanceOptions={},p.instanceCount=0,p.loaded=!1,p.metadata={},p.readyState=0,p.muted=!1,p.paused=!1,p.peakData={left:0,right:0},p.waveformData={left:[],right:[]},p.playState=0,p.position=null,p.id3={}},i(),this._onTimer=function(t){var e,i,n=!1,s={};return p._hasTimer||t?(p._a&&(t||(p.playState>0||1===p.readyState)&&!p.paused)&&(e=p._get_html5_duration(),e!==c.duration&&(c.duration=e,p.duration=e,n=!0),p.durationEstimate=p.duration,i=p._a.currentTime*jt||0,i!==c.time&&(c.time=i,n=!0),(n||t)&&p._whileplaying(i,s,s,s,s)),n):void 0},this._get_html5_duration=function(){var t=p._iO,e=p._a&&p._a.duration?p._a.duration*jt:t&&t.duration?t.duration:null,i=e&&!isNaN(e)&&e!==1/0?e:null;return i},this._apply_loop=function(t,e){t.loop=e>1?"loop":""},this._setup_html5=function(t){var e,s=f(p._iO,t),o=$t?pt:p._a,r=decodeURI(s.url);if($t?r===decodeURI(st)&&(e=!0):r===decodeURI(y)&&(e=!0),o){if(o._s)if($t)o._s&&o._s.playState&&!e&&o._s.stop();else if(!$t&&r===decodeURI(y))return p._apply_loop(o,s.loops),o;e||(y&&i(!1),o.src=s.url,p.url=s.url,y=s.url,st=s.url,o._called_load=!1)}else s.autoLoad||s.autoPlay?(p._a=new Audio(s.url),p._a.load()):p._a=Rt&&opera.version()<10?new Audio(null):new Audio,o=p._a,o._called_load=!1,$t&&(pt=o);return p.isHTML5=!0,p._a=o,o._s=p,n(),p._apply_loop(o,s.loops),s.autoLoad||s.autoPlay?p.load():(o.autobuffer=!1,o.preload="auto"),o},n=function(){function t(t,e,i){return p._a?p._a.addEventListener(t,e,i||!1):null}if(p._a._added_events)return!1;var e;p._a._added_events=!0;for(e in lt)lt.hasOwnProperty(e)&&t(e,lt[e]);return!0},s=function(){function t(t,e,i){return p._a?p._a.removeEventListener(t,e,i||!1):null}var e;p._a._added_events=!1;for(e in lt)lt.hasOwnProperty(e)&&t(e,lt[e])},this._onload=function(t){var e=!!t||!p.isHTML5&&8===d&&p.duration;return p.loaded=e,p.readyState=e?3:2,p._onbufferchange(0),p._iO.onload&&dt(p,function(){p._iO.onload.apply(p,[e])}),!0},this._onbufferchange=function(t){return 0===p.playState?!1:t&&p.isBuffering||!t&&!p.isBuffering?!1:(p.isBuffering=1===t,p._iO.onbufferchange&&p._iO.onbufferchange.apply(p,[t]),!0)},this._onsuspend=function(){return p._iO.onsuspend&&p._iO.onsuspend.apply(p),!0},this._onfailure=function(t,e,i){p.failures++,p._iO.onfailure&&1===p.failures&&p._iO.onfailure(t,e,i)},this._onwarning=function(t,e,i){p._iO.onwarning&&p._iO.onwarning(t,e,i)},this._onfinish=function(){var t=p._iO.onfinish;p._onbufferchange(0),p._resetOnPosition(0),p.instanceCount&&(p.instanceCount--,p.instanceCount||(l(),p.playState=0,p.paused=!1,p.instanceCount=0,p.instanceOptions={},p._iO={},o(),p.isHTML5&&(p.position=0)),(!p.instanceCount||p._iO.multiShotEvents)&&t&&dt(p,function(){t.apply(p)}))},this._whileloading=function(t,e,i,n){var s=p._iO;p.bytesLoaded=t,
p.bytesTotal=e,p.duration=Math.floor(i),p.bufferLength=n,p.durationEstimate=p.isHTML5||s.isMovieStar?p.duration:s.duration?p.duration>s.duration?p.duration:s.duration:parseInt(p.bytesTotal/p.bytesLoaded*p.duration,10),p.isHTML5||(p.buffered=[{start:0,end:p.duration}]),(3!==p.readyState||p.isHTML5)&&s.whileloading&&s.whileloading.apply(p)},this._whileplaying=function(t,i,n,s,o){var r,a=p._iO;return isNaN(t)||null===t?!1:(p.position=Math.max(0,t),p._processOnPosition(),!p.isHTML5&&d>8&&(a.usePeakData&&i!==e&&i&&(p.peakData={left:i.leftPeak,right:i.rightPeak}),a.useWaveformData&&n!==e&&n&&(p.waveformData={left:n.split(","),right:s.split(",")}),a.useEQData&&o!==e&&o&&o.leftEQ&&(r=o.leftEQ.split(","),p.eqData=r,p.eqData.left=r,o.rightEQ!==e&&o.rightEQ&&(p.eqData.right=o.rightEQ.split(",")))),1===p.playState&&(p.isHTML5||8!==d||p.position||!p.isBuffering||p._onbufferchange(0),a.whileplaying&&a.whileplaying.apply(p)),!0)},this._oncaptiondata=function(t){p.captiondata=t,p._iO.oncaptiondata&&p._iO.oncaptiondata.apply(p,[t])},this._onmetadata=function(t,e){var i,n,s={};for(i=0,n=t.length;n>i;i++)s[t[i]]=e[i];p.metadata=s,p._iO.onmetadata&&p._iO.onmetadata.call(p,p.metadata)},this._onid3=function(t,e){var i,n,s=[];for(i=0,n=t.length;n>i;i++)s[t[i]]=e[i];p.id3=f(p.id3,s),p._iO.onid3&&p._iO.onid3.apply(p)},this._onconnect=function(t){t=1===t,p.connected=t,t&&(p.failures=0,z(p.id)&&(p.getAutoPlay()?p.play(e,p.getAutoPlay()):p._iO.autoLoad&&p.load()),p._iO.onconnect&&p._iO.onconnect.apply(p,[t]))},this._ondataerror=function(t){p.playState>0&&p._iO.ondataerror&&p._iO.ondataerror.apply(p)}},M=function(){return yt.body||yt.getElementsByTagName("div")[0]},a=function(t){return yt.getElementById(t)},f=function(t,i){var n,s,o=t||{};n=i===e?ft.defaultOptions:i;for(s in n)n.hasOwnProperty(s)&&o[s]===e&&(o[s]="object"!=typeof n[s]||null===n[s]?n[s]:f(o[s],n[s]));return o},dt=function(e,i){e.isHTML5||8!==d?i():t.setTimeout(i,0)},g={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},p=function(t,i){var n,s=!0,o=i!==e,r=ft.setupOptions,a=g;for(n in t)if(t.hasOwnProperty(n))if("object"!=typeof t[n]||null===t[n]||t[n]instanceof Array||t[n]instanceof RegExp)o&&a[i]!==e?ft[i][n]=t[n]:r[n]!==e?(ft.setupOptions[n]=t[n],ft[n]=t[n]):a[n]===e?s=!1:ft[n]instanceof Function?ft[n].apply(ft,t[n]instanceof Array?t[n]:[t[n]]):ft[n]=t[n];else{if(a[n]!==e)return p(t[n],n);s=!1}return s},nt=function(){function e(t){var e=Bt.call(t),i=e.length;return o?(e[1]="on"+e[1],i>3&&e.pop()):3===i&&e.push(!1),e}function i(t,e){var i=t.shift(),n=[r[e]];o?i[n](t[0],t[1]):i[n].apply(i,t)}function n(){i(e(arguments),"add")}function s(){i(e(arguments),"remove")}var o=t.attachEvent,r={add:o?"attachEvent":"addEventListener",remove:o?"detachEvent":"removeEventListener"};return{add:n,remove:s}}(),lt={abort:o(function(){}),canplay:o(function(){var t,i=this._s;if(i._html5_canplay)return!0;if(i._html5_canplay=!0,i._onbufferchange(0),t=i._iO.position===e||isNaN(i._iO.position)?null:i._iO.position/jt,this.currentTime!==t)try{this.currentTime=t}catch(n){}i._iO._oncanplay&&i._iO._oncanplay()}),canplaythrough:o(function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),durationchange:o(function(){var t,e=this._s;t=e._get_html5_duration(),isNaN(t)||t===e.duration||(e.durationEstimate=e.duration=t)}),ended:o(function(){var t=this._s;t._onfinish()}),error:o(function(){this._s._onload(!1)}),loadeddata:o(function(){var t=this._s;t._loaded||Vt||(t.duration=t._get_html5_duration())}),loadedmetadata:o(function(){}),loadstart:o(function(){this._s._onbufferchange(1)}),play:o(function(){this._s._onbufferchange(0)}),playing:o(function(){this._s._onbufferchange(0)}),progress:o(function(t){var e,i,n=this._s,s=0,o=("progress"===t.type,t.target.buffered),r=t.loaded||0,a=t.total||1;if(n.buffered=[],o&&o.length){for(e=0,i=o.length;i>e;e++)n.buffered.push({start:o.start(e)*jt,end:o.end(e)*jt});s=(o.end(0)-o.start(0))*jt,r=Math.min(1,s/(t.target.duration*jt))}isNaN(r)||(n._whileloading(r,a,n._get_html5_duration()),r&&a&&r===a&&lt.canplaythrough.call(this,t))}),ratechange:o(function(){}),suspend:o(function(t){var e=this._s;lt.progress.call(this,t),e._onsuspend()}),stalled:o(function(){}),timeupdate:o(function(){this._s._onTimer()}),waiting:o(function(){var t=this._s;t._onbufferchange(1)})},J=function(t){var e;return e=t&&(t.type||t.url||t.serverURL)?t.serverURL||t.type&&s(t.type)?!1:t.type?X({type:t.type}):X({url:t.url})||ft.html5Only||t.url.match(/data\:/i):!1},tt=function(t){var i;return t&&(i=Vt?Yt:ft.html5.canPlayType("audio/wav")?Jt:Yt,t.src=i,t._called_unload!==e&&(t._called_load=!1)),$t&&(st=null),i},X=function(t){if(!ft.useHTML5Audio||!ft.hasHTML5)return!1;var i,n,o,r,a=t.url||null,l=t.type||null,u=ft.audioFormats;if(l&&ft.html5[l]!==e)return ft.html5[l]&&!s(l);if(!Z){Z=[];for(r in u)u.hasOwnProperty(r)&&(Z.push(r),u[r].related&&(Z=Z.concat(u[r].related)));Z=new RegExp("\\.("+Z.join("|")+")(\\?.*)?$","i")}return o=a?a.toLowerCase().match(Z):null,o&&o.length?o=o[1]:l?(n=l.indexOf(";"),o=(-1!==n?l.substr(0,n):l).substr(6)):i=!1,o&&ft.html5[o]!==e?i=ft.html5[o]&&!s(o):(l="audio/"+o,i=ft.html5.canPlayType({type:l}),ft.html5[o]=i,i=i&&ft.html5[l]&&!s(l)),i},it=function(){function t(t){var e,i,n=!1,s=!1;if(!r||"function"!=typeof r.canPlayType)return n;if(t instanceof Array){for(o=0,i=t.length;i>o;o++)(ft.html5[t[o]]||r.canPlayType(t[o]).match(ft.html5Test))&&(s=!0,ft.html5[t[o]]=!0,ft.flash[t[o]]=!!t[o].match(Qt));n=s}else e=r&&"function"==typeof r.canPlayType?r.canPlayType(t):!1,n=!(!e||!e.match(ft.html5Test));return n}if(!ft.useHTML5Audio||!ft.hasHTML5)return ft.html5.usingFlash=!0,It=!0,!1;var i,n,s,o,r=Audio!==e?Rt&&opera.version()<10?new Audio(null):new Audio:null,a={};s=ft.audioFormats;for(i in s)if(s.hasOwnProperty(i)&&(n="audio/"+i,a[i]=t(s[i].type),a[n]=a[i],i.match(Qt)?(ft.flash[i]=!0,ft.flash[n]=!0):(ft.flash[i]=!1,ft.flash[n]=!1),s[i]&&s[i].related))for(o=s[i].related.length-1;o>=0;o--)a["audio/"+s[i].related[o]]=a[i],ft.html5[s[i].related[o]]=a[i],ft.flash[s[i].related[o]]=a[i];return a.canPlayType=r?t:null,ft.html5=f(ft.html5,a),ft.html5.usingFlash=Y(),It=ft.html5.usingFlash,!0},C={},j=function(){},H=function(t){return 8===d&&t.loops>1&&t.stream&&(t.stream=!1),t},V=function(t,e){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(t.usePolicyFile=!0),t},R=function(t){},l=function(){return!1},B=function(t){var e;for(e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=l);e=null},$=function(t){t===e&&(t=!1),(kt||t)&&ft.disable(t)},D=function(t){var e,i=null;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(i=t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return e=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+ft.movieURL,ft.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},P=function(){d=parseInt(ft.flashVersion,10),8!==d&&9!==d&&(ft.flashVersion=d=Tt);var t=ft.debugMode||ft.debugFlash?"_debug.swf":".swf";ft.useHTML5Audio&&!ft.html5Only&&ft.audioFormats.mp4.required&&9>d&&(ft.flashVersion=d=9),ft.version=ft.versionNumber+(ft.html5Only?" (HTML5-only mode)":9===d?" (AS3/Flash 9)":" (AS2/Flash 8)"),d>8?(ft.defaultOptions=f(ft.defaultOptions,ft.flash9Options),ft.features.buffering=!0,ft.defaultOptions=f(ft.defaultOptions,ft.movieStarOptions),ft.filePatterns.flash9=new RegExp("\\.(mp3|"+ee.join("|")+")(\\?.*)?$","i"),ft.features.movieStar=!0):ft.features.movieStar=!1,ft.filePattern=ft.filePatterns[8!==d?"flash9":"flash8"],ft.movieURL=(8===d?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),ft.features.peakData=ft.features.waveformData=ft.features.eqData=d>8},L=function(t,e){return gt?void gt._setPolling(t,e):!1},I=function(){},z=this.getSoundById,F=function(){var t=[];return ft.debugMode&&t.push(U.sm2Debug),ft.debugFlash&&t.push(U.flashDebug),ft.useHighPerformance&&t.push(U.highPerf),t.join(" ")},N=function(){var t=(j("fbHandler"),ft.getMoviePercent()),e=U,i={type:"FLASHBLOCK"};return ft.html5Only?!1:void(ft.ok()?ft.oMC&&(ft.oMC.className=[F(),e.swfDefault,e.swfLoaded+(ft.didFlashBlock?" "+e.swfUnblocked:"")].join(" ")):(It&&(ft.oMC.className=F()+" "+e.swfDefault+" "+(null===t?e.swfTimedout:e.swfError)),ft.didFlashBlock=!0,v({type:"ontimeout",ignoreInit:!0,error:i}),O(i)))},m=function(t,i,n){bt[t]===e&&(bt[t]=[]),bt[t].push({method:i,scope:n||null,fired:!1})},v=function(t){if(t||(t={type:ft.ok()?"onready":"ontimeout"}),!Pt&&t&&!t.ignoreInit)return!1;if("ontimeout"===t.type&&(ft.ok()||kt&&!t.ignoreInit))return!1;var e,i,n={success:t&&t.ignoreInit?ft.ok():!kt},s=t&&t.type?bt[t.type]||[]:[],o=[],r=[n],a=It&&!ft.ok();for(t.error&&(r[0].error=t.error),e=0,i=s.length;i>e;e++)s[e].fired!==!0&&o.push(s[e]);if(o.length)for(e=0,i=o.length;i>e;e++)o[e].scope?o[e].method.apply(o[e].scope,r):o[e].method.apply(this,r),a||(o[e].fired=!0);return!0},y=function(){t.setTimeout(function(){ft.useFlashBlock&&N(),v(),"function"==typeof ft.onload&&ft.onload.apply(t),ft.waitForWindowLoad&&nt.add(t,"load",y)},1)},rt=function(){if(ot!==e)return ot;var i,n,s,o=!1,r=navigator,a=r.plugins,l=t.ActiveXObject;if(a&&a.length)n="application/x-shockwave-flash",s=r.mimeTypes,s&&s[n]&&s[n].enabledPlugin&&s[n].enabledPlugin.description&&(o=!0);else if(l!==e&&!mt.match(/MSAppHost/i)){try{i=new l("ShockwaveFlash.ShockwaveFlash")}catch(u){i=null}o=!!i,i=null}return ot=o,o},Y=function(){var t,e,i=ft.audioFormats,n=Nt&&!!mt.match(/os (1|2|3_0|3_1)\s/i);if(n?(ft.hasHTML5=!1,ft.html5Only=!0,ft.oMC&&(ft.oMC.style.display="none")):ft.useHTML5Audio&&(ft.html5&&ft.html5.canPlayType||(ft.hasHTML5=!1)),ft.useHTML5Audio&&ft.hasHTML5){Q=!0;for(e in i)i.hasOwnProperty(e)&&i[e].required&&(ft.html5.canPlayType(i[e].type)?ft.preferFlash&&(ft.flash[e]||ft.flash[i[e].type])&&(t=!0):(Q=!1,t=!0))}return ft.ignoreFlash&&(t=!1,Q=!0),ft.html5Only=ft.hasHTML5&&ft.useHTML5Audio&&!t,!ft.html5Only},K=function(t){var e,i,n,s=0;if(t instanceof Array){for(e=0,i=t.length;i>e;e++)if(t[e]instanceof Object){if(ft.canPlayMIME(t[e].type)){s=e;break}}else if(ft.canPlayURL(t[e])){s=e;break}t[s].url&&(t[s]=t[s].url),n=t[s]}else n=t;return n},q=function(t){t._hasTimer||(t._hasTimer=!0,!zt&&ft.html5PollingInterval&&(null===Ot&&0===St&&(Ot=setInterval(W,ft.html5PollingInterval)),St++))},G=function(t){t._hasTimer&&(t._hasTimer=!1,!zt&&ft.html5PollingInterval&&St--)},W=function(){var t;if(null!==Ot&&!St)return clearInterval(Ot),Ot=null,!1;for(t=ft.soundIDs.length-1;t>=0;t--)ft.sounds[ft.soundIDs[t]].isHTML5&&ft.sounds[ft.soundIDs[t]]._hasTimer&&ft.sounds[ft.soundIDs[t]]._onTimer()},O=function(i){i=i!==e?i:{},"function"==typeof ft.onerror&&ft.onerror.apply(t,[{type:i.type!==e?i.type:null}]),i.fatal!==e&&i.fatal&&ft.disable()},at=function(){if(!qt||!rt())return!1;var t,e,i=ft.audioFormats;for(e in i)if(i.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(ft.html5[e]=!1,i[e]&&i[e].related))for(t=i[e].related.length-1;t>=0;t--)ft.html5[i[e].related[t]]=!1},this._setSandboxType=function(t){},this._externalInterfaceOK=function(t){if(ft.swfLoaded)return!1;ft.swfLoaded=!0,Wt=!1,qt&&at(),setTimeout(c,Ut?100:1)},S=function(t,i){function n(){}function s(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(_t&&wt)return!1;if(ft.html5Only)return P(),n(),ft.oMC=a(ft.movieID),c(),_t=!0,wt=!0,!1;var o,r,l,u,d,h,f,p,g=i||ft.url,m=ft.altURL||g,v="JS/Flash audio component (SoundManager 2)",y=M(),b=F(),_=null,w=yt.getElementsByTagName("html")[0];if(_=w&&w.dir&&w.dir.match(/rtl/i),t=t===e?ft.id:t,P(),ft.url=D(Xt?g:m),i=ft.url,ft.wmode=!ft.wmode&&ft.useHighPerformance?"transparent":ft.wmode,null!==ft.wmode&&(mt.match(/msie 8/i)||!Ut&&!ft.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Lt.push(C.spcWmode),ft.wmode=null),o={name:t,id:t,src:i,quality:"high",allowScriptAccess:ft.allowScriptAccess,bgcolor:ft.bgColor,pluginspage:Zt+"www.macromedia.com/go/getflashplayer",title:v,type:"application/x-shockwave-flash",wmode:ft.wmode,hasPriority:"true"},ft.debugFlash&&(o.FlashVars="debug=1"),ft.wmode||delete o.wmode,Ut)r=yt.createElement("div"),u=['<object id="'+t+'" data="'+i+'" type="'+o.type+'" title="'+o.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',s("movie",i),s("AllowScriptAccess",ft.allowScriptAccess),s("quality",o.quality),ft.wmode?s("wmode",ft.wmode):"",s("bgcolor",ft.bgColor),s("hasPriority","true"),ft.debugFlash?s("FlashVars",o.FlashVars):"","</object>"].join("");else{r=yt.createElement("embed");for(l in o)o.hasOwnProperty(l)&&r.setAttribute(l,o[l])}if(I(),b=F(),y=M())if(ft.oMC=a(ft.movieID)||yt.createElement("div"),ft.oMC.id)p=ft.oMC.className,ft.oMC.className=(p?p+" ":U.swfDefault)+(b?" "+b:""),ft.oMC.appendChild(r),Ut&&(d=ft.oMC.appendChild(yt.createElement("div")),d.className=U.swfBox,d.innerHTML=u),wt=!0;else{if(ft.oMC.id=ft.movieID,ft.oMC.className=U.swfDefault+" "+b,h=null,d=null,ft.useFlashBlock||(ft.useHighPerformance?h={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(h={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},_&&(h.left=Math.abs(parseInt(h.left,10))+"px"))),Ht&&(ft.oMC.style.zIndex=1e4),!ft.debugFlash)for(f in h)h.hasOwnProperty(f)&&(ft.oMC.style[f]=h[f]);try{Ut||ft.oMC.appendChild(r),y.appendChild(ft.oMC),Ut&&(d=ft.oMC.appendChild(yt.createElement("div")),d.className=U.swfBox,d.innerHTML=u),wt=!0}catch(k){throw new Error(j("domError")+" \n"+k.toString())}}return _t=!0,n(),!0},T=function(){return ft.html5Only?(S(),!1):gt?!1:ft.url?(gt=ft.getMovie(ft.id),gt||(xt?(Ut?ft.oMC.innerHTML=At:ft.oMC.appendChild(xt),xt=null,_t=!0):S(ft.id,ft.url),gt=ft.getMovie(ft.id)),"function"==typeof ft.oninitmovie&&setTimeout(ft.oninitmovie,1),!0):!1},b=function(){setTimeout(_,1e3)},w=function(){t.setTimeout(function(){ft.setup({preferFlash:!1}).reboot(),ft.didFlashBlock=!0,ft.beginDelayedInit()},1)},_=function(){var e,i=!1;return ft.url?Et?!1:(Et=!0,nt.remove(t,"load",b),ot&&Wt&&!Gt?!1:(Pt||(e=ft.getMoviePercent(),e>0&&100>e&&(i=!0)),void setTimeout(function(){return e=ft.getMoviePercent(),i?(Et=!1,t.setTimeout(b,1),!1):void(!Pt&&Kt&&(null===e?ft.useFlashBlock||0===ft.flashLoadTimeout?ft.useFlashBlock&&N():!ft.useFlashBlock&&Q?w():v({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}}):0===ft.flashLoadTimeout||(!ft.useFlashBlock&&Q?w():$(!0))))},ft.flashLoadTimeout))):!1},k=function(){function e(){nt.remove(t,"focus",k)}return Gt||!Wt?(e(),!0):(Kt=!0,Gt=!0,Et=!1,b(),e(),!0)},ct=function(){},ut=function(){},h=function(e){if(Pt)return!1;if(ft.html5Only)return Pt=!0,y(),!0;var i,n=ft.useFlashBlock&&ft.flashLoadTimeout&&!ft.getMoviePercent(),s=!0;return n||(Pt=!0),i={type:!ot&&It?"NO_FLASH":"INIT_TIMEOUT"},(kt||e)&&(ft.useFlashBlock&&ft.oMC&&(ft.oMC.className=F()+" "+(null===ft.getMoviePercent()?U.swfTimedout:U.swfError)),v({type:"ontimeout",error:i,ignoreInit:!0}),O(i),s=!1),kt||(ft.waitForWindowLoad&&!Ct?nt.add(t,"load",y):y()),s},u=function(){var t,i=ft.setupOptions;for(t in i)i.hasOwnProperty(t)&&(ft[t]===e?ft[t]=i[t]:ft[t]!==i[t]&&(ft.setupOptions[t]=ft[t]))},c=function(){function e(){nt.remove(t,"load",ft.beginDelayedInit)}if(Pt)return!1;if(ft.html5Only)return Pt||(e(),ft.enabled=!0,h()),!0;T();try{gt._externalInterfaceTest(!1),L(!0,ft.flashPollingInterval||(ft.useHighPerformance?10:50)),ft.debugMode||gt._disableDebug(),ft.enabled=!0,ft.html5Only||nt.add(t,"unload",l)}catch(i){return O({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),$(!0),h(),!1}return h(),e(),!0},x=function(){return E?!1:(E=!0,u(),I(),!ot&&ft.hasHTML5&&ft.setup({useHTML5Audio:!0,preferFlash:!1}),it(),!ot&&It&&(Lt.push(C.needFlash),ft.setup({flashLoadTimeout:1})),yt.removeEventListener&&yt.removeEventListener("DOMContentLoaded",x,!1),T(),!0)},et=function(){return"complete"===yt.readyState&&(x(),yt.detachEvent("onreadystatechange",et)),!0},A=function(){Ct=!0,x(),nt.remove(t,"load",A)},rt(),nt.add(t,"focus",k),nt.add(t,"load",b),nt.add(t,"load",A),yt.addEventListener?yt.addEventListener("DOMContentLoaded",x,!1):yt.attachEvent?yt.attachEvent("onreadystatechange",et):O({type:"NO_DOM2_EVENTS",fatal:!0})}if(!t||!t.document)throw new Error("SoundManager requires a browser with window and document objects.");var n=null;t.SM2_DEFER!==e&&SM2_DEFER||(n=new i),"object"==typeof module&&module&&"object"==typeof module.exports?(module.exports.SoundManager=i,module.exports.soundManager=n):"function"==typeof define&&define.amd&&define(function(){function e(e){if(!t.soundManager&&e instanceof Function){var n=e(i);n instanceof i&&(t.soundManager=n)}return t.soundManager}return{constructor:i,getInstance:e}}),t.SoundManager=i,t.soundManager=n}(window),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,n){var s,o,r,a=e.nodeName.toLowerCase();return"area"===a?(s=e.parentNode,o=s.name,e.href&&o&&"map"===s.nodeName.toLowerCase()?(r=t("img[usemap='#"+o+"']")[0],!!r&&i(r)):!1):(/^(input|select|textarea|button|object)$/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),n="absolute"===i,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return n&&"static"===e.css("position")?!1:s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var n=t.attr(i,"tabindex"),s=isNaN(n);return(s||n>=0)&&e(i,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function n(e,i,n,o){return t.each(s,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var s="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?r["inner"+i].call(this):this.each(function(){t(this).css(o,n(this,e)+"px")})},t.fn["outer"+i]=function(e,s){return"number"!=typeof e?r["outer"+i].call(this,e):this.each(function(){t(this).css(o,n(this,e,!0,s)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,n,s=t(this[0]);s.length&&s[0]!==document;){if(i=s.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(s.css("zIndex"),10),!isNaN(n)&&0!==n))return n;s=s.parent()}return 0}}),t.ui.plugin={add:function(e,i,n){var s,o=t.ui[e].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i,n){var s,o=t.plugins[e];if(o&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;s<o.length;s++)t.options[o[s][0]]&&o[s][1].apply(t.element,i)}}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e=0,i=Array.prototype.slice;return t.cleanData=function(e){return function(i){var n,s,o;for(o=0;null!=(s=i[o]);o++)try{n=t._data(s,"events"),n&&n.remove&&t(s).triggerHandler("remove")}catch(r){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var s,o,r,a,l={},u=e.split(".")[0];return e=e.split(".")[1],s=u+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[u]=t[u]||{},o=t[u][e],r=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new r(t,e)},t.extend(r,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(l[e]=n)}),r.prototype=t.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix||e:e},l,{constructor:r,namespace:u,widgetName:e,widgetFullName:s}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete o._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var n,s,o=i.call(arguments,1),r=0,a=o.length;a>r;r++)for(n in o[r])s=o[r][n],o[r].hasOwnProperty(n)&&void 0!==s&&(e[n]=t.isPlainObject(s)?t.isPlainObject(e[n])?t.widget.extend({},e[n],s):t.widget.extend({},s):s);return e},t.widget.bridge=function(e,n){var s=n.prototype.widgetFullName||e;t.fn[e]=function(o){var r="string"==typeof o,a=i.call(arguments,1),l=this;return r?this.each(function(){var i,n=t.data(this,s);return"instance"===o?(l=n,!1):n?t.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,a),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):(a.length&&(o=t.widget.extend.apply(null,[o].concat(a))),this.each(function(){var e=t.data(this,s);e?(e.option(o||{}),e._init&&e._init()):t.data(this,s,new n(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,s,o,r=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(r={},n=e.split("."),e=n.shift(),n.length){for(s=r[e]=t.widget.extend({},this.options[e]),o=0;o<n.length-1;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(e=n.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=i}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,r){function a(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?o[r]:r).apply(o,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?s.delegate(c,u,a):i.bind(u,a)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,r=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var r,a=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),r=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),r&&t.effects&&t.effects.effect[a]?n[e](s):a!==e&&n[a]?n[a](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}}),t.widget}),function(t){"function"==typeof define&&define.amd?define(["jquery","./widget"],t):t(jQuery)}(function(t){var e=!1;return t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1===i.which,o="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return s&&!o&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(i){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&t.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),e=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],t):t(jQuery)}(function(t){return t.widget("ui.slider",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",r=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),e=s.length;i>e;e++)r.push(o);this.handles=s.add(t(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),
this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,n,s,o,r,a,l,u,c=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-c.values(e));(s>i||s===i&&(e===c._lastChangedValue||c.values(e)===d.min))&&(s=i,o=t(this),r=e)}),a=this._start(e,r),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,o.addClass("ui-state-active").focus(),l=o.offset(),u=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:e.pageX-l.left-o.width()/2,top:e.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,r,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,s,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,s,o;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>n||1===e&&n>i)&&(i=n),i!==this.values(e)&&(s=this.values(),s[e]=i,o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:s}),n=this.values(e?0:1),o!==!1&&this.values(e,i))):i!==this.value()&&(o=this._trigger("slide",t,{handle:this.handles[e],value:i}),o!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,s,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,s=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var n,s=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(s=this.options.values.length),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!i),this._super(e,i),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step,n=Math.floor(+(t-e).toFixed(this._precision())/i)*i;t=n+e,this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var e,i,n,s,o,r=this.options.range,a=this.options,l=this,u=this._animateOff?!1:a.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[u?"animate":"css"](c,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[u?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[u?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[u?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[u?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?(n-s)/(o-s)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[u?"animate":"css"](c,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(e){var i,n,s,o,r=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),i=this._start(e,r),i===!1))return}switch(o=this.options.step,n=s=this.options.values&&this.options.values.length?this.values(r):this.value(),e.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;s=this._trimAlignValue(n+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;s=this._trimAlignValue(n-o)}this._slide(e,r,s)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e="ui-effects-",i=t;return t.effects={effect:{}},function(t,e){function i(t,e,i){var n=d[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function n(e){var i=u(),n=i._rgba=[];return e=e.toLowerCase(),p(l,function(t,s){var o,r=s.re.exec(e),a=r&&s.parse(r),l=s.space||"rgba";return a?(o=i[l](a),i[c[l].cache]=o[c[l].cache],n=i._rgba=o._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&t.extend(n,o.transparent),i):o[e]}function s(t,e,i){return i=(i+1)%1,1>6*i?t+(e-t)*i*6:1>2*i?e:2>3*i?t+(e-t)*(2/3-i)*6:t}var o,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],u=t.Color=function(e,i,n,s){return new t.Color.fn.parse(e,i,n,s)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=u.support={},f=t("<p>")[0],p=t.each;f.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=f.style.backgroundColor.indexOf("rgba")>-1,p(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),u.fn=t.extend(u.prototype,{parse:function(s,r,a,l){if(s===e)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=t(s).css(r),r=e);var d=this,h=t.type(s),f=this._rgba=[];return r!==e&&(s=[s,r,a,l],h="array"),"string"===h?this.parse(n(s)||o._default):"array"===h?(p(c.rgba.props,function(t,e){f[e.idx]=i(s[e.idx],e)}),this):"object"===h?(s instanceof u?p(c,function(t,e){s[e.cache]&&(d[e.cache]=s[e.cache].slice())}):p(c,function(e,n){var o=n.cache;p(n.props,function(t,e){if(!d[o]&&n.to){if("alpha"===t||null==s[t])return;d[o]=n.to(d._rgba)}d[o][e.idx]=i(s[t],e,!0)}),d[o]&&t.inArray(null,d[o].slice(0,3))<0&&(d[o][3]=1,n.from&&(d._rgba=n.from(d[o])))}),this):void 0},is:function(t){var e=u(t),i=!0,n=this;return p(c,function(t,s){var o,r=e[s.cache];return r&&(o=n[s.cache]||s.to&&s.to(n._rgba)||[],p(s.props,function(t,e){return null!=r[e.idx]?i=r[e.idx]===o[e.idx]:void 0})),i}),i},_space:function(){var t=[],e=this;return p(c,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var n=u(t),s=n._space(),o=c[s],r=0===this.alpha()?u("transparent"):this,a=r[o.cache]||o.to(r._rgba),l=a.slice();return n=n[o.cache],p(o.props,function(t,s){var o=s.idx,r=a[o],u=n[o],c=d[s.type]||{};null!==u&&(null===r?l[o]=u:(c.mod&&(u-r>c.mod/2?r+=c.mod:r-u>c.mod/2&&(r-=c.mod)),l[o]=i((u-r)*e+r,s)))}),this[s](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=u(e)._rgba;return u(t.map(i,function(t,e){return(1-n)*s[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,s=t[1]/255,o=t[2]/255,r=t[3],a=Math.max(n,s,o),l=Math.min(n,s,o),u=a-l,c=a+l,d=.5*c;return e=l===a?0:n===a?60*(s-o)/u+360:s===a?60*(o-n)/u+120:60*(n-s)/u+240,i=0===u?0:.5>=d?u/c:u/(2-c),[Math.round(e)%360,i,d,null==r?1:r]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],o=t[3],r=.5>=n?n*(1+i):n+i-n*i,a=2*n-r;return[Math.round(255*s(a,r,e+1/3)),Math.round(255*s(a,r,e)),Math.round(255*s(a,r,e-1/3)),o]},p(c,function(n,s){var o=s.props,r=s.cache,l=s.to,c=s.from;u.fn[n]=function(n){if(l&&!this[r]&&(this[r]=l(this._rgba)),n===e)return this[r].slice();var s,a=t.type(n),d="array"===a||"object"===a?n:arguments,h=this[r].slice();return p(o,function(t,e){var n=d["object"===a?t:e.idx];null==n&&(n=h[e.idx]),h[e.idx]=i(n,e)}),c?(s=u(c(h)),s[r]=h,s):u(h)},p(o,function(e,i){u.fn[e]||(u.fn[e]=function(s){var o,r=t.type(s),l="alpha"===e?this._hsla?"hsla":"rgba":n,u=this[l](),c=u[i.idx];return"undefined"===r?c:("function"===r&&(s=s.call(this,c),r=t.type(s)),null==s&&i.empty?this:("string"===r&&(o=a.exec(s),o&&(s=c+parseFloat(o[2])*("+"===o[1]?1:-1))),u[i.idx]=s,this[l](u)))})})}),u.hook=function(e){var i=e.split(" ");p(i,function(e,i){t.cssHooks[i]={set:function(e,s){var o,r,a="";if("transparent"!==s&&("string"!==t.type(s)||(o=n(s)))){if(s=u(o||s),!h.rgba&&1!==s._rgba[3]){for(r="backgroundColor"===i?e.parentNode:e;(""===a||"transparent"===a)&&r&&r.style;)try{a=t.css(r,"backgroundColor"),r=r.parentNode}catch(l){}s=s.blend(a&&"transparent"!==a?a:"_default")}s=s.toRgbaString()}try{e.style[i]=s}catch(l){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=u(e.elem,i),e.end=u(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},u.hook(r),t.cssHooks.borderColor={expand:function(t){var e={};return p(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(i),function(){function e(e){var i,n,s=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(s&&s.length&&s[0]&&s[s[0]])for(n=s.length;n--;)i=s[n],"string"==typeof s[i]&&(o[t.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(o[i]=s[i]);return o}function n(e,i){var n,s,r={};for(n in i)s=i[n],e[n]!==s&&(o[n]||(t.fx.step[n]||!isNaN(parseFloat(s)))&&(r[n]=s));return r}var s=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,n){t.fx.step[n]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(i.style(t.elem,n,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(i,o,r,a){var l=t.speed(o,r,a);return this.queue(function(){var o,r=t(this),a=r.attr("class")||"",u=l.children?r.find("*").addBack():r;u=u.map(function(){var i=t(this);return{el:i,start:e(this)}}),o=function(){t.each(s,function(t,e){i[e]&&r[e+"Class"](i[e])})},o(),u=u.map(function(){return this.end=e(this.el[0]),this.diff=n(this.start,this.end),this}),r.attr("class",a),u=u.map(function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,u.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(r[0])})})},t.fn.extend({addClass:function(e){return function(i,n,s,o){return n?t.effects.animateClass.call(this,{add:i},n,s,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,n,s,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,s,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,s,o,r){return"boolean"==typeof n||void 0===n?s?t.effects.animateClass.call(this,n?{add:i}:{remove:i},s,o,r):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,s,o)}}(t.fn.toggleClass),switchClass:function(e,i,n,s,o){return t.effects.animateClass.call(this,{add:i,remove:e},n,s,o)}})}(),function(){function i(e,i,n,s){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(s=n,n=i,i={}),t.isFunction(n)&&(s=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=s||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.11.4",save:function(t,i){for(var n=0;n<i.length;n++)null!==i[n]&&t.data(e+i[n],t[0].style[i[n]])},restore:function(t,i){var n,s;for(s=0;s<i.length;s++)null!==i[s]&&(n=t.data(e+i[s]),void 0===n&&(n=""),t.css(i[s],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(r){o=document.body}return e.wrap(n),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(s),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,s){return s=s||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(s[i]=o[0]*n+o[1])}),s}}),t.fn.extend({effect:function(){function e(e){function i(){t.isFunction(o)&&o.call(s[0]),t.isFunction(e)&&e()}var s=t(this),o=n.complete,a=n.mode;(s.is(":hidden")?"hide"===a:"show"===a)?(s[a](),i()):r.call(s[0],n,i)}var n=i.apply(this,arguments),s=n.mode,o=n.queue,r=t.effects.effect[n.effect];return t.fx.off||!r?s?this[s](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):o===!1?this.each(e):this.queue(o||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var s=i.apply(this,arguments);return s.mode="show",this.effect.call(this,s)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var s=i.apply(this,arguments);return s.mode="hide",this.effect.call(this,s)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var s=i.apply(this,arguments);return s.mode="toggle",this.effect.call(this,s)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}(),t.effects}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.Handlebars=e():t.Handlebars=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(){var t=new r.HandlebarsEnvironment;return h.extend(t,r),t.SafeString=l["default"],t.Exception=c["default"],t.Utils=h,t.escapeExpression=h.escapeExpression,t.VM=p,t.template=function(e){return p.template(e,t)},t}var s=i(7)["default"];e.__esModule=!0;var o=i(1),r=s(o),a=i(2),l=s(a),u=i(3),c=s(u),d=i(4),h=s(d),f=i(5),p=s(f),g=i(6),m=s(g),v=n();v.create=n,m["default"](v),v["default"]=v,e["default"]=v,t.exports=e["default"]},function(t,e,i){"use strict";function n(t,e){this.helpers=t||{},this.partials=e||{},s(this)}function s(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new c["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}),t.registerHelper("blockHelperMissing",function(e,i){var n=i.inverse,s=i.fn;if(e===!0)return s(this);if(e===!1||null==e)return n(this);if(p(e))return e.length>0?(i.ids&&(i.ids=[i.name]),t.helpers.each(e,i)):n(this);if(i.data&&i.ids){var r=o(i.data);r.contextPath=l.appendContextPath(i.data.contextPath,i.name),i={data:r}}return s(e,i)}),t.registerHelper("each",function(t,e){function i(e,i,s){u&&(u.key=e,u.index=i,u.first=0===i,u.last=!!s,d&&(u.contextPath=d+e)),a+=n(t[e],{data:u,blockParams:l.blockParams([t[e],e],[d+e,null])})}if(!e)throw new c["default"]("Must pass iterator to #each");var n=e.fn,s=e.inverse,r=0,a="",u=void 0,d=void 0;if(e.data&&e.ids&&(d=l.appendContextPath(e.data.contextPath,e.ids[0])+"."),g(t)&&(t=t.call(this)),e.data&&(u=o(e.data)),t&&"object"==typeof t)if(p(t))for(var h=t.length;h>r;r++)i(r,r,r===t.length-1);else{var f=void 0;for(var m in t)t.hasOwnProperty(m)&&(f&&i(f,r-1),f=m,r++);f&&i(f,r-1,!0)}return 0===r&&(a=s(this)),a}),t.registerHelper("if",function(t,e){return g(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||l.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),t.registerHelper("with",function(t,e){g(t)&&(t=t.call(this));var i=e.fn;if(l.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var n=o(e.data);n.contextPath=l.appendContextPath(e.data.contextPath,e.ids[0]),e={data:n}}return i(t,e)}),t.registerHelper("log",function(e,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(n,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}function o(t){var e=l.extend({},t);return e._parent=t,e}var r=i(7)["default"];e.__esModule=!0,e.HandlebarsEnvironment=n,e.createFrame=o;var a=i(4),l=r(a),u=i(3),c=r(u),d="3.0.1";e.VERSION=d;var h=6;e.COMPILER_REVISION=h;var f={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};e.REVISION_CHANGES=f;var p=l.isArray,g=l.isFunction,m=l.toString,v="[object Object]";n.prototype={constructor:n,logger:y,log:b,registerHelper:function(t,e){if(m.call(t)===v){if(e)throw new c["default"]("Arg not supported with multiple helpers");l.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(m.call(t)===v)l.extend(this.partials,t);else{if("undefined"==typeof e)throw new c["default"]("Attempting to register a partial as undefined");this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]}};var y={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(t,e){if("undefined"!=typeof console&&y.level<=t){var i=y.methodMap[t];(console[i]||console.log).call(console,e)}}};e.logger=y;var b=y.log;e.log=b},function(t,e,i){"use strict";function n(t){this.string=t}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e["default"]=n,t.exports=e["default"]},function(t,e,i){"use strict";function n(t,e){var i=e&&e.loc,o=void 0,r=void 0;i&&(o=i.start.line,r=i.start.column,t+=" - "+o+":"+r);for(var a=Error.prototype.constructor.call(this,t),l=0;l<s.length;l++)this[s[l]]=a[s[l]];Error.captureStackTrace&&Error.captureStackTrace(this,n),i&&(this.lineNumber=o,this.column=r)}e.__esModule=!0;var s=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e["default"]=n,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return c[t]}function s(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],i)&&(t[i]=arguments[e][i]);return t}function o(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1}function r(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return h.test(t)?t.replace(d,n):t}function a(t){return t||0===t?g(t)&&0===t.length?!0:!1:!0}function l(t,e){return t.path=e,t}function u(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=s,e.indexOf=o,e.escapeExpression=r,e.isEmpty=a,e.blockParams=l,e.appendContextPath=u;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},d=/[&<>"'`]/g,h=/[&<>"'`]/,f=Object.prototype.toString;e.toString=f;var p=function(t){return"function"==typeof t};p(/x/)&&(e.isFunction=p=function(t){return"function"==typeof t&&"[object Function]"===f.call(t)});var p;e.isFunction=p;var g=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===f.call(t):!1};e.isArray=g},function(t,e,i){"use strict";function n(t){var e=t&&t[0]||1,i=g.COMPILER_REVISION;if(e!==i){if(i>e){var n=g.REVISION_CHANGES[i],s=g.REVISION_CHANGES[e];throw new p["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+s+").")}throw new p["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){function i(i,n,s){s.hash&&(n=h.extend({},n,s.hash)),i=e.VM.resolvePartial.call(this,i,n,s);var o=e.VM.invokePartial.call(this,i,n,s);if(null==o&&e.compile&&(s.partials[s.name]=e.compile(i,t.compilerOptions,e),o=s.partials[s.name](n,s)),null!=o){if(s.indent){for(var r=o.split("\n"),a=0,l=r.length;l>a&&(r[a]||a+1!==l);a++)r[a]=s.indent+r[a];o=r.join("\n")}return o}throw new p["default"]("The partial "+s.name+" could not be compiled when running in runtime-only mode")}function n(e){var i=void 0===arguments[1]?{}:arguments[1],o=i.data;n._setup(i),!i.partial&&t.useData&&(o=u(e,o));var r=void 0,a=t.useBlockParams?[]:void 0;return t.useDepths&&(r=i.depths?[e].concat(i.depths):[e]),t.main.call(s,e,s.helpers,s.partials,o,a,r)}if(!e)throw new p["default"]("No environment passed to template");if(!t||!t.main)throw new p["default"]("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var s={strict:function(t,e){if(!(e in t))throw new p["default"]('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var i=t.length,n=0;i>n;n++)if(t[n]&&null!=t[n][e])return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:h.escapeExpression,invokePartial:i,fn:function(e){return t[e]},programs:[],program:function(t,e,i,n,s){var r=this.programs[t],a=this.fn(t);return e||s||n||i?r=o(this,t,a,e,i,n,s):r||(r=this.programs[t]=o(this,t,a)),r},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i=h.extend({},e,t)),i},noop:e.VM.noop,compilerInfo:t.compiler};return n.isTop=!0,n._setup=function(i){i.partial?(s.helpers=i.helpers,s.partials=i.partials):(s.helpers=s.merge(i.helpers,e.helpers),t.usePartial&&(s.partials=s.merge(i.partials,e.partials)))},n._child=function(e,i,n,r){if(t.useBlockParams&&!n)throw new p["default"]("must pass block params");if(t.useDepths&&!r)throw new p["default"]("must pass parent depths");return o(s,e,t[e],i,0,n,r)},n}function o(t,e,i,n,s,o,r){function a(e){var s=void 0===arguments[1]?{}:arguments[1];return i.call(t,e,t.helpers,t.partials,s.data||n,o&&[s.blockParams].concat(o),r&&[e].concat(r))}return a.program=e,a.depth=r?r.length:0,a.blockParams=s||0,a}function r(t,e,i){return t?t.call||i.name||(i.name=t,t=i.partials[t]):t=i.partials[i.name],t}function a(t,e,i){if(i.partial=!0,void 0===t)throw new p["default"]("The partial "+i.name+" could not be found");return t instanceof Function?t(e,i):void 0}function l(){return""}function u(t,e){return e&&"root"in e||(e=e?g.createFrame(e):{},e.root=t),e}var c=i(7)["default"];e.__esModule=!0,e.checkRevision=n,e.template=s,e.wrapProgram=o,e.resolvePartial=r,e.invokePartial=a,e.noop=l;var d=i(4),h=c(d),f=i(3),p=c(f),g=i(1)},function(t,e,i){(function(i){"use strict";e.__esModule=!0,e["default"]=function(t){var e="undefined"!=typeof i?i:window,n=e.Handlebars;t.noConflict=function(){e.Handlebars===t&&(e.Handlebars=n)}},t.exports=e["default"]}).call(e,function(){return this}())},function(t,e,i){"use strict";e["default"]=function(t){return t&&t.__esModule?t:{"default":t}},e.__esModule=!0}])}),function(){"use strict";window.C3APP={}}(),function(){"use strict";var t={BREAKPOINT:720};C3APP.Config=t}(),function(){"use strict";var t=jQuery,e={isMobile:function(){return t("body").width()<C3APP.Config.BREAKPOINT?!0:!1},isTouchDevice:function(){return!!("ontouchstart"in window)||!!("onmsgesturechange"in window)},supportsPushState:function(){return!(!window.history||!window.history.pushState)},supportsCors:function(){return t.support.cors},supportsLocalStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}},isSafari:function(){return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")},normalizeTitle:function(t){return t="undefined"==typeof t||""===t||null===t?"none":t.trim().replace(/[^\w\s]/gi,"").toLowerCase().replace(/[\s]/gi,"-")},__:function(t){return t in C3FMConfig.l10n?C3FMConfig.l10n[t]:t;

},sprintf:function(t){var e=0,i=arguments;return t.replace(/%s/g,function(){return e<i.length?i[e+=1]:""})},ucfirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},camelCase:function(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})},capitalCase:function(t){return this.ucfirst(t).replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})},supplant:function(t,e){return t.replace(/\{([^{}]*)\}/g,function(t,i){var n=e[i];return"string"==typeof n||"number"==typeof n?n:t})},isElementInViewport:function(e){if(e instanceof jQuery&&(e=e[0]),!e)return!1;var i=e.getBoundingClientRect(),n=t(window).height(),s=t(window).width();return i.top>=0&&i.left>=0&&i.bottom-i.height<=n&&i.right-i.width<=s},getOrientation:function(){return window.orientation},isPortrait:function(){return void 0===this.isLandscape()?!1:!this.isLandscape()},isLandscape:function(){switch(this.getOrientation()){case-90:case 90:return!0;case void 0:return void 0;default:return!1}},isOldIe:function(){return document.all&&!window.atob},getLastLogin:function(){return window.localStorage?window.localStorage.getItem("C3_LAST_LOGIN"):window.C3_LAST_LOGIN}};C3APP.Utils=e}(),function(){"use strict";var t={NAVIGATE_START:"router:start",NAVIGATE_FINISH:"router:finish"};C3APP.RouterEvent=t}(),function(){"use strict";var t={loadSoundCloud:function(t){!function(t){var e=document.createElement("script");e.type="text/javascript",e.async=!0,"function"==typeof t&&(e.onload=t),e.src=document.location.protocol+"//connect.soundcloud.com/sdk.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}(t)},loadJquery:function(t){!function(t){var e=document.createElement("script");e.type="text/javascript",e.async=!0,"function"==typeof t&&(e.onload=t),e.src=document.location.protocol+"//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}(t)}};C3APP.ScriptLoader=t}(),function(){"use strict";var t=jQuery,e={el:"#content",show:function(e,i){t(this.el).empty(),t(this.el).html(e);var n=!!parseInt(i.attr("data-logged-in"),10),s=parseInt(i.attr("data-selected-year"),10);Backbone.Mediator.pub(C3APP.RouterEvent.NAVIGATE_FINISH,{loggedIn:n,selectedYear:s})}};C3APP.RegionManager=e}(),function(){"use strict";C3APP.AnalyticsEvents={initialize:function(){var t=this,e=this.events();_.each(e,function(e){var i=t.handlerFor(e);Backbone.Mediator.sub(e,i,t)})},extend:function(t){return _.defaults(t,C3APP.AnalyticsEvents)},events:function(){return _.keys(this.handlers)},handlerFor:function(t){var e=this.handlers[t];return _.isFunction(e)?_.bind(e,this):jQuery.noop},handlers:{}}}(),function(){"use strict";var t=C3APP.Utils;C3APP.GoogleAnalyticsEvents=C3APP.AnalyticsEvents.extend({handlers:{"blog:nextPage":function(e){var i=t.sprintf("curl::%s::turl::%s",e.curl,e.turl);C3APP.GoogleAnalytics.subTrackEvent("blog","load-more",i)},"audioPlayer:play":function(e){var i=t.normalizeTitle(e.artist),n=t.normalizeTitle(e.title),s=t.sprintf("talent::%s::track::%s",i,n);C3APP.GoogleAnalytics.subTrackEvent("audioPlayer","play-audio",s)},"audioPlayer:nextTrack":function(){C3APP.GoogleAnalytics.subTrackEvent("audioPlayer","next-audio-track")},"audioPlayer:trackError":function(t){C3APP.GoogleAnalytics.subTrackEvent("audioPlayer","track-error",t.type)},"videoPlayer:play":function(e){var i=t.sprintf("type::%s::id::%s::title::%s::video-id::%s::video-title::%s::video-author::%s",e.type,e.id,t.normalizeTitle(e.title),e.videoData.video_id,t.normalizeTitle(e.videoData.title),t.normalizeTitle(e.videoData.author));C3APP.GoogleAnalytics.subTrackEvent("videoPlayer","play-video",i)},"videoPlayer:finish":function(e){var i=t.sprintf("type::%s::id::%s::title::%s::video-id::%s::video-title::%s::video-author::%s",e.type,e.id,t.normalizeTitle(e.title),e.videoData.video_id,t.normalizeTitle(e.videoData.title),t.normalizeTitle(e.videoData.author));C3APP.GoogleAnalytics.subTrackEvent("videoPlayer","finish-video",i)},"videoPlayer:pause":function(e){var i=t.sprintf("type::%s::id::%s::title::%s::video-id::%s::video-title::%s::video-author::%s",e.type,e.id,t.normalizeTitle(e.title),e.videoData.video_id,t.normalizeTitle(e.videoData.title),t.normalizeTitle(e.videoData.author));C3APP.GoogleAnalytics.subTrackEvent("videoPlayer","pause-video",i)},"videoPlayer:stop":function(e){var i=t.sprintf("type::%s::id::%s::title::%s::video-id::%s::video-title::%s::video-author::%s",e.type,e.id,t.normalizeTitle(e.title),e.videoData.video_id,t.normalizeTitle(e.videoData.title),t.normalizeTitle(e.videoData.author));C3APP.GoogleAnalytics.subTrackEvent("videoPlayer","stop-video",i)},"share:providerSelect":function(t){var e="provider::"+t.provider;C3APP.GoogleAnalytics.subTrackEvent("sharing","select-sharing-provider",e)},"share:sendComplete":function(t){var e="provider::"+t.provider+"::success::"+t.success;C3APP.GoogleAnalytics.subTrackEvent("sharing","share-complete",e)},"summary:expand":function(e){var i=t.sprintf("type::%s::id::%s::title::%s",e.type,e.id,e.title);C3APP.GoogleAnalytics.subTrackEvent("listPage","expand-list-section",i)},"summary:collapse":function(){},"summary:expandDetails":function(e){var i=e.box+"-expand-detail",n=t.sprintf("type::%s::id::%s::title::%s",e.type,e.id,e.title);C3APP.GoogleAnalytics.subTrackEvent("listPage",i,n)},"myfest:favorite":function(e){var i=t.normalizeTitle(e.title),n=e.action+"-"+e.type,s=t.sprintf("id::%s::title::%s::from-url::%s",e.id,i,e.url);C3APP.GoogleAnalytics.subTrackEvent("myfest",n,s)},"elist:subscribe":function(e){var i=t.sprintf("curl::%s::location::%s",e.curl,e.loc);C3APP.GoogleAnalytics.subTrackEvent("elist","subscribe-to-elist",i)},"tickets:viewDetails":function(e){var i=t.sprintf("id::%s::url::%s::status::%s",e.id,e.url,e.status);C3APP.GoogleAnalytics.subTrackEvent("tickets","view-ticket-details",i)},"tickets:beginPurchase":function(e){var i=t.sprintf("id::%s::url::%s::status::%s",e.id,e.url,e.status);C3APP.GoogleAnalytics.subTrackEvent("tickets","begin-ticket-purchase",i)},"analytics:pageview":function(t){C3APP.GoogleAnalytics.subPageview(t)},"notification:view":function(e){var i=t.normalizeTitle(e.message),n=t.sprintf("type::%s::id::%s::message::%s",e.type,e.id,i);C3APP.GoogleAnalytics.subTrackEvent("notification","view-notification",n)},"notification:click":function(e){var i=t.normalizeTitle(e.message),n=t.sprintf("type::%s::id::%s::message::%s::url::%s",e.type,e.id,i,e.url);C3APP.GoogleAnalytics.subTrackEvent("notification","click-notification",n)},"notification:close":function(e){var i=t.normalizeTitle(e.message),n=t.sprintf("type::%s::id::%s::message::%s",e.type,e.id,i);C3APP.GoogleAnalytics.subTrackEvent("notification","close-notification",n)},"billboard:hover":function(){},"billboard:click":function(e){var i=t.sprintf("index::%s::size::%s::url::%s::title::%s",e.index,e.size,e.url,e.title);C3APP.GoogleAnalytics.subTrackEvent("billboard","click-billboard",i)},"social:login":function(e){var i=t.sprintf("network::%s",e.lastLogin);C3APP.GoogleAnalytics.subTrackEvent("myfest","myfest-login",i)},"post-widget:pw-title-click":function(e){var i=t.normalizeTitle(e.title),n=t.sprintf("curl::%s::title::%s::turl::%s::type::%s",e.curl,i,e.turl,e.label);C3APP.GoogleAnalytics.subTrackEvent("post-widget","pw-title-click",n)},"post-widget:pw-cta-click":function(e){var i=t.normalizeTitle(e.title),n=t.sprintf("curl::%s::title::%s::turl::%s::type::%s",e.curl,i,e.turl,e.label);C3APP.GoogleAnalytics.subTrackEvent("post-widget","pw-cta-click",n)},"post-widget:pw-content-click":function(e){var i=t.normalizeTitle(e.title),n=t.sprintf("curl::%s::title::%s::turl::%s::type::%s",e.curl,i,e.turl,e.label);C3APP.GoogleAnalytics.subTrackEvent("post-widget","pw-content-click",n)},"post-widget:next-slide-click":function(e){var i=t.normalizeTitle(e.title),n=t.sprintf("index::%s::size::%s::url::%s::title::%s",e.index,e.size,e.url,i);C3APP.GoogleAnalytics.subTrackEvent("post-widget","next-slide-click",n)},"post-widget:prev-slide-click":function(e){var i=t.normalizeTitle(e.title),n=t.sprintf("index::%s::size::%s::url::%s::title::%s",e.index,e.size,e.url,i);C3APP.GoogleAnalytics.subTrackEvent("post-widget","previous-slide-click",n)},"post-widget:next-page-click":function(e){var i=t.normalizeTitle(e.title),n=t.sprintf("index::%s::size::%s::title::%s",e.index,e.size,i);C3APP.GoogleAnalytics.subTrackEvent("post-widget","next-page-click",n)},"post-widget:prev-page-click":function(e){var i=t.normalizeTitle(e.title),n=t.sprintf("index::%s::size::%s::title::%s",e.index,e.size,i);C3APP.GoogleAnalytics.subTrackEvent("post-widget","previous-page-click",n)},"socialposts:click":function(e){var i=t.sprintf("curl::%s::turl::%s::action::%s",e.curl,e.turl,e.action);C3APP.GoogleAnalytics.subTrackEvent("socialpost","social-click",i)},"socialposts:impression":function(e){var i=t.sprintf("curl::%s",e.curl);C3APP.GoogleAnalytics.subTrackEvent("socialpost","social-impression",i)},"calltoaction:click":function(e){var i=t.normalizeTitle(e.text),n=t.sprintf("curl::%s::title::%s::turl::%s",e.curl,i,e.turl);C3APP.GoogleAnalytics.subTrackEvent("calltoaction","cta-click",n)},"calltoaction:impression":function(e){var i=t.sprintf("url::%s",e.url);C3APP.GoogleAnalytics.subTrackEvent("calltoaction","cta-impression",i)},"relatedposts:click":function(e){var i=t.sprintf("curl::%s::turl::%s",e.curl,e.turl);C3APP.GoogleAnalytics.subTrackEvent("relatedposts","rp-click",i)},"relatedposts:impression":function(e){var i=t.sprintf("url::%s",e.url);C3APP.GoogleAnalytics.subTrackEvent("relatedposts","rp-impression",i)},"blognavigation:click":function(e){var i=t.sprintf("curl::%s::turl::%s",e.curl,e.turl);C3APP.GoogleAnalytics.subTrackEvent("blognavigation","bn-click",i)},"blognavigation:impression":function(e){var i=t.sprintf("url::%s",e.url);C3APP.GoogleAnalytics.subTrackEvent("blognavigation","bn-impression",i)},"form:submit":function(e){var i=t.normalizeTitle(e.id),n=t.sprintf("url::%s::id::%s",e.url,i);C3APP.GoogleAnalytics.subTrackEvent("form","submit",n)},"feedback:open":function(e){var i=t.sprintf("curl::%s",e.curl);C3APP.GoogleAnalytics.subTrackEvent("feedback","open",i)},"audioPlayer:UI:playButtonClicked":function(t){var e=!t.isPlaying;e?C3APP.GoogleAnalytics.subTrackEvent("myfestbar","myfestbar-play"):C3APP.GoogleAnalytics.subTrackEvent("myfestbar","myfestbar-pause")},onTracklistBtnClick:function(){C3APP.GoogleAnalytics.subTrackEvent("myfestbar","myfestbar-track-listing")},onVolumeBtnClick:function(){C3APP.GoogleAnalytics.subTrackEvent("myfestbar","myfestbar-volume")},"change:track-position":function(){C3APP.GoogleAnalytics.subTrackEvent("myfestbar","myfestbar-progressbar")},"audioPlayer:UI:trackSelected":function(){C3APP.GoogleAnalytics.subTrackEvent("myfestbar","myfestbar-track-select")},"vendorSlider:next":function(t){var e=C3APP.Utils.sprintf("curl::%s::categories::%s",t.curl,t.categories);C3APP.GoogleAnalytics.subTrackEvent("vendor-slider","vs-next",e)},"vendorSlider:click":function(t){var e=C3APP.Utils.sprintf("curl::%s::categories::%s::turl::%s",t.curl,t.categories,t.turl);C3APP.GoogleAnalytics.subTrackEvent("vendor-slider","vs-click",e)},"faq:click":function(e){var i=t.normalizeTitle(e.question),n=C3APP.Utils.sprintf("curl::%s::question::%s",e.curl,i);C3APP.GoogleAnalytics.subTrackEvent("faq","faq-click",n)},"pulldown:open":function(t){var e=C3APP.Utils.sprintf("curl::%s::target::%s",t.curl,t.target);C3APP.GoogleAnalytics.subTrackEvent("pulldown","pulldown-open",e)},"search:submit":function(t){var e=C3APP.Utils.normalizeTitle(t.terms),i=C3APP.Utils.sprintf("curl::%s::location::%s::terms::%s",t.curl,t.location,e);C3APP.GoogleAnalytics.subTrackEvent("search","submit",i)},"alert:click":function(t){var e=C3APP.Utils.normalizeTitle(t.message),i=C3APP.Utils.sprintf("curl::%s::type::%s::turl::%s::message::%s",t.curl,t.type,t.turl,e);C3APP.GoogleAnalytics.subTrackEvent("alert","alert-click",i)},"alert:impression":function(t){var e=C3APP.Utils.normalizeTitle(t.message),i=C3APP.Utils.sprintf("curl::%s::type::%s::turl::%s::message::%s",t.curl,t.type,t.turl,e);C3APP.GoogleAnalytics.subTrackEvent("alert","alert-impression",i)},"alert:dismiss":function(t){var e=C3APP.Utils.normalizeTitle(t.message),i=C3APP.Utils.sprintf("curl::%s::type::%s::turl::%s::message::%s",t.curl,t.type,t.turl,e);C3APP.GoogleAnalytics.subTrackEvent("alert","alert-dismiss",i)},"content-grid:click":function(e){var i="curl::%s::turl::%s::type::%s::click-target::%s",n=t.sprintf(i,e.curl,e.turl,e.type,e.target);("blog"===e.type||"merch"===e.type)&&(n+=t.sprintf("::categories::%s",e.categories)),C3APP.GoogleAnalytics.subTrackEvent("content-grid","cg-click",n)},"content-grid:nextPage":function(e){var i=t.sprintf("curl::%s::turl::%s",e.curl,e.turl);C3APP.GoogleAnalytics.subTrackEvent("content-grid","cg-load-more",i)},"content-grid:filter":function(e){var i=t.sprintf("curl::%s::type::%s::state::%s",e.curl,e.type,e.state);C3APP.GoogleAnalytics.subTrackEvent("content-grid","cg-filter",i)},"myfest:print":function(){C3APP.GoogleAnalytics.subTrackEvent("myfest","print","")},"contest:start":function(e){var i=t.sprintf("curl::%s",e.curl);C3APP.GoogleAnalytics.subTrackEvent("contest","contest-start",i)},"contest:button-click":function(e){var i=t.sprintf("curl::%s",e.curl);C3APP.GoogleAnalytics.subTrackEvent("contest","contest-button-click",i)},"contest:enter":function(e){var i=t.sprintf("curl::%s::id::%s",e.curl,e.id);C3APP.GoogleAnalytics.subTrackEvent("contest","contest-enter",i)},"contest:cta":function(e){var i=t.sprintf("curl::%s::turl::%s",e.curl,e.turl);C3APP.GoogleAnalytics.subTrackEvent("contest","contest-cta-button",i)},"modal:open":function(e){var i=t.sprintf("curl::%s::modal::%s",location.pathname,e.template);C3APP.GoogleAnalytics.subTrackEvent("myfest","myfest-modal-open",i)},"headerbar:social-click":function(e){var i=t.sprintf("curl::%s::turl::%s",e.curl,e.turl);C3APP.GoogleAnalytics.subTrackEvent("header-bar","social-click",i)},"headerbar:elist-open-click":function(e){var i=t.sprintf("curl::%s",e.curl);C3APP.GoogleAnalytics.subTrackEvent("header-bar","elist-open-click",i)},"headerbar:myfest-click":function(e){var i=t.sprintf("curl::%s::turl::%s",e.curl,e.turl);C3APP.GoogleAnalytics.subTrackEvent("header-bar","myfest-click",i)},"headerbar:language-click":function(e){var i=t.sprintf("curl::%s::turl::%s",e.curl,e.turl);C3APP.GoogleAnalytics.subTrackEvent("header-bar","language-click",i)},"footer:social-click":function(e){var i=t.sprintf("curl::%s::turl::%s",e.curl,e.turl);C3APP.GoogleAnalytics.subTrackEvent("footer","social-click",i)},"nav:click":function(e){var i=t.sprintf("curl::%s::turl::%s",e.curl,e.turl);C3APP.GoogleAnalytics.subTrackEvent("nav","nav-click",i)}}})}(),function(){"use strict";C3APP.MailChimpGoalEvents=C3APP.AnalyticsEvents.extend({handlers:{"post-widget:pw-title-click":function(){C3APP.MailChimpGoal.processEvent("post-widget:pw-title-click")},"post-widget:pw-cta-click":function(){C3APP.MailChimpGoal.processEvent("post-widget:pw-cta-click")},"post-widget:pw-content-click":function(){C3APP.MailChimpGoal.processEvent("post-widget:pw-content-click")},"post-widget:next-slide-click":function(){C3APP.MailChimpGoal.processEvent("post-widget:next-slide-click")},"post-widget:prev-slide-click":function(){C3APP.MailChimpGoal.processEvent("post-widget:previous-slide-click")},"social:login":function(){C3APP.MailChimpGoal.processEvent("myfest:login")}}})}(),function(){"use strict";var t={gaId:C3FMConfig.analytics.gaId,uaId:C3FMConfig.analytics.uaId,domain:C3FMConfig.analytics.domain,loadScripts:function(t){t=t||function(){},function(e,i,n,s,o,r,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,r=i.createElement(n),a=i.getElementsByTagName(n)[0],r.async=1,r.src=s,"function"==typeof t&&(r.onload=t),a.parentNode.insertBefore(r,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga")},initAnalytics:function(){"function"==typeof ga&&(ga("create",this.uaId,this.domain,{allowLinker:!0}),ga("require","displayfeatures"),ga("require","linkid","linkid.js"),ga("require","linker"))},subPageview:function(t){"function"==typeof ga&&ga("send","pageview",t)},subTrackEvent:function(t,e,i,n){"function"==typeof ga&&ga("send","event",t,e,i,n)}};C3APP.GoogleAnalytics=t}(),function(){"use strict";window.$mcGoal={settings:{uuid:C3FMConfig.mailchimp.uuid,dc:C3FMConfig.mailchimp.dc}};var t={initialize:function(){Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_FINISH,this.process,this),window.$mcGoal.settings.dc||(window.$mcGoal.settings.dc="us3")},loadScripts:function(t){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.defer=!0,e.onload=t,e.src=("https:"===document.location.protocol?"https://s3.amazonaws.com/downloads.mailchimp.com":"http://downloads.mailchimp.com")+"/js/goal.min.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)},process:function(){$mcGoal.process()},processEvent:function(t){$mcGoal.processEvent(t)}};C3APP.MailChimpGoal=t}(),function(t){"use strict";var e={config:{elements:{elistForm:"#elist-signup",emailInput:"input[name=email]",responseContainer:".elist-response",currentForm:""},classes:{error:"is-invalid",success:"is-valid",message:"msg"},messages:{success:'<p class="msg is-valid"></p>',error:'<p class="msg is-invalid">Fix the invalid email address and try again.</p>',unknown:'<p class="msg is-invalid">An error has occured. Please try again.</p>'}},initialize:function(){var e=this;t(".js-elist-form").each(function(){var i="#"+t(this).attr("id");t("body").on("submit",i,function(i){i.preventDefault(),e.config.elements.currentForm=this;var n=t(this).find(e.config.elements.emailInput).val();e.subscribe(n)}),t("body").on("success",i,function(t,i){e.displaySuccess(i)}),t("body").on("error",i,function(t,i){e.displayError(i)})})},displaySuccess:function(e){e=e||null;var i=t(this.config.elements.currentForm).next(this.config.elements.responseContainer);return t(this.config.elements.currentForm).hide(),null===e?void i.html(this.config.messages.success).children(".is-valid").text(i.attr("data-success")):void i.html(this.config.messages.success).children(".is-valid").text(i.attr("data-success"))},displayError:function(e){e=e||null;var i=t(this.config.elements.currentForm).next(this.config.elements.responseContainer),n=t(this.config.elements.currentForm).find(this.config.elements.emailInput);n.addClass(this.config.classes.error),n.next().addClass(this.config.classes.error),null===e&&i.html(this.config.messages.unknown),i.html('<p class="msg is-invalid">'+e+"</p>")},subscribe:function(e){var i=this,n={action:"elist_subscribe",email:e},s=t(i.config.elements.currentForm);t.ajax({url:C3FMConfig.ajaxUrl,data:n,dataType:"jsonp",success:function(n){"OK"===n.status?t(i.config.elements.currentForm).trigger("success",n.msg):t(i.config.elements.currentForm).trigger("error",n.msg),i.pubSignUp(e,s)},error:function(){s.trigger("error"),i.pubSignUp(e,s)}})},pubSignUp:function(t,e){var i=e[0].parentElement.id,n={curl:location.pathname,email:t};n.loc="header-connect"===i||formI?"header-bar":"footer-connect"===i?"footer":n.curl,Backbone.Mediator.pub("elist:subscribe",n)}};C3APP.ExactTarget=e}(jQuery),function(){"use strict";var t=C3APP.Utils,e=function(){var e={apiKey:C3FMConfig.tbits.apiKey,_callback:null,_requestUid:null,_popup:null,s4:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},guid:function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()},checkLoginStatus:function(){$.ajax({url:"https://tradablebits.com/crm/login_status?request_uid="+e._requestUid,dataType:"jsonp",success:function(t){"done"===t.status&&(window.sessionUid=t.session_uid,e._callback(window.sessionUid))}})},onForgotPassword:function(){e._popup.close(),alert("You forgot your password?!?!")},handleMessages:function(t){if(t.data){var i="on"+t.data.charAt(0).toUpperCase()+t.data.slice(1);"function"==typeof e[i]&&(Backbone.Mediator.pub("social:"+i),console.log("MediatorEvent: ","social:"+i),e[i].apply(this,[]))}else e.checkLoginStatus()}},i={initSession:function(t,i,n){if(e._callback=i,null!==window.sessionUid)return void i(window.sessionUid);var s=this.getRequestUid(),o="https://tradablebits.com/crm/connect?account_id="+t+"&request_uid="+s;n&&n.login_type&&(o+="&preferred_login_type="+n.login_type);var r=$(window).width(),a=(r-500)/2,l="directories=0,left="+a+",location=0,menubar=0,resizable=0,status=0,titlebar=0,toolbar=0,top=100,width=500,height=550";e._popup=window.open(o,"SignIn",l),window.onmessage=$.proxy(e.handleMessages,this),this.bringToFront()},closeSession:function(){window.sessionUid=null},getRequestUid:function(){return e._requestUid?e._requestUid:(e._requestUid=e.guid(),e._requestUid)},getSession:function(i){var n=t.sprintf("https://tradablebits.com/api/v1/sessions/%s?api_key=%s",i,e.apiKey);return $.ajax({url:n,dataType:"json"})},getSessionFan:function(i){var n=t.sprintf("https://tradablebits.com/api/v1/sessions/%s/fan?api_key=%s",i,e.apiKey);return $.ajax({url:n,dataType:"json"})},getFan:function(t){return $.ajax({url:C3FMConfig.ajaxUrl,data:{action:"tbits_get_fan",sessionUid:t},dataType:"json"})},postSessionFan:function(i,n){var s=t.sprintf("https://tradablebits.com/api/v1/sessions/%s/fan?api_key=%s",i,e.apiKey);return $.ajax({type:"POST",url:s,dataType:"json",data:n})},getSessionStatus:function(t){return $.ajax({url:"https://tradablebits.com/crm/session_status",dataType:"jsonp",data:{session_uid:t}})},bringToFront:function(){e._popup.focus()}};return i}();C3APP.TradableBits=e}(),function(t){"use strict";var e=32,i=32,n={initialize:function(){t('input[type="checkbox"], input[type="radio"]').each(function(){if(!t(this).attr("data-initialized")){var s=t(this),o=s.before("<span></span>").prev(),r=s.attr("type"),a="checkbox"===r?e:i,l="0 -"+2*a+"px";o.addClass(r),s.addClass("styled"),s.attr("data-initialized",1),s.prop("checked")&&o.css({"background-position":l}),s.on("change",n.clear),s.prop("disabled")?o.addClass("disabled"):(o.on("mousedown",n.pushed),o.on("mouseup",n.check))}}),t("select").each(function(){if(!t(this).attr("data-initialized")){var e=t(this),i=null,s=e.find("option"),o=s.filter(":selected"),r=o.text();e.addClass("styled"),e.attr("data-initialized",1),e.wrap("<div/>").parent().css("position","relative"),i=e.before("<span/>").prev(),i.addClass("select"),i.attr("id","select-"+e.attr("name")),i.append(r),e.prop("disabled")?i.addClass("is-disabled"):(e.on("change",n.choose),e.on("focus",function(){t(this).prev("span").addClass("is-focused")}),e.on("blur",function(){t(this).prev("span").removeClass("is-focused")}))}}),t(document).on("mouseup",n.clear)},pushed:function(){t('input[type="checkbox"], input[type="radio"]').each(function(){var n=t(this),s=t(this).next(),o=s.prop("checked"),r=s.attr("type"),a="checkbox"===r?e:i,l="";l=o?"0 -"+3*a+"px":"0 -"+a+"px",n.css({"background-position":l})})},check:function(){var n=t(this),s=n.next(),o=s.prop("checked"),r=s.attr("type");if(o&&"checkbox"===r)n.css({"background-position":"0 0"}),s.prop("checked",!1);else{if("checkbox"===r)n.css({"background-position":"0 -"+2*e+"px"});else{n.css({"background-position":"0 -"+2*i+"px"});var a=s.attr("name");t('input[type="radio"]').each(function(){var e=t(this);e.attr("name")!==a||e.eq(s)||e.prev().css({"background-position":"0 0"})})}s.prop("checked",!0)}},clear:function(){t('input[type="checkbox"], input[type="radio"]').each(function(){var n=t(this),s=n.prop("checked"),o="0 0",r="checkbox"===n.attr("type")?e:i;s&&(o="0 -"+2*r+"px"),n.prev().css({"background-position":o})})},choose:function(){t("option:selected").each(function(){var e=t(this),i=e.parent("select"),n=i.prev("span");i.val(e.val()),n.text(e.text())})}};C3APP.CFE=n}(jQuery),function(t){"use strict";var e={elements:{gallery:".gallery",galleryPage:".gallery__page",navigation:".gallery__nav",nextBtn:".gallery__next-btn",prevBtn:".gallery__prev-btn"},classes:{disabled:"is-disabled",active:"is-active"}},i={initialize:function(){var i=t(e.elements.gallery);this._bindEvents(),i.each(function(){var i=t(this),n=i.find(e.elements.galleryPage),s=n.length;1===s&&i.find(e.elements.navigation).addClass(e.classes.disabled),n.each(function(){"1"===t(this).attr("data-page")?t(this).addClass(e.classes.active):t(this).hide()})}),t(e.elements.gallery).trigger("update-buttons"),t(e.elements.gallery).each(function(){var e=t(this),i=e.attr("id");t('a[rel="'+i+'"]').each(function(){var e=void 0===t(this).attr("data-description")?!1:!0,i=function(){return e?!1:!0},n=function(){return e?!1:720},s=function(){return e?!1:480},o=function(){var i,n,s,o,r,a,l=t(this);return e?(i=l.attr("title"),n=l.attr("data-description"),s=l.data("data-photopage-url"),o=l.attr("title"),r="",r='<div id="cboxLinks"><table height="30"><tr><td valign="middle" align="right"><a href="http://twitter.com/share" class="twitter-share-button" data-url="'+s+'" data-text="'+o+'" width="50">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></td>',r+='<td valign="middle" align="right">',r+='<iframe src="//www.facebook.com/plugins/like.php?href='+s+'&send=false&layout=button_count&width=120&show_faces=false&action=like&colorscheme=light&font&height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:120px; height:21px;" allowTransparency="true"></iframe>',r+="</table></div>",'<span class="cboxTitle">'+i+'</span><span class="cboxPhotoDescription">'+n+"</span>"):(a=l.attr("data-video-url"),i=l.attr("title"),r="",r='<div id="cboxLinks"><table height="30"><tr><td valign="middle" align="right"><a href="http://twitter.com/share" class="twitter-share-button" data-url="'+a+'" data-text="'+i+'" width="50">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></td>',r+='<td valign="middle" align="right">',r+='<iframe src="//www.facebook.com/plugins/like.php?href='+a+'&send=false&layout=button_count&width=120&show_faces=false&action=like&colorscheme=light&font&height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:120px; height:21px;" allowTransparency="true"></iframe>',r+="</table></div>",'<span class="cboxTitle">'+i+"</span>")};t(this).colorbox({transition:"none",iframe:i,opacity:.7,innerWidth:n,innerHeight:s,maxHeight:"90%",maxWidth:"90%",title:o,close:"&times;",next:">",previous:"<"})})})},updateButtons:function(){var i=t(this),n=i.find("."+e.classes.active).next(e.elements.galleryPage).length,s=i.find("."+e.classes.active).prev(e.elements.galleryPage).length;0!==n?i.find(e.elements.nextBtn).removeClass(e.classes.disabled):i.find(e.elements.nextBtn).addClass(e.classes.disabled),0!==s?i.find(e.elements.prevBtn).removeClass(e.classes.disabled):i.find(e.elements.prevBtn).addClass(e.classes.disabled)},nextPage:function(i){i.preventDefault();var n=t(i.currentTarget),s=n.find("."+e.classes.active),o=s.next(e.elements.galleryPage).length;o&&s.hide().removeClass(e.classes.active).next(e.elements.galleryPage).addClass(e.classes.active).show()},prevPage:function(i){i.preventDefault();var n=t(i.currentTarget),s=n.find("."+e.classes.active),o=s.prev(e.elements.galleryPage).length;o&&s.hide().removeClass(e.classes.active).prev(e.elements.galleryPage).addClass(e.classes.active).show()},_bindEvents:function(){t(e.elements.navigation).on("click",function(){t(this).parents(e.elements.gallery).trigger("update-buttons")}),t(e.elements.prevBtn).on("click",function(){t(this).parents(e.elements.gallery).trigger("prev-page")}),t(e.elements.nextBtn).on("click",function(){t(this).parents(e.elements.gallery).trigger("next-page")}),t(e.elements.gallery).on("update-buttons",this.updateButtons),t(e.elements.gallery).on("next-page",this.nextPage),t(e.elements.gallery).on("prev-page",this.prevPage)}};C3APP.Gallery=i}(jQuery),function(){"use strict";var t=jQuery,e=C3APP.Utils,i={players:[],displayInterval:null,currentVideo:null,loadScripts:function(t){var e=this;!function(t){var e=document.createElement("script");e.type="text/javascript",e.async=!0,"function"==typeof t&&(e.onload=t),e.src="//www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}(t),window.onYouTubeIframeAPIReady=function(){e.onYouTubeIframeAPIReady()}},onYouTubeIframeAPIReady:function(){this.initialize()},initialize:function(){var e=this;Backbone.Mediator.sub("billboard:changeChannel",this.changeChannel,this),Backbone.Mediator.sub("summary:expand",this.initPlayers,this),Backbone.Mediator.sub("summary:collapse",function(i){i.find('iframe[src*="youtu"]').each(function(){e.stopVideo(t(this).attr("id"))})},this),this.initPlayers()},initPlayers:function(){var e=this;t('iframe[src*="youtu"]').each(function(){var i=t(this),n=i.attr("id"),s=i.attr("src");e.players[n]||(i.removeAttr("src"),t("#"+n).on("load",function(){e.players[n]={},e.players[n].player=e.attachPlayer(n,{autoPlay:i.attr("data-autoplay")})}),i.attr("src",s))})},getPlayer:function(t){return void 0!==typeof this.players[t]?this.players[t].player:void 0},attachPlayer:function(t,e){var i={events:{onReady:_.bind(this.onPlayerReady,this),onStateChange:_.bind(this.onPlayerStateChange,this),onError:_.bind(this.onPlayerError,this)}};return e.autoPlay&&(i.events.onReady=_.bind(this.autoPlay,this)),new YT.Player(t,i)},onPlayerStateChange:function(i){var n=i.target,s={id:t(n.a).attr("data-post-id"),title:e.normalizeTitle(t(n.a).attr("data-post-title")),type:t(n.a).attr("data-post-type"),videoData:n.getVideoData()};switch(i.data){case-1:break;case YT.PlayerState.PLAYING:Backbone.Mediator.pub("videoPlayer:play",s),this.currentVideo&&this.currentVideo!==n&&this.currentVideo.stopVideo(),this.currentVideo=n;break;case YT.PlayerState.ENDED:Backbone.Mediator.pub("videoPlayer:finish",s);break;case YT.PlayerState.PAUSED:Backbone.Mediator.pub("videoPlayer:pause",s);break;case YT.PlayerState.BUFFERING:break;case YT.PlayerState.CUED:}},stopVideo:function(i){var n=this.getPlayer(i);if("undefined"!=typeof n){var s={id:t(n.a).attr("data-post-id"),title:e.normalizeTitle(t(n.a).attr("data-post-title")),type:t(n.a).attr("data-post-type"),videoData:n.getVideoData()};n.stopVideo(),Backbone.Mediator.pub("videoPlayer:stop",s)}},pauseVideo:function(t){t.pauseVideo()},displayYTprogress:function(){},autoPlay:function(t){t.target.playVideo()},changeChannel:function(e){var i=e.target.parent(),n=e.target,s=e.target.attr("id"),o="#"+s,r=t(e.trigger).attr("data-src");this.players[s].player.destroy(),i.append(n),t(o).attr({src:r,"data-autoplay":!0}),this.initPlayers()}};C3APP.YouTube=i}(),function(){"use strict";var t=jQuery,e={players:[],loadScripts:function(t){var e=this;!function(t){var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.onload="function"==typeof t?t:_.bind(e.initialize,e),i.src="//f.vimeocdn.com/js/froogaloop2.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n)}(t)},initialize:function(){this.initPlayers()},initPlayers:function(){var e=this;t('iframe[src*="player.vimeo"]').each(function(i){t(this).attr("id")||t(this).attr("id","vimeo-"+i);var n=t(this).attr("id");e.players[n]=[],e.players[n].player=e.attachPlayer(n)})},getPlayer:function(t){return void 0!==typeof this.players[t]?this.players[t].player:void 0},attachPlayer:function(t){var e=$f(t),i={id:t,title:"",type:"vimeo",videoData:{video_id:e.element.src,title:"",author:""}};return e.addEvent("ready",function(){e.addEvent("play",function(){Backbone.Mediator.pub("videoPlayer:play",i)}),e.addEvent("pause",function(){Backbone.Mediator.pub("videoPlayer:pause",i)}),e.addEvent("finish",function(){Backbone.Mediator.pub("videoPlayer:finish",i)})}),e}};C3APP.Vimeo=e}(),function(){"use strict";C3APP.TrackingHelper={initialize:function(){var t=this,e=this.vendors();_.each(e,function(e){t.handlerFor(e).apply(this,[])})},vendors:function(){return _.keys(this.handlers)},handlerFor:function(t){var e=this.handlers[t];return _.isFunction(e)?_.bind(e,this):jQuery.noop;

},handlers:{crazyEgg:function(){var t=Math.floor((new Date).getTime()/36e5);$.getScript("//dnn506yrbagrg.cloudfront.net/pages/scripts/0021/3861.js?"+t)},krux:function(){window.Krux||((window.Krux=function(){Krux.q.push(arguments)}).q=[]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0;var e,i=(e=location.href.match(/\bkxsrc=([^&]+)/))&&decodeURIComponent(e[1]);t.src=/^https?:\/\/([a-z0-9_\-\.]+\.)?krxd\.net(:\d{1,5})?\//i.test(i)?i:"disable"===i?"":("https:"===location.protocol?"https:":"http:")+"//cdn.krxd.net/controltag?confid=Jsqb6vnz";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}()},comscore:function(){window._comscore=window._comscore||[],window._comscore.push({c1:"2",c2:"3005317"}),function(){var t=document.createElement("script"),e=document.getElementsByTagName("script")[0];t.async=!0,t.src=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",e.parentNode.insertBefore(t,e)}()},floodlight:function(){var t=Math.random()+"",e=1e13*t;$("body").append('<iframe src="http://4371738.fls.doubleclick.net/activityi;src=4371738;type=unive187;cat=aclun679;ord='+e+'?" width="1" height="1" frameborder="0" style="display:none"></iframe>')}}}}(),function(){"use strict";var t=jQuery,e=Backbone.Router.extend({regionManager:null,routes:{"*uri":"defaultRoute"},initialize:function(t){this.regionManager=t.regionManager},defaultRoute:function(e){var i=this;if(null===e){e="";var n=window.location.search.substring(1);n&&(e="?"+n)}var s=this.getBaseUrl()+e;C3APP.isActive=!0,Backbone.Mediator.pub(C3APP.RouterEvent.NAVIGATE_START),t.get(s).done(function(n,s,o){var r=t("<div/>").append(n),a=r.find("#logged-in"),l=r.find(".js-language-link"),u=r.find("#footer-stack-image").find("img").first();return r.find("#is-static-page").length?void(location.href="/index.php"):(document.title=t(n).filter("title").text(),r.find(".gform_wrapper").length?t.when(t.ajax({url:"/wp/wp-content/plugins/gravityforms/js/gravityforms.js",dataType:"script",cache:!0}),t.ajax({url:"/wp/wp-content/plugins/gravityforms/js/conditional_logic.js",dataType:"script",cache:!0})).done(function(){l.each(function(){var e=t(this);t(".js-language-link").each(function(){var i=t(this);e.attr("data-lang-code")===i.attr("data-lang-code")&&i.attr("href",e.attr("href"))})}),i.regionManager.show(r.find("#content").html(),a,u)}):(l.each(function(){var e=t(this);t(".js-language-link").each(function(){var i=t(this);e.attr("data-lang-code")===i.attr("data-lang-code")&&i.attr("href",e.attr("href"))})}),i.regionManager.show(r.find("#content").html(),a,u)),Backbone.history.navigate(e,!0),void Backbone.Mediator.pub("analytics:pageview",e))}).fail(function(n,s,o){var r=t("<div/>").append(n.responseText),a=r.find("#logged-in"),l=r.find("#footer-stack-image").find("img").first();document.title=t(n.responseText).filter("title").text(),i.regionManager.show(r.find("#content").html(),a,l),Backbone.history.navigate(e,!0),Backbone.Mediator.pub("analytics:pageview",e)})},getBaseUrl:function(){return location.protocol+"//"+location.hostname+(location.port&&":"+location.port)+"/"}});C3APP.Router=e}(),function(){"use strict";C3APP.AudioPlayer={},C3APP.AudioPlayer.UI={}}(),function(){"use strict";var t={SOUNDCLOUD_CLIENT_ID:C3FMConfig.audioplayer.clientId,EMPTY_PLAYLIST_MESSAGE:"No tracks",BREAKPOINT:480};C3APP.AudioPlayer.AudioPlayerConfig=t}(),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.audioPlayerTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return'<ul class="audioplayer__inner">\n\n</ul>\n'},useData:!0}),this.Handlebars.templates.soundcloudWidgetTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return'<iframe \n	style=\'display:block\'\n	id="soundcloud_widget"\n	src="http://w.soundcloud.com/player/?url=https://soundcloud.com/depeche_mode/heaven&show_artwork=false&liking=false&sharing=false&auto_play=false"\n	width="420"\n	height="120"\n	frameborder="no">\n</iframe>'},useData:!0}),this.Handlebars.templates.trackListTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return'<div class="audioplayer__tracks-inner">\n    <div class="grid">\n\n    </div>\n</div>\n<div class="audioplayer__track-nav-container">\n    <i class="fa fa-chevron-up prev-tracks is-disabled"></i>\n    <i class="fa fa-chevron-down next-tracks"></i>\n</div>'},useData:!0}),this.Handlebars.templates.controlsTemplate=Handlebars.template({1:function(t,e,i,n){return"	<div class='control btn-tracklist'>\n			\n	</div>\n\n	<div class='control btn-volume'>\n\n	</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var s;return null!=(s=e.unless.call(t,null!=t?t.isMobile:t,{name:"unless",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?s:""},useData:!0}),this.Handlebars.templates.playBtnTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return'<i class="fa fa-play"></i>'},useData:!0}),this.Handlebars.templates.trackListBtnTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return'<i class="fa fa-caret-down"></i>'},useData:!0}),this.Handlebars.templates.previousTrackBtnTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return'<i class="fa fa-step-backward"></i>'},useData:!0}),this.Handlebars.templates.nextTrackBtnTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return'<i class="fa fa-step-forward"></i>'},useData:!0}),this.Handlebars.templates.volumeBtnTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return'<i class="fa fa-volume-up"></i>\n<ul class="audioplayer__volume-container" data-state="closed">\n    <li class="audioplayer__volume">\n        <div class="audioplayer__volume-dragger"></div>\n    </li>\n</ul>'},useData:!0}),this.Handlebars.templates.screenTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return'<ul class="audioplayer__screen-inner">\n    <li class="audioplayer__marquee"></li>\n\n</ul>'},useData:!0}),this.Handlebars.templates.progressTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return'<li class="audioplayer__time">0:00</li>\n<li class="audioplayer__progress">\n    <div class="audioplayer__elapsed"></div>\n</li>'},useData:!0}),this.Handlebars.templates.scrollbarTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return'<div class="audioplayer__dragger"></div>'},useData:!0}),this.Handlebars.templates.trackTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){var s,o,r=e.helperMissing,a="function";return'<div class="audioplayer__track" data-style="background-image: linear-gradient(rgba(0,0,0,0.333), rgba(0,0,0,0.333)), url('+(null!=(o=null!=(o=e.image||(null!=t?t.image:t))?o:r,s=typeof o===a?o.call(t,{name:"image",hash:{},data:n}):o)?s:"")+')">\n    <p class="audioplayer__artist-name">'+(null!=(o=null!=(o=e.artist||(null!=t?t.artist:t))?o:r,s=typeof o===a?o.call(t,{name:"artist",hash:{},data:n}):o)?s:"")+'<span class="audioplayer__track-title">'+(null!=(o=null!=(o=e.unescapedTitle||(null!=t?t.unescapedTitle:t))?o:r,s=typeof o===a?o.call(t,{name:"unescapedTitle",hash:{},data:n}):o)?s:"")+"</span></p>\n</div>"},useData:!0}),this.Handlebars.templates.volumeSliderTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return"\n<!--<div class='control btn-mute'></div>-->\n<li class=\"audioplayer__volume\">\n    <div class=\"audioplayer__volume-dragger\"></div>\n</li>\n<!--<div class='control btn-max'></div>-->\n"},useData:!0}),this.Handlebars.templates.volumeTemplate=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,i,n){return""},useData:!0}),function(){"use strict";var t=Backbone.Model.extend({defaults:{initialized:null,isPlaying:!1,isTracklistOpen:!1,isVolumeOpen:!1,nowPlaying:null,scroll:0,position:null,duration:0,track:"No Track",trackList:null,volume:60}});C3APP.AudioPlayer.AudioPlayerModel=t}(),function(){"use strict";var t=Backbone.Model.extend({defaults:{artist:"Playlist Empty",title:"",source:"soundcloud",src:"",duration:1e3,position:-1,isPlaying:!1,selected:!1,streamUrl:"",image:""}});C3APP.AudioPlayer.AudioTrackModel=t}(),function(){"use strict";var t=Backbone.Collection.extend({model:C3APP.AudioPlayer.AudioTrackModel,url:"http://local3.aclfestival.com/wp/wp-content/themes/acl2013/test/fixtures/tempdata.json",parse:function(t){return t},selectTrack:function(t){"object"==typeof t&&(this.forEach(function(t){"object"==typeof t&&t.set("selected",!1)}),t.set("selected",!0))},findFromTrackData:function(t){return this.filter(function(e){return e.get("src")===t.src})[0]},returnCurrentTrack:function(){var t=this.filter(function(t){return t.get("selected")===!0});return 0!==t.length?t[0]:this.at(0)},returnTrackByPositionId:function(t){var e=this.findWhere({positionId:t});return _.isUndefined(e)?this.returnTrackByPositionId(0):e},returnTrackData:function(){return this.toJSON()[0]},isEmpty:function(){return this.toJSON()[0].empty}});C3APP.AudioPlayer.AudioTrackCollection=t}(),function(){"use strict";var t={PLAY_TRACK:"audioplayer:playTrack",PLAYLIST_UPDATED:"audioplayer:playlistUpdated",QUEUE_TRACKS:"audioplayer:queueTracks",SOUNDCLOUD_DATA_LOADED:"onSoundCloudDataLoaded",PLAY_BTN_CLICK:"onPlayBtnClick",CHANGE_INITIALIZED:"change:initialized",CHANGE_VOLUME:"change:volume",CHANGE_POSITION:"change:track-position",CHANGE_TRACK_PLAYING:"change:isPlaying",CHANGE_NOW_PLAYING:"change:nowPlaying",CHANGE_TRACK_POSITION:"change:position",PAUSE_TRACK:"onPauseTrack"};C3APP.AudioPlayer.AudioEvent=t}(),function(){"use strict";var t={SCROLL_TO_POSITION:"onScrollToPosition",GLIMPSE_PLAYLIST:"onGlimpsePlaylist",CLOSE_TRACKLIST:"onCloseTracklist",PLAY_BTN_CLICK:"audioPlayer:UI:playButtonClicked",TRACKLIST_BTN_CLICK:"onTracklistBtnClick",VOLUME_BTN_CLICK:"onVolumeBtnClick",TRACK_SELECTED:"audioPlayer:UI:trackSelected",CHANGE_SCROLL:"change:scroll",CHANGE_VOLUME_OPEN:"change:isVolumeOpen",CHANGE_TRACKLIST_OPEN:"change:isTracklistOpen"};C3APP.AudioPlayer.UIEvent=t}(),function(){"use strict";var t=jQuery,e=function(){return{returnPlaylistDataFromHTML:function(e){var i=[];return i=t(e).data("audio-tracks"),i=_.map(i,function(t){return{artist:t.track__artist,artistId:t.track__artistId,title:t.track__title,source:"soundcloud",src:t.track__url,streamUrl:t.track__streamUrl,image:t.image}}),_.isEmpty(i)&&i.push({empty:!0}),new C3APP.AudioPlayer.AudioTrackCollection(i)},returnGlobalPlaylist:function(){var t=_.map(C3FMConfig.allArtistsTracks,function(t){return{artist:t[0].track__artist,artistId:t[0].track__artistId,title:t[0].track__title,source:"soundcloud",src:t[0].track__url,streamUrl:t[0].track__streamUrl,image:t[0].image}});return new C3APP.AudioPlayer.AudioTrackCollection(t)},isValid:function(t){return _.isUndefined(t)?!1:_.isNull(t)?!1:!0},convertTime:function(t){function e(t){return(10>t?"0":"")+t}var i=t%1e3;t=(t-i)/1e3;var n=t%60;t=(t-n)/60;var s=t%60;return s+":"+e(n)},isMobile:function(){var e=C3APP.AudioPlayer.AudioPlayerConfig.BREAKPOINT;return t("body").width()<e}}}();C3APP.AudioPlayer.PlayerUtils=e}(),function(){"use strict";var t=C3APP.AudioPlayer.AudioEvent,e=C3APP.AudioPlayer.AudioPlayerConfig,i=Backbone.View.extend({widget:null,_model:null,_collection:null,_initialized:!1,_currentProgress:null,initialize:function(t){_.bindAll(this,"play","pause","stop","playCurrentTrack"),this.options=t||{},this._model=this.options.model,this._collection=this.options.collection,SC.initialize({client_id:e.SOUNDCLOUD_CLIENT_ID}),this._addEventListeners(),this._model.set({initialized:!0,nowPlaying:this._collection.at(0)}),this._collection.selectTrack(this._collection.at(0))},_loadTrackStreamUrl:function(){var t=this,e={play:!0},i=this.model.get("nowPlaying");SC.stream(i.get("streamUrl"),{multiShot:!1,autoPlay:!1},function(i){t._model.get("nowPlaying").get("hadError")||t._addTrackEventListeners(i,e)})},destroy:function(){this._removeEventListeners()},_addEventListeners:function(){this.listenTo(this.model,t.CHANGE_VOLUME,this._onVolumeChange),this.listenTo(this.collection,t.CHANGE_TRACK_PLAYING,this._onTrackPlayingChange),Backbone.Mediator.sub(t.CHANGE_POSITION,this._onPositionChange),Backbone.Mediator.sub("audioPlayer:trackNotFound",this._onTrackDataNotFound)},_addTrackEventListeners:function(t,e){e=e||{},this.currentTrack&&this.currentTrack.destruct();var i=this.model.get("nowPlaying");this.currentTrack=t,this.currentTrackUrl=i.get("src"),e.play&&this.playCurrentTrack()},_removeEventListeners:function(){this.stopListening()},_onPlayProgress:function(){this._currentProgress=this.progress,this._model.set({progress:this.progress})},play:function(){var t=this.model.get("nowPlaying");this.currentTrack&&t.get("src")===this.currentTrackUrl?this.playCurrentTrack():this._loadTrackStreamUrl()},pause:function(){var t=this._model.get("nowPlaying");this.currentTrack&&(this.currentTrack.pause(),Backbone.Mediator.pub("audioPlayer:pause",t.toJSON()))},stop:function(){this._model.set({isPlaying:!1}),this.currentTrack&&(this.currentTrack.destruct(),this.currentTrack=void 0),Backbone.Mediator.pub("audioPlayer:stop")},_onVolumeChange:function(t){var e=t.changed.volume;this.currentTrack.setVolume(e)},_onPositionChange:function(t){var e=this._model.get("duration"),i=e*t/100;this.currentTrack.setPosition(i)},_onTrackDataNotFound:function(t){t=$.extend({status:-1,statusText:"unknownErrorOccurred"},t),this._model.get("nowPlaying").set({hadError:!0}),this.stop();var e={type:"trackDataNotFound",message:"Track data request timed out or could not be found.",trackInfo:this._model.get("nowPlaying").toJSON(),errorCode:t.status,errorStatus:t.statusText};return Backbone.Mediator.pub("audioPlayer:trackError",e),this._model.get("nowPlaying").get("wasSelected")?void this._model.get("nowPlaying").set({wasSelected:!1}):void Backbone.Mediator.pub("audioPlayer:nextTrack")},playCurrentTrack:function(){var t=this;if(void 0!==this.currentTrack){var e=setTimeout(function(){Backbone.Mediator.pub("audioPlayer:trackNotFound",{status:0,statusText:"timeout"})},15e3);this.currentTrack.play({onload:function(t){t||2!==this.readyState||(clearTimeout(e),Backbone.Mediator.pub("audioPlayer:trackNotFound",{status:500,statusText:"unableToLoadFromAPI"}))},onplay:function(){var e=t._model.get("nowPlaying");Backbone.Mediator.pub("audioPlayer:play",e.toJSON())},onresume:function(){var e=t._model.get("nowPlaying");Backbone.Mediator.pub("audioPlayer:play",e.toJSON())},whileloading:function(){e&&this.bytesLoaded>0&&(clearTimeout(e),e=null,Backbone.Mediator.pub("audioPlayer:whilePlayingStart"))},whileplaying:function(){var i=this.position,n=this.duration,s=i/n*100;e&&this.position>0&&(clearTimeout(e),e=null,Backbone.Mediator.pub("audioPlayer:whilePlayingStart")),e&&this.bytesLoaded>0&&Backbone.Mediator.pub("audioPlayer:whilePlayingStart"),t._model.set({duration:this.duration,progress:{currentPosition:this.position,relativePosition:s}})},onfinish:function(){var e=t._model.get("nowPlaying");Backbone.Mediator.pub("audioPlayer:finished",e.toJSON())},onstop:function(){var e=t._model.get("nowPlaying");Backbone.Mediator.pub("audioPlayer:stop",e.toJSON())}})}}});C3APP.AudioPlayer.SoundCloudDelegate=i}(),function(){"use strict";var t=C3APP.AudioPlayer.UIEvent,e=C3APP.AudioPlayer.PlayerUtils,i=Handlebars.templates.trackListBtnTemplate,n=Backbone.View.extend({tagName:"li",className:"audioplayer__btn",template:i,events:{click:"_onTrackListBtnClick"},render:function(){return this.$el.html(this.template({isMobile:e.isMobile()})),this.$icon=this.$el.find("i"),this.listenTo(this.model,t.CHANGE_TRACKLIST_OPEN,this._onChangeTracklistOpen),e.isMobile()&&this.$el.hide(),this},_onTrackListBtnClick:function(){var t=this.model.get("isTracklistOpen");this.model.set("isTracklistOpen",!t)},_onChangeTracklistOpen:function(){var t=this.model.get("isTracklistOpen");this._resizeTracklist(),this.$icon.toggleClass("fa-caret-up",t).toggleClass("fa-caret-down",!t),this.$el.toggleClass("audioplayer__btn--active",t)},_resizeTracklist:function(){var t=C3APP.AudioPlayer.PlayerUtils;t.isMobile()||(this.$engagementBarWrapper=$("#engagement-bar-wrapper"),this.$audioplayer=$(".audioplayer"),this.$trackList=$(".audioplayer__tracks"),this.$trackList.css({left:-(this.$audioplayer.offset().left-(this.$engagementBarWrapper.offset().left+parseInt(this.$engagementBarWrapper.css("paddingLeft"),10)))+"px",width:this.$engagementBarWrapper.width()}))}});C3APP.AudioPlayer.UI.TrackListBtnView=n}(),function(){"use strict";var t=C3APP.AudioPlayer.PlayerUtils,e=Handlebars.templates.screenTemplate,i=Backbone.View.extend({tagName:"li",className:"audioplayer__screen",template:e,events:{},render:function(){return this.$el.html(this.template({isMobile:t.isMobile()})),this},updateMarquee:function(t){var e=t.artist+" - "+t.title;this.$el.find(".audioplayer__marquee").text(e)}});C3APP.AudioPlayer.UI.ScreenView=i}(),function(){"use strict";var t=Handlebars.templates.previousTrackBtnTemplate,e=Backbone.View.extend({tagName:"li",className:"audioplayer__btn",template:t,events:{click:"click"},initialize:function(){_.bindAll(this,"render","click")},render:function(){return this.$el.html(this.template()),this},click:function(){Backbone.Mediator.pub("audioPlayer:previousTrack")}});C3APP.AudioPlayer.UI.PreviousTrackBtnView=e}(),function(){"use strict";var t=C3APP.AudioPlayer.UIEvent,e=Handlebars.templates.playBtnTemplate,i=Backbone.View.extend({tagName:"li",className:"audioplayer__btn",template:e,$icon:null,isPlaying:!1,events:{click:"click"},initialize:function(){_.bindAll(this,"render","setPlaying","setPaused")},render:function(){return this.$el.html(this.template()),this.$icon=this.$el.find("i"),this.togglePlay(),this},setPlaying:function(){this.isPlaying=!0,this.render()},setPaused:function(){this.isPlaying=!1,this.render()},click:function(){Backbone.Mediator.pub(t.PLAY_BTN_CLICK,{isPlaying:this.isPlaying})},togglePlay:function(){this.$icon.toggleClass("fa-pause",this.isPlaying).toggleClass("fa-play",!this.isPlaying),this.$el.toggleClass("audioplayer__btn--active",this.isPlaying)}});C3APP.AudioPlayer.UI.PlayBtnView=i}(),function(){"use strict";var t=Handlebars.templates.nextTrackBtnTemplate,e=Backbone.View.extend({tagName:"li",className:"audioplayer__btn",template:t,events:{click:"click"},initialize:function(){_.bindAll(this,"render","click")},render:function(){return this.$el.html(this.template()),this},click:function(){Backbone.Mediator.pub("audioPlayer:nextTrack")}});C3APP.AudioPlayer.UI.NextTrackBtnView=e}(),function(){"use strict";var t=C3APP.AudioPlayer.UIEvent,e=C3APP.AudioPlayer.AudioEvent,i=Handlebars.templates.volumeBtnTemplate,n=C3APP.AudioPlayer.PlayerUtils,s=Backbone.View.extend({tagName:"li",className:"audioplayer__btn",template:i,model:null,$draggerVolume:null,$slideOut:null,events:{click:"click","click .btn-mute":"_onBtnMuteClick","click .btn-max":"_onBtnMaxClick"},render:function(){return _.bindAll(this,"render","click","_onBtnMuteClick","_onBtnMaxClick","_onDraggerSlide","_onVolumeChange","_onVolumeOpenChange"),this.$el.html(this.template()),this.$volumeContainer=this.$el.find(".audioplayer__volume-container"),this.$draggerVolume=this.$el.find(".audioplayer__volume-dragger"),this.$draggerVolume.slider({orientation:"horizontal",min:0,max:100,range:"max",animate:"fast",slide:this._onDraggerSlide}),this.$draggerVolume.slider("value",this.model.get("volume")),this.model.set({isVolumeOpen:!1}),this._throttleVolumeUpdate=_.debounce(function(t){this.model.set({volume:t});try{this.$draggerVolume.slider("value",t)}catch(e){}},300),this.listenTo(this.model,e.CHANGE_VOLUME,this._onVolumeChange),this.listenTo(this.model,t.CHANGE_VOLUME_OPEN,this._onVolumeOpenChange),n.isMobile()&&this.$el.hide(),this},click:function(){var t="open"===this.$volumeContainer.attr("data-state");t?this.$volumeContainer.attr("data-state","closed"):this.$volumeContainer.attr("data-state","open"),this.$el.toggleClass("audioplayer__btn--active",!t)},_onBtnMuteClick:function(){this.model.set({isVolumeOpen:!1})},_onBtnMaxClick:function(){this._throttleVolumeUpdate(100)},_onDraggerSlide:function(t,e){this._throttleVolumeUpdate(e.value)},_onVolumeChange:function(t){this._throttleVolumeUpdate(t.changed.volume)},_onVolumeOpenChange:function(t){var e=t.changed.isVolumeOpen,i=this,n=300;e?($(".btn-volume").addClass("btn-volume-active"),this.$el.parent().parent().show(),this.$el.parent().show().animate({left:-1,opacity:1},{duration:n,easing:"easeOutSine",complete:function(){$.setDisabledByDefault(!0)}})):($(".btn-volume").removeClass("btn-volume-active"),this.$el.parent().parent().show(),this.$el.parent().show().animate({left:-100,opacity:0},{duration:n,easing:"easeInSine",complete:function(){$.setDisabledByDefault(!1),i.$el.parent().hide(),i.$el.parent().parent().hide()}}))}});C3APP.AudioPlayer.UI.VolumeBtnView=s}(),function(){"use strict";var t=C3APP.AudioPlayer.UIEvent,e=C3APP.AudioPlayer.PlayerUtils,i=Handlebars.templates.controlsTemplate,n=Backbone.View.extend({template:i,events:{"click .btn-tracklist":"_onTracklistBtnClick","click .btn-volume":"_onVolumeBtnClick"},render:function(){return this.$el.html(this.template({isMobile:e.isMobile()})),this},_onTracklistBtnClick:function(){this.trigger(t.TRACKLIST_BTN_CLICK),Backbone.Mediator.pub(t.TRACKLIST_BTN_CLICK)},_onVolumeBtnClick:function(){this.trigger(t.VOLUME_BTN_CLICK),Backbone.Mediator.pub(t.VOLUME_BTN_CLICK)}});C3APP.AudioPlayer.UI.ControlsView=n}(),function(){"use strict";var t=C3APP.AudioPlayer.AudioEvent,e=C3APP.AudioPlayer.PlayerUtils,i=Handlebars.templates.progressTemplate,n=Backbone.View.extend({template:i,model:null,collection:null,$progressTime:null,$progressBar:null,$elapsed:null,events:{mousedown:"_onProgressTimeClick"},render:function(){return this.$el.html(this.template()),this.$progressTime=this.$el.find(".progress-time"),this.$progressBar=this.$el.find(".progress-bar"),this.$elapsed=this.$el.find(".elapsed"),this.listenTo(this.collection,t.CHANGE_TRACK_POSITION,this._onTrackPositionChange),this.listenTo(this.model,"change:progress",this._onChangeProgress),this},_onProgressTimeClick:function(t){var e=$(t.currentTarget),i=t.offsetX/e.width()*100,n=this.collection.returnCurrentTrack();n.set({position:i})},_onTrackPositionChange:function(e){var i=e.changed.position;this.$elapsed.css({width:i+"%"}),Backbone.Mediator.pub(t.CHANGE_POSITION,i)},_onChangeProgress:function(t){var i=t.changed.progress,n=e.convertTime(i.currentPosition);this.$elapsed.css("width",i.relativePosition+"%"),this.$progressTime.html(n)}});C3APP.AudioPlayer.UI.ProgressView=n}(),function(){"use strict";var t=(C3APP.AudioPlayer.UIEvent,C3APP.AudioPlayer.AudioEvent,Handlebars.templates.scrollbarTemplate),e=Backbone.View.extend({template:t,className:"audioplayer__scrollbar",model:null,$draggerScroll:null,events:{},render:function(){return _.bindAll(this,"render","_onDraggerSlide"),this.$el.html(this.template()),this.$draggerScroll=this.$el.find(".audioplayer__dragger"),this.$draggerScroll.slider({animate:!1,min:0,max:100,value:100,orientation:"vertical",range:"min",slide:this._onDraggerSlide}),this},_onDraggerSlide:function(t,e){this.$draggerScroll.slider("value",100-e.value),this.model.set({scroll:100-e.value})}});C3APP.AudioPlayer.UI.ScrollbarView=e}(),function(){"use strict";var t=C3APP.AudioPlayer.UIEvent,e=Handlebars.templates.trackTemplate,i=Backbone.View.extend({tagName:"div",className:"grid__item one-quarter palm-one-whole",template:e,events:{mouseover:"onMouseOver",mouseout:"onMouseOut",click:"onClick"},render:function(){var t=this.model.toJSON(),e=t.title.replace(/&amp;/g,"&");return t.unescapedTitle=_.unescape(e).replace(/&#039;/g,"'"),this.$el.html(this.template(t)),this.$el.attr({"data-artist":t.artist,"data-title":t.title,"data-source":t.source,"data-src":t.src,"data-track__url":t.track__url}),this},onMouseOver:function(){this.$el.addClass("hover")},onMouseOut:function(){this.$el.removeClass("hover")},onClick:function(){Backbone.Mediator.pub(t.TRACK_SELECTED,this.model.toJSON())}});C3APP.AudioPlayer.UI.TrackView=i}(),function(t){"use strict";var e=C3APP.AudioPlayer.PlayerUtils,i=C3APP.AudioPlayer.UIEvent,n=C3APP.AudioPlayer.UI.TrackView,s=C3APP.AudioPlayer.UI.ScrollbarView,o=Handlebars.templates.trackListTemplate,r=Backbone.View.extend({tagName:"li",className:"audioplayer__tracks",template:o,model:null,collection:null,container:null,scrollHeight:0,autoHideId:0,$containerScrollbar:null,$list:null,$progressTime:null,events:{"click .next-tracks":"scrollNext","click .prev-tracks":"scrollPrev",wheel:"mouseScroll"},initialize:function(){_.bindAll(this,"render","destroyView","show","hide","selectTrack","glimpse","scrollToSelectedTrack","scrollTo","ensureTrackViewSelected","add","cancelAutoHide","scrollNext","scrollPrev"),this.listenTo(this.collection,"add",this.add)},render:function(){var n=this;return this.tracks=[],this.$el.html(this.template()),this.$el.attr("data-state","closed"),this.$containerScrollbar=this.$el.find(".audioplayer__scrollbar-container"),this.$list=this.$el.find(".grid"),this.collection.each(this.add),this.collection.length>4&&!e.isMobile()&&_.delay(function(){n.scrollbarView=new s({model:n.model})},500),this.$listItems&&this.$listItems.first().addClass("selected"),_.defer(function(){n.scrollHeight=t(".audioplayer__tracks").height()}),n.listenTo(this.model,i.CHANGE_TRACKLIST_OPEN,_.debounce(this._onChangeTracklistOpen,500,!0)),n._$prevTracks=n.$(".prev-tracks"),n._$nextTracks=n.$(".next-tracks"),n._numRows=Math.ceil(n.$listItems.length/8),n._rowHeight=2*t(".audioplayer__track").first().outerHeight(!0),n._currentRow=1,n.mouseScrollUp=_.debounce(function(t){n.scrollPrev()},100),n.mouseScrollDown=_.debounce(function(t){n.scrollNext()},100),this},destroyView:function(){this.scrollbarView&&this.scrollbarView.remove(),this.remove()},show:function(e){e=e||{},this.$el.attr("data-state","open"),this.$listItems.each(function(){var e=t(this);e.attr("data-style")&&e.attr("style",e.attr("data-style"))}),this.scrollToSelectedTrack()},hide:function(e){var i=this,n=300;e=e||{},this.$el.attr("data-state","closing"),setTimeout(function(){i.$el.attr("data-state","closed")},n),t("html").unbind("click"),t(".audioplayer__tracks, .audioplayer").click(function(t){return!0})},selectTrack:function(t){this.ensureTrackViewSelected(t)},glimpse:function(){if(!e.isMobile()){var t=3e3,n=this;this.model.set({isTracklistOpen:!0},{animated:!0}),this.autoHideId=setTimeout(function(){n.autoHideId=0,n.model.set({isTracklistOpen:!1},{animated:!0}),n.model.trigger(i.CHANGE_TRACKLIST_OPEN)},t)}},scrollToSelectedTrack:function(){var t=this.$listItems.filter(".selected");t&&t.length>0&&this.scrollTo(t.position().top)},scrollTo:function(t){this.$(".audioplayer__tracks-inner").animate({scrollTop:t},{duration:100,ease:"easeOutSine"})},ensureTrackViewSelected:function(e){var i=this.$listItems.get(e.get("positionId"));this.$listItems.removeClass("selected").removeClass("hover"),t(i).addClass("selected")},_onChangeTracklistOpen:function(i,n,s){var o=this;e.isMobile()||(s=s||{},o.model.get("isTracklistOpen")?(o.show({animated:!0}),t("html").click(function(){o.model.set("isTracklistOpen",!1)}),t(".audioplayer__tracks, .audioplayer").click(function(t){t.stopPropagation()})):o.hide({animated:!0}))},add:function(t,e){if(!t.get("empty")){"object"==typeof e?t.set("positionId",e.length-1):t.set("positionId",e);var i=new n({model:t});i.render().$el.appendTo(this.$list),this.tracks.push(i)}this.$listItems=this.$list.find(".audioplayer__track")},cancelAutoHide:function(){var t=this.autoHideId;t&&t>0&&(this.autoHideId=0,clearTimeout(t))},scrollNext:function(){var e=this;e._rowHeight||(e._rowHeight=2*t(".audioplayer__track").first().outerHeight(!0)),e._currentRow<e._numRows&&(e.scrollTo(e._rowHeight*e._currentRow),e._currentRow++,e._$prevTracks.hasClass("is-disabled")&&e._$prevTracks.removeClass("is-disabled"),e._currentRow==e._numRows&&e._$nextTracks.addClass("is-disabled"))},scrollPrev:function(){var e=this;e._rowHeight||(e._rowHeight=2*t(".audioplayer__track").first().outerHeight(!0)),e._currentRow>1&&(e._currentRow--,e.scrollTo(e._rowHeight*(e._currentRow-1)),e._$nextTracks.hasClass("is-disabled")&&e._$nextTracks.removeClass("is-disabled"),1==e._currentRow&&e._$prevTracks.addClass("is-disabled"))},mouseScroll:function(t){var i=this;e.isMobile()||(t.originalEvent.wheelDelta<0?i.mouseScrollDown():i.mouseScrollUp(),t.preventDefault())}});C3APP.AudioPlayer.TrackListView=r}(jQuery),function(t){"use strict";var e=C3APP.AudioPlayer.AudioEvent,i=C3APP.AudioPlayer.PlayerUtils,n=C3APP.AudioPlayer.UIEvent,s=C3APP.AudioPlayer.UI.TrackListBtnView,o=C3APP.AudioPlayer.UI.ScreenView,r=C3APP.AudioPlayer.UI.PreviousTrackBtnView,a=C3APP.AudioPlayer.UI.PlayBtnView,l=C3APP.AudioPlayer.UI.NextTrackBtnView,u=C3APP.AudioPlayer.UI.VolumeBtnView,c=C3APP.AudioPlayer.TrackListView,d=Handlebars.templates.audioPlayerTemplate,h=Backbone.View.extend({tagName:"div",className:"audioplayer",template:d,model:null,collection:null,$innerPlayer:null,$containerPlayBtn:null,$containerNowPlaying:null,$containerControls:null,$containerProgress:null,$containerDrawer:null,$backgroundBlocker:null,$containerVolume:null,$trackText:null,$artistText:null,playBtnView:null,trackListBtnView:null,controlsView:null,progressView:null,trackListView:null,volumeSliderView:null,scrollbarView:null,events:{"click .btn-close":"_onCloseBtnClick"},render:function(){_.bindAll(this,"render","lockPlayer","unlockPlayer","showPlayer","hidePlayer","updateNowPlaying","updateOnNewPage","play","pause");var e=i.isMobile();this.$el.html(this.template({isMobile:e})),this.$innerPlayer=this.$el.find(".audioplayer__inner"),this.$containerVolume=this.$el.find(".audioplayer__volume-container"),this.$backgroundBlocker=t('<div id="background-blocker" />'),this.trackListBtnView=new s({model:this.model}),this.trackListView=new c({model:this.model,collection:this.collection}),this.screenView=new o({model:this.model}),this.previousTrackBtnView=new r({model:this.model}),this.playBtnView=new a({model:this.model}),this.nextTrackBtnView=new l({model:this.model}),this.volumeBtnView=new u({model:this.model}),this.$innerPlayer.append(this.trackListBtnView.render().el),this.$innerPlayer.append(this.screenView.render().el),this.$innerPlayer.append(this.previousTrackBtnView.render().el),this.$innerPlayer.append(this.playBtnView.render().el),this.$innerPlayer.append(this.nextTrackBtnView.render().el),this.$innerPlayer.append(this.trackListView.render().el),this.$innerPlayer.append(this.volumeBtnView.render().el),this.$containerDrawer=this.$innerPlayer.find(".audioplayer__tracks");var n=t(e?".nav-primary-wrapper":"#myacl-menu");return n.append(this.$el),i.isMobile()&&(this.model.set({isTracklistOpen:!0}),this.trackListView.show()),this.updateNowPlaying(),this._addEventListeners(),this.model.set({isTracklistOpen:i.isMobile()?!0:!1}),this},_addEventListeners:function(){this.listenTo(this.model,e.CHANGE_INITIALIZED,this._onInitializedChange),this.listenTo(this.model,e.CHANGE_TRACK_PLAYING,this._onChangeIsPlaying),this.listenTo(this.trackListBtnView,n.TRACKLIST_BTN_CLICK,this._onTracklistBtnClick),this.listenTo(this.trackListBtnView,n.CHANGE_TRACKLIST_OPEN,this._onTracklistOpen)},lockPlayer:function(){this.$backgroundBlocker.show()},unlockPlayer:function(){this.$backgroundBlocker.hide()},showPlayer:function(){t("#mobile-player-button").trigger("open")},hidePlayer:function(){t("#mobile-player-button").trigger("close")},updateNowPlaying:function(t){var e=this.collection.returnCurrentTrack();void 0!==e&&(t=t||e.toJSON(),this.screenView.updateMarquee(t))},updateOnNewPage:function(){this.trackListView.destroyView(),this.$containerDrawer.append(this.trackListView.render().el)},_onInitializedChange:function(t){var e=t.changed.initialized;e?this.unlockPlayer():this.lockPlayer();

},play:function(){this.updateNowPlaying(),this.trackListView.selectTrack(this.model.get("nowPlaying")),this.playBtnView.setPlaying()},pause:function(){this.playBtnView.setPaused()},_onTracklistBtnClick:function(){var t=!this.model.get("isTracklistOpen");this.model.set({isTracklistOpen:t},{animated:!0})},_onTracklistOpen:function(){console.log("open")},_onVolumeBtnClick:function(){var t=!this.model.get("isVolumeOpen");this.model.set({isVolumeOpen:t}),t&&this.model.set({isTracklistOpen:!1},{animated:!0})},_onTrackPlayingChange:function(t){var e=t.changed.isPlaying;this.model.set({isPlaying:e}),this.updateNowPlaying({title:t.get("title"),artist:t.get("artist"),positionId:t.get("positionId")})},_onCloseBtnClick:function(){this.hidePlayer()},_onChangeIsPlaying:function(t,e){var i=e?"playing":"stopped";this.$el.attr("data-state",i),e||this.pause()}});C3APP.AudioPlayer.AudioPlayerView=h}(jQuery),function(){"use strict";var t=C3APP.AudioPlayer.PlayerUtils,e=C3APP.AudioPlayer.UIEvent,i=C3APP.AudioPlayer.AudioPlayerModel,n=C3APP.AudioPlayer.AudioPlayerView,s=C3APP.AudioPlayer.SoundCloudDelegate,o=Backbone.View.extend({options:{},view:null,audioPlayerView:null,model:null,collection:null,soundCloudDelegate:null,initialize:function(t){this.options=t||{},_.bindAll(this,"render","addTrack","didClickPlayButton","shouldCloseTracklist","trackDidFinish","displayTrackError","didStartPlaying","didSelectTrack","play","pause","returnToPreviousTrack","advanceToNextTrack","selectTrack","setVolume","getVolume","mute","setPosition","getPosition","getCollection","updateOnNewPage","startReels","stopReels")},render:function(){return this.collection=this.options.collection,this.model=new i,this.soundCloudDelegate=new s({model:this.model,collection:this.collection}),this.audioPlayerView=this.view=new n({model:this.model,collection:this.collection}),this.audioPlayerView.render(),this.addEventListeners(),this},sub:function(){Backbone.Mediator.sub.apply(this,arguments)},addEventListeners:function(){this.sub(e.PLAY_BTN_CLICK,this.didClickPlayButton),this.sub(e.TRACK_SELECTED,this.didSelectTrack),this.sub(e.CLOSE_TRACKLIST,this.shouldCloseTracklist),this.sub("audioPlayer:finished",this.trackDidFinish),this.sub("audioPlayer:previousTrack",this.returnToPreviousTrack),this.sub("audioPlayer:nextTrack",this.advanceToNextTrack),this.sub("audioPlayer:whilePlayingStart",this.didStartPlaying),this.sub("audioPlayer:stop",this.stopReels),this.sub("audioPlayer:play",this.startReels),this.sub("videoPlayer:play",this.pause)},addTrack:function(t){var e=this.collection.findFromTrackData(t),i=this.model.get("nowPlaying"),n=this.model.get("isPlaying");e||(e=this.collection.add(t));var s=n&&e.get("src")===i.get("src");return s?void this.audioPlayerView.trackListView.glimpse():void this.didSelectTrack(t)},didClickPlayButton:function(){var t=!this.model.get("isPlaying");t?this.play():this.pause()},didSelectTrack:function(t){var e=this.collection.findFromTrackData(t);this.selectTrack(e),this.model.get("nowPlaying").set({wasSelected:!0}),Backbone.Mediator.subscribeOnce("audioPlayer:trackError",this.displayTrackError,this)},shouldCloseTracklist:function(){this.model.set({isTracklistOpen:!1},{animated:!0})},trackDidFinish:function(){this.advanceToNextTrack()},displayTrackError:_.debounce(function(e){var i=$("<div/>").append(C3FMConfig.messages.audioplayer.error).text();if(t.isMobile())alert(i);else{if(0===e.errorCode)return void $.colorbox({close:C3FMConfig.colorbox.close,html:C3FMConfig.messages.audioplayer.timeout,transition:"none",maxWidth:"100%"});$.colorbox({close:C3FMConfig.colorbox.close,html:C3FMConfig.messages.audioplayer.error,transition:"none",maxWidth:"100%"})}},2e3,!0),didStartPlaying:function(){this.startReels(),Backbone.Mediator.unsubscribe("audioPlayer:trackError",this.displayTrackError,this)},play:function(){this.model.set({isPlaying:!0}),this.audioPlayerView.play(),this.soundCloudDelegate.play()},pause:function(){this.model.set({isPlaying:!1}),this.soundCloudDelegate.pause(),this.audioPlayerView.pause()},returnToPreviousTrack:function(){var t=this.model.get("nowPlaying").toJSON(),e=this.collection.returnTrackByPositionId(t.positionId-1);this.selectTrack(e)},advanceToNextTrack:function(){var t=this.model.get("nowPlaying").toJSON(),e=this.collection.returnTrackByPositionId(t.positionId+1);this.selectTrack(e)},selectTrack:function(t){this.collection.selectTrack(t),this.model.set("nowPlaying",t),this.play()},setVolume:function(t){this.model.set({volume:t})},getVolume:function(){return this.model.get("volume")},mute:function(){this.model.set({volume:0})},setPosition:function(t){var e=this.collection.returnCurrentTrack();e.set({position:t})},getPosition:function(){return this.collection.returnCurrentTrack().get("position")},getCollection:function(){return this.collection},updateOnNewPage:function(){this.audioPlayerView.updateOnNewPage()},startReels:function(){},stopReels:function(){}});C3APP.AudioPlayer.PlayerView=o}(),function(){"use strict";var t=Backbone.Model.extend({defaults:{artist:null,compare:null,session:null,stuff:null}});C3APP.CountsModel=t}(),function(){"use strict";var t=C3APP.TradableBits,e=Backbone.Model.extend({SESSION_UID_KEY:"C3_SESSION_UID",LAST_LOGIN_KEY:"C3_LAST_LOGIN",defaults:{ID:null,counts:null,customUrl:null,favorites:null,hash:null,isFacebookUser:null,isPrivate:null,loggedIn:null,name:null,photoUrl:null,selectedYear:null,lastLogin:null},initialize:function(){this.set("counts",new C3APP.CountsModel),Backbone.Mediator.sub("social:onForgotPassword",$.proxy(this.onForgotPassword,this)),Backbone.Mediator.sub("social:onResetPassword",$.proxy(this.onResetPassword,this)),Backbone.Mediator.sub("social:promptForEmail",$.proxy(this.promptForEmail,this)),Backbone.Mediator.sub("social:loginError",$.proxy(this.onLoginError,this)),Backbone.Mediator.sub("social:deleteAccount",$.proxy(this.deleteAccount,this)),Backbone.Mediator.sub("social:makePublic",$.proxy(this.makePublic,this)),Backbone.Mediator.sub("social:makePrivate",$.proxy(this.makePrivate,this)),Backbone.Mediator.sub("network:disconnect",$.proxy(this.onNetworkDisconnect,this))},setSessionUid:function(t){window.localStorage?window.localStorage.setItem(this.SESSION_UID_KEY,t):window[this.SESSION_UID_KEY]=t},getSessionUid:function(){return window.localStorage?window.localStorage.getItem(this.SESSION_UID_KEY):window[this.SESSION_UID_KEY]},deleteSessionUid:function(){window.localStorage?window.localStorage.removeItem(this.SESSION_UID_KEY):delete window[this.SESSION_UID_KEY],window.sessionUid=null},setLastLogin:function(t){window.localStorage?window.localStorage.setItem(this.LAST_LOGIN_KEY,t):window[this.LAST_LOGIN_KEY]=t},getLastLogin:function(){return window.localStorage?window.localStorage.getItem(this.LAST_LOGIN_KEY):window[this.LAST_LOGIN_KEY]},deleteLastLogin:function(){window.localStorage?window.localStorage.removeItem(this.LAST_LOGIN_KEY):delete window[this.LAST_LOGIN_KEY]},isLoggedIn:function(){return this.get("loggedIn")},getCount:function(t){return this.get("counts").get(t)},setCount:function(t,e){var i={};i[t]=e,this.get("counts").set(t,e),this.trigger("change:counts",this,i)},updateFavoritesArray:function(t,e){var i=this.get("favorites");if("add"===t)i.push(e);else{var n=i.indexOf(e);-1!==n&&i.splice(n,1)}this.set("favorites",i)},updateFavoritesCount:function(t,e){var i=parseInt(this.getCount(e),10),n=i;"add"===t?n+=1:n-=1,this.setCount(e,n)},pushFavoriteQueue:function(t){if(C3APP.Utils.supportsLocalStorage()){var e=[];e.push(t[0].outerHTML),window.localStorage.setItem("C3_FAVORITE_QUEUE",JSON.stringify(e))}},clearFavoriteQueue:function(){C3APP.Utils.supportsLocalStorage()&&window.localStorage.removeItem("C3_FAVORITE_QUEUE")},processFavoriteQueue:function(){if(C3APP.Utils.supportsLocalStorage()){var t=JSON.parse(window.localStorage.getItem("C3_FAVORITE_QUEUE"));if($.isArray(t)){var e=t.shift(),i=$('[data-post-id="'+$(e).attr("data-post-id")+'"]');i.length||(i=$(e)),this.updateFavorite(i),this.clearFavoriteQueue()}}},updateFavorite:function(t){var e=this,i=t.attr("data-action"),n=t.attr("data-post-id"),s=t.attr("data-post-type"),o=t.attr("data-post-title"),r=t.attr("data-post-location"),a=t.attr("data-post-year"),l=!0;$.ajax({type:"POST",url:C3FMConfig.ajaxUrl,data:{action:"my_post_favs",task:i,post:n,type:s,year:a},dataType:"json"}).always(function(){var u={action:i,id:parseInt(n,10),title:o,type:s,year:a,url:window.location.origin+window.location.pathname};Backbone.Mediator.pub("myfest:favorite",u),e.updateFavoritesArray(i,n),parseInt(a,10)===parseInt(C3FMConfig.year,10)&&e.updateFavoritesCount(i,s),Backbone.Mediator.pub("myfest:changeFavorite",t,i,r,a,l)})},login:function(){function e(t,e,i){var n=new Date,s=null;n.setTime(n.getTime()+24*i*60*60*1e3),s="expires="+n.toUTCString(),document.cookie=t+"="+e+"; "+s+"; path=/"}var i={template:"login",replacements:{request_uid:t.getRequestUid(),account_id:C3FMConfig.tbits.accountId}};e("c3aws_redirect",location.pathname,1),Backbone.Mediator.pub("modal:open",i)},logout:function(){var t=this;$.post(C3FMConfig.ajaxUrl,{action:"logout"},function(){t.deleteSessionUid(),t.set("loggedIn",!1),location.href="/"},"json")},promptForEmail:function(){Backbone.Mediator.pub("modal:open",{template:"confirm-email"})},deleteAccount:function(){var t=this;$.get(C3FMConfig.ajaxUrl,{action:"delete_account",user_id:this.get("ID")},function(){t.set("loggedIn",!1),location.href="/"})},makePrivate:function(){$.get(C3FMConfig.ajaxUrl,{action:"make_private",user_id:this.get("ID")},function(){Backbone.Mediator.pub("myaccount:madePrivate")},"json")},makePublic:function(){$.get(C3FMConfig.ajaxUrl,{action:"make_public",user_id:this.get("ID")},function(){Backbone.Mediator.pub("myaccount:madePublic")},"json")},onForgotPassword:function(){var t={template:"forgot-password"};Backbone.Mediator.pub("modal:open",t)},sendForgotPassword:function(t){return $.ajax({type:"POST",url:C3FMConfig.ajaxUrl,data:{action:"social_forgot_password",email:t}})},onLoginError:function(t){var e={template:"login",error:t,override:!0};Backbone.Mediator.pub("modal:open",e)},onNetworkDisconnect:function(t){"facebook"===t&&this.setCount("compare",0)}});C3APP.MyFestModel=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({el:".c-engagement-bar",touchPrevents:!1,_subViews:[],events:{"click .js-toggle-myfest":"toggleMyFestMenu","click .c-engagement-bar__myfest__option a":"toggleMyFestMenu","click .js-toggle-language":"toggleLanguageMenu","click .o-languages_language a":"toggleLanguageMenu","click .js-login":"pubMyFestClick"},_navOffset:null,initialize:function(){var e=this;Backbone.Mediator.sub("alert:show",function(){e.updateSticky()}),Backbone.Mediator.sub("alert:dismiss",function(){e.updateSticky()}),e.updateSticky(),t(window).on("resize orientationchange",_.bind(this.init,this)),t(".c-engagement-bar__myfest").length>0&&"none"===t(".c-engagement-bar__myfest__out").css("display")&&e.$(".c-engagement-bar__search").addClass("c-engagement-bar__search--narrow"),t(".c-engagement-bar__language").length>0&&"none"!=t(".c-engagement-bar__language").css("display")&&t(".c-engagement-bar__myfest").length>0&&t(".audioplayer").length>0&&e.$(".u-hide--palm").addClass("desk-is-hidden"),e.$(".o-connect").length>0&&this._subViews.push(new C3APP.ConnectMenuView),this.init()},init:function(){t(window).off(".engagement-bar"),C3APP.Utils.isMobile()||C3APP.Utils.isLandscape()||t(window).on("scroll.engagement-bar resize.engagement-bar",_.bind(this.makeSticky,this)),C3APP.Utils.isTouchDevice()&&!C3APP.Utils.isMobile()&&t(window).on("touchstart.engagement-bar touchmove.engagement-bar touchend.engagement-bar",_.bind(this.makeSticky,this))},updateSticky:function(){var e=this;t(".c-engagement-bar--no-stick")||(e._engagementBarTop=0,e.$el.css("top",e._engagementBarTop+"px"),t(".alert").length>0&&t(".alert").each(function(i){"none"!=t(".alert").css("display")&&(e._engagementBarTop+=t(".alert").outerHeight(!0))}),t(".flash-message").length>0&&t(".flash-message").each(function(){e._engagementBarTop+=t(this).outerHeight(!0)}),e._engagementBarTop>0&&"fixed"===e.$el.css("position")&&e.$el.css("top",e._engagementBarTop+"px"))},makeSticky:function(){var e=this,i=t(document).scrollTop(),n=e.$el;if("fixed"===n.css("position")&&i>=0){var s=e._engagementBarTop-i;0>s&&(s=0),n.css("top",s+"px")}},openMyFestMenu:function(){var t=this,e=t.$(".c-engagement-bar__myfest__in .js-toggle-myfest"),i=t.$(".c-engagement-bar__myfest__options"),n=t.$(".myfest--caret");e.length>0&&(i.removeClass("c-engagement-bar__myfest__options--hidden"),e.removeClass("is-closed").addClass("is-open"),n.removeClass("fa-caret-down").addClass("fa-caret-up"))},closeMyFestMenu:function(){function e(){n.length>0&&(s.addClass("c-engagement-bar__myfest__options--hidden"),n.addClass("is-closed").removeClass("is-open"),o.addClass("fa-caret-down").removeClass("fa-caret-up"),t(document).off("click"))}var i=this,n=i.$(".c-engagement-bar__myfest__in .js-toggle-myfest"),s=i.$(".c-engagement-bar__myfest__options"),o=i.$(".myfest--caret");if(C3APP.Utils.isTouchDevice()||C3APP.Utils.isMobile()){var r=_.debounce(function(){e()},400);r()}else e()},toggleMyFestMenu:function(t){var e=this,i=e.$(".js-toggle-myfest");i.hasClass("is-closed")?(C3APP.Utils.isTouchDevice()||C3APP.Utils.isMobile(),e.openMyFestMenu()):e.closeMyFestMenu(),e.pubMyFestClick(t,"logged-in")},openLanguageMenu:function(){var t=this,e=t.$(".js-toggle-language"),i=t.$(".o-languages__list"),n=t.$(".language--caret");e.length>0&&(i.removeClass("o-languages__list--hidden"),e.removeClass("is-closed").addClass("is-open"),n.removeClass("fa-caret-down").addClass("fa-caret-up"))},closeLanguageMenu:function(){function e(){n.length>0&&(s.addClass("o-languages__list--hidden"),n.addClass("is-closed").removeClass("is-open"),o.addClass("fa-caret-down").removeClass("fa-caret-up"),t(document).off("click"))}var i=this,n=i.$(".js-toggle-language"),s=i.$(".o-languages__list"),o=i.$(".language--caret");if(C3APP.Utils.isTouchDevice()||C3APP.Utils.isMobile()){var r=_.debounce(function(){e()},400);r()}else e()},toggleLanguageMenu:function(e){var i=this,n=i.$(".js-toggle-language");n.hasClass("is-closed")?C3APP.Utils.isTouchDevice()||C3APP.Utils.isMobile()?i.openLanguageMenu():(i.openLanguageMenu(),e.stopPropagation(),t(document).click(function(){i.closeLanguageMenu()})):i.closeLanguageMenu(),e.stopImmediatePropagation()},pubMyFestClick:function(e){var i=t(e.currentTarget);if(i.attr("href")||i.hasClass("js-login")||i.hasClass("js-logout")){var n=null;n=i.hasClass("js-logout")?"logout":i.hasClass("js-login")?"login":i.attr("href");var s={curl:location.pathname,turl:n};Backbone.Mediator.pub("headerbar:myfest-click",s)}}});C3APP.EngagementBarView=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({el:".o-connect",touchPrevents:!1,_subViews:[],events:{"click .js-show-elist":"showElistForm","click .js-hide-elist":"hideElistForm","click .js-social-click":"pubSocialClick"},initialize:function(){},showElistForm:function(t){function e(){s.hide(),n.hide(),a.hide(),r.show(),o.show()}t.stopPropagation();var i=this,n=i.$(".o-connect__social"),s=i.$(".js-show-elist"),o=i.$(".js-hide-elist"),r=i.$(".o-connect__elist__form"),a=i.$(".o-connect__language");if(C3APP.Utils.isTouchDevice()||C3APP.Utils.isMobile()){var l=_.debounce(function(){e()},400);l()}else e();i.pubElistOpenClick(t)},hideElistForm:function(){function t(){n.show(),i.show(),a.show(),o.hide(),s.hide(),r.text().length>0&&r.remove()}var e=this,i=e.$(".o-connect__social"),n=e.$(".js-show-elist"),s=e.$(".js-hide-elist"),o=e.$(".o-connect__elist__form"),r=e.$(".o-connect__elist__response .msg"),a=e.$(".o-connect__language");if(C3APP.Utils.isTouchDevice()||C3APP.Utils.isMobile()){var l=_.debounce(function(){t()},400);l()}else t()},pubSocialClick:function(e){var i=t(e.currentTarget),n={curl:location.pathname,turl:i.attr("href")};Backbone.Mediator.pub("headerbar:social-click",n),e.stopImmediatePropagation()},pubElistOpenClick:function(t){var e={curl:location.pathname};Backbone.Mediator.pub("headerbar:elist-open-click",e),t.stopImmediatePropagation()}});C3APP.ConnectMenuView=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({el:"#header",_subViews:[],events:{"click .menu-item":"pubNavClick"},_navOffset:null,initialize:function(){var e=this,i=0,n="click";if(C3APP.Utils.isMobile()&&C3APP.Utils.isTouchDevice()&&(n="touchstart"),C3APP.Utils.isTouchDevice()&&(this.handleTouch(t("#desk-menu__primary")),this.handleTouch(t("#desk-menu__secondary"))),Backbone.Mediator.sub("alert:show",function(){e.$("#sticky-nav").length>0&&(e._navOffset=e.$("#sticky-nav").offset().top)}),Backbone.Mediator.sub("alert:dismiss",function(){e.$("#sticky-nav").length>0&&(e._navOffset=e.$("#sticky-nav").offset().top)}),e.$("#sticky-nav").length>0&&(this._navOffset=this.$("#sticky-nav").offset().top),e.$("#engagement-bar").length>0&&(e.engagementBar=new C3APP.EngagementBarView,e._navOffset-=e.$("#engagement-bar").outerHeight(!0)),Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_FINISH,function(){e.$(".palm-menu").trigger("close"),e.$(".l-palm-myacl-wrapper").trigger("close")}),t(window).on("resize orientationchange",_.bind(this.init,this)),this.$(".js-pulldown").length>0){var s=this.$(".js-pulldown");for(i=0;i<s.length;i+=1)this._subViews.push(new C3APP.PullDownView({el:s[i]}))}if(t(".alerts").length>0){var o=t(".alerts");for(i=0;i<o.length;i+=1)this._subViews.push(new C3APP.AlertsView({el:o[i]}))}this.init()},init:function(){t(window).off(".stickyHeader"),C3APP.Utils.isMobile()||C3APP.Utils.isLandscape()||t(window).on("scroll.stickyHeader resize.stickyHeader",_.bind(this.makeSticky,this)),C3APP.Utils.isTouchDevice()&&!C3APP.Utils.isMobile()&&t(window).on("touchstart.stickyHeader touchmove.stickyHeader touchend.stickyHeader",_.bind(this.makeSticky,this))},_hasSubMenu:function(t){return t.siblings(".sub-menu").length>0?!0:!1},_isInSubMenu:function(t){return t.parents(".sub-menu").length>0?!0:!1},handleTouch:function(e){var i=this;e.on("touchstart","a",function(e){var n=t(this),s=n.parent(".menu-item"),o=i._hasSubMenu(n),r=i._isInSubMenu(n);return s.hasClass("is-hovered")?(s.removeClass("is-hovered"),!0):o?(e.preventDefault(),void s.addClass("is-hovered").siblings(".menu-item").removeClass("is-hovered")):void(r&&(n.parents(".menu-item").removeClass("is-hovered"),n.trigger("click")))}),Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_START,function(){e.find(".is-hovered").removeClass("is-hovered")}),t("body").on("click",function(){e.find(".is-hovered").removeClass("is-hovered")})},makeSticky:function(){var e=t(document).scrollTop(),i=this.$("#sticky-nav");return C3APP.Utils.isMobile()||C3APP.Utils.isLandscape()?(i.removeClass("is-fixed"),void i.parent().css("padding-bottom",0)):void(e>=this._navOffset?i.hasClass("is-fixed")||(i.parent().css("padding-bottom",i.height()),i.addClass("is-fixed")):i.hasClass("is-fixed")&&(i.removeClass("is-fixed"),i.parent().css("padding-bottom",0)))},pubNavClick:function(e){var i=t(e.currentTarget),n={curl:location.pathname+location.search,turl:i.find("a").attr("href")};Backbone.Mediator.pub("nav:click",n)}});C3APP.HeaderView=e}(),function(){"use strict";var t=Backbone.View.extend({touchPrevents:!1,events:{"mouseenter .billboard__panel [data-hover-image]":"rollOverImage","mouseenter .billboard__panel [data-hover-text]":"rollOverHeadline","mouseleave .billboard__panel [data-hover-image]":"rollOverImage","mouseleave .billboard__panel [data-hover-text]":"rollOverHeadline","click .billboard__panel":"pubPanelClick","click .billboard__slide a":"pubPostWidgetClick","click .billboard__slide":"playVideo","click .billboard__slider__title":"pubTitleClick","click .billboard__slider__cta":"pubCtaClick"},initialize:function(){this.cacheRolloverImages(),C3APP.Utils.isMobile()||this.cacheRolloverImages(),this.initSlider(),$(window).on("resize.billboard",_.bind(this.onResize,this)),$(document).on("ready.billboard",_.bind(this.onResize,this))},destroy:function(){$(window).off(".billboard"),$(document).off(".billboard")},onResize:function(){C3APP.Utils.isMobile()?this.convertTo2By2(this.$el.find(".js-4x1")):this.convertTo4By1(this.$el.find(".js-4x1"))},convertTo2By2:function(t){var e=this;t.each(function(){var t=$(this),i=t.find(".billboard__slide"),n=t.find(".billboard__slider__page--cta").find("li"),s=t.find(".billboard__slider__page");t.hasClass("billboard__slider--2x2")||(s.remove(),n.addClass("billboard__slide billboard__slide--cta"),t.append(i),t.append(n),t.removeClass("billboard__slider--4x1").addClass("billboard__slider--2x2"),e.initSlider())})},convertTo4By1:function(t){var e=this;t.each(function(){var t,i,n=$(this),s=n.find(".billboard__slide").not(".billboard__slide--cta"),o=n.find(".billboard__slide--cta").removeAttr("class"),r=[],a=3;if(!n.hasClass("billboard__slider--4x1")){for(t=0,i=s.length;i>t;t+=a)r.push(s.slice(t,t+a));$.each(r,function(){var t=$(this),e=$('<div class="billboard__slider__page"></div>');e.append(t),n.append(e)}),n.append($('<div class="billboard__slider__page billboard__slider__page--cta"></div>').append(o)),n.removeClass("billboard__slider--2x2").addClass("billboard__slider--4x1"),e.initSlider()}})},loadImages:function(t){t.each(function(){var t=$(this);"//:0"===t.attr("src")&&t.attr("src",t.attr("data-src"))})},initSlider:function(){var t=this;this.$el.find(".billboard__slider--2x2").each(function(){var e=$(this),i=e.find(".billboard__slide--cta");e.find(".billboard__slider__arrow--prev").off("click"),e.find(".billboard__slider__arrow--next").off("click"),e.find(".billboard__slider__arrow--prev").on("click",_.bind(t.previousSlide,t)),e.find(".billboard__slider__arrow--next").on("click",_.bind(t.nextSlide,t)),i.detach();for(var n=e.find(".billboard__slide").not(".is-pinned").not(".billboard__slide--cta");n.length;)e.append(n.splice(Math.floor(Math.random()*n.length),1)[0]);e.append(i),e.find(".billboard__slide").removeClass("is-active").first().addClass("is-active"),t.loadImages(e.find(".billboard__slide").filter(".is-active").find("img"))}),this.$el.find(".billboard__slider--4x1").each(function(){var e=$(this);e.find(".billboard__slider__arrow--prev").off("click"),e.find(".billboard__slider__arrow--next").off("click"),e.find(".billboard__slider__arrow--prev").on("click",_.bind(t.previousPage,t)),e.find(".billboard__slider__arrow--next").on("click",_.bind(t.nextPage,t)),e.find(".billboard__slider__page").removeClass("is-active").first().addClass("is-active"),t.loadImages(e.find(".billboard__slider__page").filter(".is-active").find("img"))})},previousSlide:function(t){var e=$(t.target).parents(".billboard__slider"),i=e.find(".is-active"),n=e.parents(".billboard__panel"),s=i.prev(".billboard__slide"),o={};s.length||(s=$(e.find(".billboard__slide").last())),i.toggleClass("is-active"),s.toggleClass("is-active"),this.loadImages(e.find("img")),o.size=n.attr("data-panel-size"),o.index=n.attr("data-panel-index"),o.url=i.find("a").attr("href"),o.title=e.find(".billboard__slider__title").text(),Backbone.Mediator.pub("post-widget:prev-slide-click",o),t.stopPropagation()},nextSlide:function(t){var e=$(t.target).parents(".billboard__slider"),i=e.find(".is-active"),n=e.parents(".billboard__panel"),s=i.next(".billboard__slide"),o={};s.length||(s=$(e.find(".billboard__slide").first())),i.toggleClass("is-active"),s.toggleClass("is-active"),this.loadImages(e.find("img")),o.size=n.attr("data-panel-size"),o.index=n.attr("data-panel-index"),o.url=i.find("a").attr("href"),o.title=e.find(".billboard__slider__title").text(),Backbone.Mediator.pub("post-widget:next-slide-click",o),t.stopPropagation()},nextPage:function(t){var e=$(t.currentTarget).parents(".billboard__slider"),i=e.find(".is-active"),n=e.parents(".billboard__panel"),s=i.next(".billboard__slider__page"),o={};s.length||(s=$(e.find(".billboard__slider__page").first())),i.toggleClass("is-active"),s.toggleClass("is-active"),this.loadImages(s.find("img")),o.size=n.attr("data-panel-size"),o.index=n.attr("data-panel-index"),o.url="",o.title=e.find(".billboard__slider__title").text(),Backbone.Mediator.pub("post-widget:next-page-click",o),t.stopPropagation()},previousPage:function(t){var e=$(t.currentTarget).parents(".billboard__slider"),i=e.find(".is-active"),n=e.parents(".billboard__panel"),s=i.prev(".billboard__slider__page"),o={};s.length||(s=$(e.find(".billboard__slider__page").last())),i.toggleClass("is-active"),s.toggleClass("is-active"),this.loadImages(s.find("img")),o.size=n.attr("data-panel-size"),o.index=n.attr("data-panel-index"),o.url="",o.title=e.find(".billboard__slider__title").text(),Backbone.Mediator.pub("post-widget:prev-page-click",o),t.stopPropagation()},swapImage:function(t){var e=this.$(t).attr("src"),i=this.$(t).attr("data-hover-image");this.$(t).attr("src",i),this.$(t).attr("data-hover-image",e)},swapText:function(t){var e=this.$(t).html(),i=this.$(t).attr("data-hover-text");this.$(t).html(i),this.$(t).attr("data-hover-text",e)},cacheRolloverImages:function(){var t=[],e=this;this.$("[data-hover-image]").each(function(){var i=document.createElement("img");i.src=e.$(this).attr("data-hover-image"),t.push(i)})},rollOverImage:function(t){var e=t.currentTarget,i=this.$(e).siblings("[data-hover-text]");this.swapImage(e),0!==i.length&&this.swapText(i[0])},rollOverHeadline:function(t){var e=t.currentTarget,i=this.$(e).siblings("[data-hover-image]");this.swapText(e),0!==i.length&&this.swapImage(i[0])},pubPanelClick:function(t){var e=$(t.currentTarget),i={};i.size=e.attr("data-panel-size"),i.index=e.attr("data-panel-index"),i.url=e.find("a").attr("href"),i.title=e.attr("data-panel-title"),i.type=e.attr("data-panel-type"),"social"!==i.type&&Backbone.Mediator.pub("billboard:click",i)},getAction:function(t){var e=t.attr("class");return"string"!=typeof e?"unknown-link":e},pubPostWidgetClick:function(t){var e=$(t.currentTarget),i=e.parents(".billboard__slider"),n={};n.title=i.find(".billboard__slider__title").text(),n.curl=location.pathname,n.turl=e.attr("href"),n.label=e.attr("data-label"),Backbone.Mediator.pub("post-widget:pw-content-click",n)},pubCtaClick:function(t){var e=$(t.currentTarget),i=e.parents(".billboard__slider"),n={};n.title=i.find(".billboard__slider__title").text(),n.curl=location.pathname,n.turl=e.attr("href"),n.label=e.attr("data-label"),Backbone.Mediator.pub("post-widget:pw-cta-click",n),t.stopPropagation()},pubTitleClick:function(t){var e=$(t.currentTarget),i={};i.title=e.text(),i.curl=location.pathname,i.turl=e.attr("href"),i.label=e.attr("data-label"),Backbone.Mediator.pub("post-widget:pw-title-click",i)},playVideo:function(t){var e=$(t.currentTarget),i=e.find(".billboard__slide__video"),n=e.find(".i--play"),s=null;i.length&&(s=i.get(0),this.playing?(this.playing=!1,n.show(),s.pause()):(this.playing=!0,n.hide(),s.play()))}});C3APP.BillboardView=t}(),function(){"use strict";var t=Backbone.View.extend({events:{"click .ticket__info":"handleTicketDetailsOpen","click .ticket__button":"buyNowButtonClick"},calculateTop:function(){var t=40;return C3APP.Utils.isMobile()?t:!1},handleTicketDetailsOpen:function(t){t.preventDefault();var e=this.$(t.currentTarget),i=e.attr("data-target"),n="#"+e.parents(".ticket").attr("id"),s=$(i).clone(),o=this.$(n),r={};r.id=o.attr("data-id"),r.title=o.attr("data-title"),r.url=o.attr("data-url"),r.status=o.attr("data-status"),Backbone.Mediator.pub("tickets:viewDetails",r),$.colorbox({html:s.show()[0].outerHTML,opacity:.5,transition:"none",maxWidth:"90%",close:C3FMConfig.colorbox.close,top:this.calculateTop(),overlayClose:!1,onComplete:function(){if(navigator.userAgent.match(/iPhone/i)){var t=$("#colorbox"),e=t.offset().top/2+40;$("#colorbox").css({top:e})}}})},buyNowButtonClick:function(t){var e=this.$(t.currentTarget),i="#"+e.parents(".ticket").attr("id"),n=this.$(i),s={};s.id=n.attr("data-id"),s.title=n.attr("data-title"),s.url=n.attr("data-url"),s.status=n.attr("data-status"),Backbone.Mediator.pub("tickets:beginPurchase",s)}});C3APP.TicketsView=t}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({_currentKey:null,_touching:[],hasFired:!1,events:{"touchstart a":"handleTouch","touchend a":"handleTouch"},initialize:function(){C3APP.Utils.isMobile()||(t(window).on("load.lineup resize.lineup scroll.lineup",_.bind(this.hideBolts,this)),this.$el.imagesLoaded(_.bind(this.hideBolts,this))),C3APP.Utils.isTouchDevice()&&t(window).on("scroll.lineup touchmove.lineup",_.bind(this.hideButtons,this)),Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_FINISH,this.hideBolts,this)},destory:function(){t(window).off(".lineup")},handleTouch:function(e){if("changedTouches"in e.originalEvent){var i=e.originalEvent.changedTouches[0],n=i.clientX,s=i.clientY,o=t(e.currentTarget),r=t(e.target),a=o.attr("id");if(this._currentKey!==a){var l=this._currentKey?this._currentKey:a,u="#"+l;t(u).removeClass("is-hovered")}switch(this._currentKey=a,e.type){case"touchstart":this._touching=[n,s];break;case"touchend":var c=this._touching[0],d=this._touching[1],h=10;if(c+h>n&&n>c-h&&d+h>s&&s>d-h){if(r.hasClass("is-hovered")||r.parents(".is-hovered").length)return!0;if(!o.hasClass("is-hovered"))return this.$el.find(".is-hovered").removeClass("is-hovered"),o.addClass("is-hovered"),e.preventDefault(),e.stopPropagation(),!1;o.removeClass("is-hovered")}}}},hideBolts:function(e){"scroll"!==e.type&&(this.hasFired=!1),("scroll"!==e.type||this.hasFired!==!0)&&(t(".lineup li").each(function(){var e=t(this),i=e.next("li");return 0===i.length?(e.addClass("is-last"),!0):i.offset().left<e.offset().left?(e.addClass("is-last"),!0):void e.removeClass("is-last")}),"scroll"===e.type&&(this.hasFired=!0))},hideButtons:_.debounce(function(){this.$el.find(".is-hovered").removeClass("is-hovered")},2e3,!0)});C3APP.LineupView=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({_$btn:null,_$headline:null,shouldFire:!0,fired:0,events:{},initialize:function(){this.attachMasonry(),this._$btn=t(".btn--see-more"),this._$btn.on("click",_.bind(this.loadExcerpts,this))},destroy:function(){t(window).off(".blog")},attachMasonry:function(){var t=this;this.$el.imagesLoaded(function(){t.$el.masonry({itemSelector:".grid__item",columnWidth:".grid__item.desk-one-third",isResizeBound:!0,isInuitGrid:!0,gutter:0})})},reloadMasonry:function(){var t=this;this.$el.imagesLoaded(function(){t.$el.masonry("reload")})},appendMasonry:function(t){var e=this;this.$el.imagesLoaded(function(){e.$el.masonry("appended",t,!0)})},loadExcerpts:function(){var e=this,i=this._$btn.attr("href"),n={curl:location.pathname,turl:i};Backbone.Mediator.pub("blog:nextPage",n),event&&(event.preventDefault(),event.stopPropagation()),this._$btn.text("Retrieving..."),t.get(i,function(i){var n=t(i),s=n.find(".excerpt__container");e._$btn.text("See More Posts"),e._$btn.attr("href",n.find(".btn--see-more").attr("href")),e.$el.append(s),e.appendMasonry(s)})}});C3APP.BlogExcerptsView=e}(),function(){"use strict";var t=jQuery,e=C3APP.Utils.__,i=Backbone.View.extend({_$btn:null,_$headline:null,shouldFire:!0,fired:0,events:{"click a":"pubClick"},initialize:function(){this.attachMasonry(),this._$btn=t(".js-content-grid-load"),this._$btn.attr("href")?this._$btn.on("click",_.bind(this.loadBlogExcerpts,this)):this._$btn.on("click",_.bind(this.loadSocialExcerpts,this)),"object"!=typeof window.twttr&&t.getScript("//platform.twitter.com/widgets.js"),this.addFilter(),t(document).on("click",".js-filter-type",t.proxy(this.filterByType,this))},destroy:function(){t(window).off(".content-grid")},attachMasonry:function(){var t=this;this.$el.imagesLoaded().always(function(){var e=t.$el.find(".grid__item.desk-one-third:visible").first(),i=parseFloat(e.css("width"))-1;t.$el.find(".grid").masonry({itemSelector:".js-masonry-item",columnWidth:i,isResizeBound:!0,transitionDuration:0,gutter:0})})},reloadMasonry:function(){this.$el.find(".grid").masonry("reloadItems"),this.$el.find(".grid").masonry("layout")},appendMasonry:function(e){var i=this;this.$el.imagesLoaded(function(){i.$el.find(".grid").masonry("appended",e),setTimeout(function(){if(i.activeType){var e=C3APP.Utils.sprintf('.js-filter-type[data-type="%s"]',i.activeType);

t(e).trigger("click")}},20)})},loadBlogExcerpts:function(i){var n=this,s=this._$btn.attr("href"),o={curl:location.pathname,turl:s};Backbone.Mediator.pub("content-grid:nextPage",o),i&&(i.preventDefault(),i.stopPropagation()),this._$btn.text(e("Retrieving...")),t.get(s,function(i){var s=t(i),o=s.find(".js-masonry-item");n._$btn.text(e("See More Posts")),n._$btn.attr("href",s.find(".js-content-grid-load").attr("href")),n.$el.find(".grid").append(o),n.appendMasonry(o)})},getLabel:function(){return this.$el.data("label")},getQuery:function(){return this.$el.data("query")},getNetworks:function(){return this.$el.data("networks")},getProvider:function(){return this.$el.data("provider")},getStreamKey:function(){return this.$el.data("stream-key")},getMaxTime:function(){return this.$(".social-box").last().data("time-key")},hasAds:function(){return this.$el.data("ads-enabled")},getAdSource:function(){return this.$el.data("ad-source")},getLimit:function(){return this.$el.data("limit")},checkImageErrors:function(){this.$el.find("img").on("error",_.bind(this.onImageError,this))},onImageError:function(e){var i=t(e.currentTarget);i.parents(".social-box").parent("div").remove()},loadSocialExcerpts:function(i){var n=t(i.currentTarget),s=n.attr("data-page")?n.attr("data-page"):2,o=this,r={action:"get_content_grid_social_posts",page:s};i&&i.preventDefault(),this._$btn.text(e("Retrieving...")),t.get(C3FMConfig.ajaxUrl,r,function(i){var n=t("<div/>").append(i),r=n.find(".js-masonry-item");o.$el.find(".grid").append(r),o.checkImageErrors(),o.appendMasonry(r),o._$btn.text(e("See More Posts")),o._$btn.attr("data-page",s+=1),0===r.length&&o._$btn.hide(),"object"!=typeof window.twttr&&t.getScript("//platform.twitter.com/widgets.js")})},getAction:function(t){var e=t.attr("class"),i=t.attr("data-label");return i?i:"string"!=typeof e?"unknown-link":e},pubClick:function(e){var i=t(e.currentTarget),n={};n.curl=location.pathname,n.turl=i.attr("href"),n.action=this.getAction(i),n.type=i.parents(".js-masonry-item").attr("data-type"),n.target=i.attr("data-target"),("blog"===n.type||"merch"===n.type)&&(n.categories=i.attr("data-categories")),Backbone.Mediator.pub("content-grid:click",n)},addFilter:function(){var e=[],i=t("<ul/>",{"class":"list-inline list-inline--block text--center"}),n=[],s=["<li>",'<div class="switch">','<input id="switch-%s" checked="checked" class="switch__input js-filter-type"  data-type="%s" data-initialized="1" type="checkbox" value="1">','<label for="switch-%s" class="switch__label" data-name="%s"></label>',"</div>","</li>"];this.$el.find(".js-masonry-item").each(function(i){var o=t(this).attr("data-type");if(-1===t.inArray(o,e)){var r=C3APP.Utils.ucfirst(o),a=C3APP.Utils.sprintf(s.join(""),i,o,i,r);e.push(o),n.push(a)}}),e.length>1&&(i.append(n),t("#content-filters").append(i))},filterByType:function(e){var i=this,n=t(e.currentTarget),s=n.attr("data-type"),o=C3APP.Utils.sprintf('.js-masonry-item[data-type="%s"]',s),r=[],a={curl:location.pathname,type:s,state:n.prop("checked")?"on":"off"};this.$el.find(o).each(function(){r.push(i.$el.find(".grid").masonry("getItem",this))}),n.prop("checked")?i.$el.find(".grid").masonry("reveal",r):i.$el.find(".grid").masonry("hide",r),setTimeout(function(){i.$el.find(".grid").masonry()},10),this.activeType=s,Backbone.Mediator.pub("content-grid:filter",a)}});C3APP.ContentGridView=i}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({_headerOffset:0,_currentKey:"",events:{"click .schedule__arrow--prev":"prevLocation","click .schedule__arrow--next":"nextLocation","click .schedule__date-tabs .js-date-tab":"changeDate","touchstart .session":"handleTouch","touchend   .session":"handleTouch","click .js-next-schedule-page":"nextPage","click .js-previous-schedule-page":"previousPage"},initialize:function(){this.delegateEvents(),Backbone.Mediator.sub("schedule:selectSwitch",this.selectSwitch,this),t(window).on("resize.schedule orientationchange.schedule",_.bind(this.init,this)),this.$(".schedule__header").length>0&&(this._headerOffset=this.$(".schedule__header").offset().top),this.selectDate(),this.init()},destroy:function(){t(window).off(".schedule")},bindStickyLocations:function(){t(window).on("scroll.stickyLocations resize.stickyLocations touchmove.stickyLocations",_.bind(this.stickyLocations,this))},unbindStickyLocations:function(){t(window).off(".stickyLocations")},init:function(){var e=this;C3APP.Utils.isTouchDevice()?t(window).on("touchmove.scheduleTouch",_.bind(this.hideButtons,this)):t(window).off(".scheduleTouch"),C3APP.Utils.isLandscape()?(t("meta[name=viewport]").attr("content","width=1024,initial-scale=0.45"),this.$el.find(".schedule__content").each(function(){t(this).swipe("destroy")}),this.unbindStickyLocations(),t(window).off(".scheduleTouch")):C3APP.Utils.isMobile()?(t("meta[name=viewport]").attr("content","width=device-width,initial-scale=1.0"),this.$el.find(".schedule__content").each(function(){t(this).swipe({allowPageScroll:"auto",swipeLeft:function(){e.nextLocation()},swipeRight:function(){e.prevLocation()}})})):(t("meta[name=viewport]").attr("content","width=device-width,initial-scale=1.0"),this.unbindStickyLocations()),this.initDates(),this.initColumns()},handleTouch:function(e){if("changedTouches"in e.originalEvent){var i=e.originalEvent.changedTouches[0],n=i.clientX,s=i.clientY,o=t(e.currentTarget),r=t(e.target),a=o.attr("id");if(this._currentKey!==a){var l=this._currentKey?this._currentKey:a,u="#"+l;t(u).removeClass("is-hovered")}switch(this._currentKey=a,e.type){case"touchstart":this._touching=[n,s];break;case"touchend":var c=this._touching[0],d=this._touching[1],h=10;if(c+h>n&&n>c-h&&d+h>s&&s>d-h){if(r.hasClass("is-hovered")||r.parents(".is-hovered").length)return!0;if(!o.hasClass("is-hovered"))return o.addClass("is-hovered"),C3APP.Utils.isLandscape()?!0:(e.preventDefault(),e.stopPropagation(),!1);o.removeClass("is-hovered")}}}},hideButtons:_.debounce(function(){this.$el.find(".is-hovered").removeClass("is-hovered")},1e3,!0),isMyFestPage:function(){return-1!==location.href.indexOf("my-festival")?!0:!1},initDates:function(){var t=this.$(".schedule__date").filter(".is-active");t.siblings(".schedule__date").hide()},initPages:function(e){e=e||this.$(".schedule__location").data("schedule-page"),this.$(".schedule__location").each(function(){var i=t(this);i.data("schedule-page")!==e?i.hide():i.removeAttr("style")})},initializeDesktop:function(){var e=this;t(".schedule__date").filter(".is-active").find(".schedule__location").each(function(){e.showLocations(t(this))}),this.initPages()},hideLocations:function(e){var i=e.data("target-column");e.hide(),i&&t(i).hide()},showLocations:function(e){var i=e.data("target-column");e.removeAttr("style"),i&&t(i).removeAttr("style")},initializeMobile:function(){var e=this,i=this.$(".schedule__date").filter(".is-active").find(".schedule__location"),n=i.filter(".is-active");n.length||(n=i.first(),n.toggleClass("is-active")),n.siblings(".schedule__location, .schedule__location--placeholder").each(function(){e.hideLocations(t(this))}),this.showLocations(n)},initColumns:function(){var t=this.$(".schedule__date").filter(".is-active").find(".schedule__location").filter(".is-active");return 0===t.length&&(t=this.$(".schedule__location").first()),C3APP.Utils.isMobile()&&(C3APP.Utils.isPortrait()||C3APP.Utils.isMobile())?void this.initializeMobile():void this.initializeDesktop()},selectDate:function(){if(location.hash&&C3APP.Utils.supportsPushState()){var t=location.hash.slice(1);if(this.$(".js-date-tab").attr("data-weekend"))return void this.selectSwitch(t);var e=this.$(".js-date-tab").filter('[data-value="'+t+'"]');e.trigger("click")}},stickyLocations:function(e){if(("resize"===e.type&&!C3APP.Utils.isMobile()||C3APP.Utils.isLandscape())&&this.$(".schedule__header").length>0&&(this.$(".schedule__header").attr("style",""),this.$(".schedule__header").find("th.schedule__times").show()),C3APP.Utils.isMobile()&&C3APP.Utils.isPortrait()){var i=t(document).scrollTop();i>this._headerOffset?this.$(".schedule__header").css({position:"fixed",top:0,left:0,"z-index":1e3}).parent().css({"padding-top":"60px"}):(this.$(".schedule__header").attr("style","").parent().css({"padding-top":0}),this.$(".schedule__header").find("th.schedule__times").hide())}},_hide:function(e){e.removeClass("is-active").hide(),t(e.data("target-column")).removeClass("is-active").hide()},_show:function(e){e.addClass("is-active").removeAttr("style"),t(e.data("target-column")).addClass("is-active").removeAttr("style")},_getNext:function(t){var e=t.next(".schedule__location");return e.length?e.hasClass("schedule__location--placeholder")?this._getNext(e):t.next(".schedule__location"):t},_getPrev:function(t){var e=t.prev(".schedule__location");return e.length?e.hasClass("schedule__location--placeholder")?this._getPrev(e):t.prev(".schedule__location"):t},nextLocation:function(){var t=this.$el.find(".schedule__date").filter(".is-active").find(".schedule__arrow--next"),e=t.siblings(".schedule__location").filter(".is-active"),i=this._getNext(e);this._hide(e),this._show(i)},prevLocation:function(){var t=this.$el.find(".schedule__date").filter(".is-active").find(".schedule__arrow--prev"),e=t.siblings(".schedule__location").filter(".is-active"),i=this._getPrev(e);this._hide(e),this._show(i)},changeDate:function(e){var i=this.$(".schedule__date").filter(".is-active");if(i.removeClass("is-active").hide(),"object"==typeof e){var n=t(e.currentTarget);e=n.attr("data-value"),this.$(".js-date-tab").filter('[data-value="'+e+'"]').addClass("is-active").siblings().removeClass("is-active")}C3APP.Utils.supportsPushState()&&(location.hash=e),t("#schedule-date-"+e).addClass("is-active").removeAttr("style"),this.init()},selectSwitch:function(e){var i=t(".js-date-tab").filter("[data-value="+e+"]");i.siblings().hide(),i.show().trigger("click"),i.siblings('[data-weekend="'+i.attr("data-weekend")+'"]').show(),t("#date-"+e).find(".schedule__location").first().addClass("is-active"),this.initColumns(),this.initDates()},openDetails:function(e){var i=t(e.currentTarget),n=t(i.attr("data-target"));t.colorbox({html:n.html(),width:"90%",transition:"none"})},nextPage:function(e){var i=t(e.currentTarget),n=parseInt(i.attr("data-schedule-page"),10)+1;this.initPages(n)},previousPage:function(e){var i=t(e.currentTarget),n=parseInt(i.attr("data-schedule-page"),10)-1;this.initPages(n)}});C3APP.ScheduleView=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({_target:null,events:{click:"toggleDropdown"},initialize:function(){this._target=this.$el.attr("data-target"),t(this._target).on("click","a",_.bind(this.closeDropdown,this)),t(".linkdown .btn--close").on("click",_.bind(this.closeDropdown,this))},toggleDropdown:function(){t(this._target).is(":visible")?this.closeDropdown():this.openDropdown()},openDropdown:function(){t(this._target).show()},closeDropdown:function(){var e=this;setTimeout(function(){t(e._target).hide()},0)}});C3APP.LinkDownView=e}(),function(){"use strict";var t=jQuery,e=C3APP.Utils.__,i=Backbone.View.extend({$target:null,_title:null,events:{click:"togglePullDown",close:"closePullDown"},initialize:function(){var e=this;this.$target=t(this.$el.attr("data-target")),this._title=this.$el.find(".split__title").text(),Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_START,function(){e.$target.is(":visible")&&e.$el.trigger("click")})},togglePullDown:function(t){t.preventDefault();var e=this;this.$target.is(":visible")?this.$target.parent().slideUp({duration:200,useTranslate3d:!0,complete:function(){e.closePullDown()}}):(this.closeOthers(),this.openPullDown())},openPullDown:function(){this.$el.addClass("is-open"),this.$target.show().parent().slideDown({duration:200,useTranslate3d:!0}),this.setTitle(e("Close")),this.$target.find(".search__input").focus()},closePullDown:function(){var t=this;setTimeout(function(){t.$target.hide(),t.setTitle(t._title),t.$el.removeClass("is-open")},0)},setTitle:function(t){this.$el.find(".split__title").text(t)},closeOthers:function(){var e=this;t(".js-pulldown").each(function(){t(this).is(e.$el)||t(this).trigger("close")})}});C3APP.PullDownView=i}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({events:{"click .slider__arrow":"scroll","click a":"pubClick"},initialize:function(){},pubClick:function(e){var i=t(e.currentTarget),n=i.parents(".slider__slide"),s={curl:location.pathname,turl:t(e.currentTarget).attr("href"),categories:n.attr("data-categories")};Backbone.Mediator.pub("vendorSlider:click",s)},scroll:function(e){var i=t(e.currentTarget),n=i.parents(".slider"),s=i.siblings(".slider__slides"),o=t(s.find("li").get(1)),r=t(s.find("li").get(2)),a={curl:location.pathname,categories:n.attr("data-categories")};s.is(":animated")||(s.append(o.clone()),s.append(r.clone()),s.animate({scrollLeft:"+=300"},750,"easeInSine",function(){o.remove(),r.remove(),s.scrollLeft("+=300")}),Backbone.Mediator.pub("vendorSlider:next",a))}});C3APP.SliderView=e}(),function(){"use strict";var t=C3APP.Utils,e=Backbone.View.extend({scrollers:[],options:{openArrow:"i--arrow-down--blue",closedArrow:"i--arrow-right--blue"},events:{"open .js-summary":"openSummaryDetails","close .js-summary":"closeSummaryDetails"},initialize:function(){var e="click";t.isMobile()&&t.isTouchDevice()&&(e="touchstart"),this.$el.on(e,".summary__title",_.bind(this.toggleSummary,this)),this.$el.on(e,"details",_.bind(this.toggleDetails,this)),this.initScrolling()},initScrolling:function(){var t=this;this.$el.find("details[open]").each(function(){t.loadScroller($(this),!0)})},isOpen:function(t){var e=t.prop("open")||t.hasClass("open");return e},loadScroller:function(e,i){var n=this,s=t.isMobile()?600:100,o=e.parents(".js-summary"),r={id:o.attr("data-post-id"),title:t.normalizeTitle(o.attr("data-post-title")),type:"unknown",box:t.normalizeTitle(e.children("summary").text())};return i=i||!1,o.hasClass("js-artist-list")?r.type="talent-list":o.hasClass("js-vendor-list")&&(r.type="vendor-list"),i?void(this.isOpen(e)?setTimeout(function(){n.showScroll(e)},s):setTimeout(function(){n.hideScroll(e)},s)):void($.fn.details.support?this.isOpen(e)?setTimeout(function(){n.hideScroll(e)},s):setTimeout(function(){n.showScroll(e),Backbone.Mediator.pub("summary:expandDetails",r)},s):this.isOpen(e)?setTimeout(function(){n.showScroll(e),Backbone.Mediator.pub("summary:expandDetails",r)},s):setTimeout(function(){n.hideScroll(e)},s))},toggleDetails:function(t){if("SUMMARY"===t.target.tagName){var e=$(t.currentTarget);this.loadScroller(e)}},toggleSummary:function(t){var e=$(t.currentTarget),i=e.parents(".js-summary");i.trigger(i.hasClass("is-open")?"close":"open")},openCaret:function(t){t.removeClass(this.options.closedArrow).addClass(this.options.openArrow)},closeCaret:function(t){t.removeClass(this.options.openArrow).addClass(this.options.closedArrow)},openSummaryDetails:function(e){var i=$(e.currentTarget),n=i.find(".summary__title .i"),s=i.find(".summary__details-container"),o=s.find("iframe"),r={id:i.attr("data-post-id"),type:"unknown",title:t.normalizeTitle(i.attr("data-post-title"))};if(i.addClass("is-open"),this.openCaret(n),s.removeClass("is-collapsed").addClass("is-open"),o.attr("src")||o.attr("src",o.attr("data-src")),i.hasClass("js-vendor-list")&&(r.type="vendor-list"),i.hasClass("js-artist-list")){if(r.type="talent-list",i.hasClass("js-is-loaded"))return;var a=i.find(".details__also-added").find(".scrollable-content"),l=i.find(".summary__numbers");$.get(C3FMConfig.ajaxUrl,{action:"load_artist_list_details",artist_id:r.id},function(t){a.html(t.alsoAdded),l.html(t.numbers),i.addClass("js-is-loaded")},"json")}Backbone.Mediator.pub("summary:expand",r)},closeSummaryDetails:function(t){var e=$(t.currentTarget),i=e.find(".summary__title .i"),n=e.find(".summary__details-container");e.removeClass("is-open"),this.closeCaret(i),n.addClass("is-collapsed").removeClass("is-open"),Backbone.Mediator.pub("summary:collapse",e)},hideScroll:function(t){var e=this;t.find(".is-scrollable").each(function(){var t=$(this);t.prop("offsetHeight")>=t.prop("scrollHeight")&&"undefined"!=typeof e.scrollers[t.attr("id")]&&e.scrollers[t.attr("id")].destroy()})},showScroll:function(t){var e=this;t.find(".is-scrollable").each(function(){var t=$(this);t.prop("offsetHeight")<t.prop("scrollHeight")?(t.siblings(".scroll-bar").show(),e.scrollers[t.attr("id")]=new IScroll("#"+t.attr("id"),{mouseWheel:!0})):t.siblings(".scroll-bar").hide()})}});C3APP.SummaryView=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({el:"#palm-nav-wrapper",touchPrevents:!1,selectors:{menuWrapper:"#palm-menu",menu:".palm-menu--exp",menuButton:".btn--menu",menuButtonIcon:".menu__icon",myFest:".palm-myfest--exp",myFestButton:"#palm-myfest",myFestButtonTitle:".split__title",myFestButtonIcon:".menu__icon",audioButton:"#palm-music",audioplayer:"#palm-audioplayer",searchButton:"#palm-search",search:"#palm-search--exp",backToTopBtn:"#back-to-top"},classes:{open:"is-open",closed:"is-closed",fixed:"is-fixed",hidden:"is-hidden",scrollable:"is-scrollable",menu:"fa-bars",close:"fa-close",music:"fa-music",search:"fa-search"},defaults:{menuButtonIconClosedText:'<i class="fa fa-bars menu__icon"></i>',menuButtonIconOpenText:'<i class="fa fa-close menu__icon"></i>'},events:{"click .nav--myfest a":"pubMyFestClick"},initialize:function(){var e="click";this._$menu=this.$el.find(this.selectors.menu),this._$menuButton=this.$el.find(this.selectors.menuButton),this._$menuWrapper=this.$el.find(this.selectors.menuWrapper),this._$myFest=this.$el.find(this.selectors.myFest),this._$myFestButton=this.$el.find(this.selectors.myFestButton),this._$myFestButtonTitle=this._$myFestButton.find(this.selectors.myFestButtonTitle),this._$myFestButtonIcon=this._$myFestButton.find(this.selectors.myFestButtonIcon),this._$audioButton=this.$el.find(this.selectors.audioButton),this._$audioplayer=this.$el.find(this.selectors.audioplayer),this._$search=this.$el.find(this.selectors.search),this._$searchButton=this.$el.find(this.selectors.searchButton),this._$backToTopBtn=this.$el.find(this.selectors.backToTopBtn),this.$el.on(e,this.selectors.menuButton,_.bind(this.menuHandler,this)),this.$el.on(e,this.selectors.myFestButton,_.bind(this.myMenuHandler,this)),this.$el.on(e,this.selectors.audioButton,_.bind(this.musicHandler,this)),this.$el.on(e,this.selectors.searchButton,_.bind(this.searchHandler,this)),t(window).on("scroll.palmmenu resize.palmmenu touchmove.palmmenu",_.bind(this.scrollHandler,this)),t(window).on("resize.palmmenu",_.bind(this._onResize,this)),t("#palm-nav-wrapper").length>0&&(this._navOffset=t("#palm-nav-wrapper").offset().top,this._scrollBreakPoint=this._navOffset),this.currentPosition=t(document).scrollTop(),this._$hiddenElements=[t("#engagement-bar"),t(".festival-header"),t("#content-wrapper"),t("footer")],Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_START,_.bind(this.closeMenu,this)),Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_START,_.bind(this.closeMyMenu,this))},destory:function(){t(window).off(".palmmenu")},isOpen:function(){return this._$menuButton.hasClass(this.classes.open)},setCurrentPosition:function(){this._currentPosition=t(document).scrollTop()},scrollHandler:function(){var e=this,i=e.$el,n=t(document).scrollTop();0!==i.length&&(n>=e._scrollBreakPoint?e.expandMenuItem():e.collapseMenuItem(),e.lastScrollPos||(e.lastScrollPos=0),n<e.lastScrollPos&&i.hasClass("is-fixed")?e._$backToTopBtn.css("top","100%"):e._$backToTopBtn.css("top","0%"),e.lastScrollPos=n)},expandMenuItem:function(){var e=this,i=e.$el,n=t(document).scrollTop();if(i.hasClass("expanded")){if(n>=e._scrollBreakPoint){for(var s=0;s<e._$hiddenElements.length;s++)e._$hiddenElements[s].addClass("is-hidden");i.removeClass("is-fixed").addClass("is-scrollable"),e._scrollBreakPoint=-100,t("html, body").scrollTop(0)}}else i.removeClass("is-scrollable").addClass("is-fixed")},collapseMenuItem:function(){var e=this,i=e.$el;if(i.hasClass("expanded")&&i.hasClass("is-scrollable")){i.removeClass("is-scrollable");for(var n=0;n<e._$hiddenElements.length;n++)e._$hiddenElements[n].removeClass("is-hidden");e._scrollBreakPoint=e._navOffset,t("html, body").scrollTop(e._currentPosition)}else i.removeClass("is-fixed")},hideOthers:function(t){t.siblings().hide(),"fixed"===this._$audioButton.css("position")&&this._$audioButton.css("display","inline-block")},showOthers:function(t){t.siblings().css("display","inline-block")},closeOthers:function(){this._$audioButton.hasClass(this.classes.open)&&this.closeAudioplayer(),this._$menuButton.hasClass(this.classes.open)&&this.closeMenu(),this._$myFestButton.hasClass(this.classes.open)&&this.closeMyMenu(),this._$searchButton.hasClass(this.classes.open)&&this.closeSearch()},openMenu:function(){this.closeOthers(),this.$el.addClass("expanded"),this.setCurrentPosition(),this.expandMenuItem(),this._$menu.removeClass("is-closed"),this._$menuButton.addClass(this.classes.open),this._$menuButton.find(this.selectors.menuButtonIcon).removeClass(this.classes.menu).addClass(this.classes.close)},closeMenu:function(){this.collapseMenuItem(),this.$el.removeClass("expanded"),this._$menu.addClass("is-closed"),this._$menuButton.removeClass(this.classes.open),this._$menuButton.find(this.selectors.menuButtonIcon).removeClass(this.classes.close).addClass(this.classes.menu)},menuHandler:function(e){t(e.target).parents(".nav--palm").length||(this.isOpen()?this.closeMenu():this.openMenu())},myMenuHandler:function(){this._$myFestButton.is(":animated")||(this._$myFestButton.hasClass(this.classes.open)?this.closeMyMenu():this.openMyMenu())},musicHandler:function(){this._$audioButton.is(":animated")||(this._$audioButton.hasClass(this.classes.open)?this.closeAudioplayer():this.openAudioplayer())},searchHandler:function(){this._$searchButton.is(":animated")||(this._$searchButton.hasClass(this.classes.open)?this.closeSearch():this.openSearch())},openAudioplayer:function(){this.closeOthers(),this.$el.addClass("expanded"),this.setCurrentPosition(),this.expandMenuItem(),this._$audioButton.addClass(this.classes.open),this._$audioplayer.removeClass(this.classes.closed),this._$audioButton.find("i").removeClass(this.classes.music).addClass(this.classes.close)},closeAudioplayer:function(){this.collapseMenuItem(),this.$el.removeClass("expanded"),this._$audioButton.removeClass(this.classes.open),this._$audioButton.find("i").removeClass(this.classes.close).addClass(this.classes.music),this._$audioplayer.addClass(this.classes.closed)},openSearch:function(){this.closeOthers(),this._$search.removeClass(this.classes.closed),this._$searchButton.find("i").removeClass(this.classes.search).addClass(this.classes.close),this._$searchButton.addClass(this.classes.open)},closeSearch:function(){this._$search.addClass(this.classes.closed),this._$searchButton.removeClass(this.classes.open),this._$searchButton.find("i").removeClass(this.classes.close).addClass(this.classes.search)},openMyMenu:function(){this.closeOthers(),this._$myFest.removeClass(this.classes.closed),this._$myFestButtonTitle.addClass(this.classes.hidden),this._$myFestButtonIcon.removeClass(this.classes.hidden),this._$myFestButton.addClass(this.classes.open)},closeMyMenu:function(){this._$myFest.addClass(this.classes.closed),this._$myFestButtonTitle.removeClass(this.classes.hidden),this._$myFestButtonIcon.addClass(this.classes.hidden),this._$myFestButton.removeClass(this.classes.open)},_onResize:function(){C3APP.Utils.isMobile()||this.isOpen()&&this.closeMenu()},pubMyFestClick:function(e){var i=t(e.currentTarget);if(i.attr("href")||i.hasClass("js-logout")){var n=null;n=i.hasClass("js-logout")?"logout":i.hasClass("js-login")?"login":i.attr("href");var s={curl:location.pathname,turl:n};Backbone.Mediator.pub("headerbar:myfest-click",s)}}});C3APP.PalmMenuView=e}(),function(){"use strict";var t=jQuery,e=C3APP.Utils.__,i=Backbone.View.extend({initialize:function(){Backbone.Mediator.sub("social:login",this.handleSocialLogin,this),Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_FINISH,this.findFavorites,this),Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_FINISH,this.updateLoginState,this),Backbone.Mediator.sub("myfest:changeFavorite",this.updateFavoriteState,this),this.listenTo(this.model,"change:photoUrl",this._onChangePhotoUrl),this.listenTo(this.model,"change:loggedIn",this._onChangeLoginState),this.listenTo(this.model,"change:hash",this._onUserHashChange),this.listenTo(this.model,"change:counts",this._onChangeFavoritesCounts),this.listenTo(this.model,"change:lastLogin",this._onChangeLastLogin)},handleTouch:function(e){var i=t(e.currentTarget),n=t(e.target);return n.hasClass("is-hovered")||n.parents(".is-hovered").length?!0:i.hasClass("is-hovered")?void i.removeClass("is-hovered"):(t(".is-hovered").removeClass("is-hovered"),i.addClass("is-hovered"),e.preventDefault(),e.stopPropagation(),!1)},handleSocialLogin:function(t){"object"!=typeof C3FMConfig.currentUser&&(C3FMConfig.currentUser=t),this.model.set(t),this.model.set("counts",new C3APP.CountsModel(t.counts))},_onChangePhotoUrl:function(){t("#header").find(".js-myfest-img").attr("src",this.model.get("photoUrl"))},_onUserHashChange:function(){var e=this.model.get("hash");t("#header").find(".myfest-column__link").each(function(){var i=t(this).attr("href");i&&(i=i.replace(/^(?!\/my-festival\/)(#.*)/,"/my-festival/"+e+"$1"),t(this).attr("href",i))}),t("#header").find(".nav--myfest").find(".menu-item a").each(function(){var i=t(this).attr("href");i&&(i=i.replace(/^(?!\/my-festival\/)(#.*)/,"/my-festival/"+e+"$1"),t(this).attr("href",i))})},_onChangeFavoritesCounts:function(e,i){_.each(i,function(e,i){if(t(".c-engagement-bar__myfest__in, #palm-myfest-menu-in").find(".js-myfest-type--"+i).text(e),"compare"!==i){var n=t(".c-engagement-bar__myfest__in").find(".js-myfest-type--"+i);n.animate({backgroundColor:"#FCF275"},600,function(){n.animate({backgroundColor:"#CA177F"},600,function(){n.removeAttr("style")})})}})},_onChangeLoginState:function(t,e){e?(this.showLoggedInMenu(),this.showAccountLink(),this.showLoggedInHeaderLinks(),this.findFavorites(),this.model.processFavoriteQueue()):(this.showLoggedOutMenu(),this.hideAccountLink(),this.showLoggedOutHeaderLinks())},findFavorites:function(){if(this.model.isLoggedIn()){var e=this,i=this.model.get("favorites"),n=t(".js-favorite");n.length>0&&n.each(function(){var n=t(this),s=n.attr("data-action"),o=n.attr("data-post-id"),r=n.attr("data-post-year"),a=n.attr("data-post-location"),l=!1;-1!==t.inArray(o,i)&&e.updateFavoriteState(n,s,a,r,l)}),t(".schedule-container").length>0&&t(".my-festival").length<=0&&t(".session").each(function(){var e=t(this),n=e.attr("data-talent-id");-1!==t.inArray(n,i)&&e.addClass("talent-favorited")})}},setRemoveable:function(e,i){i=t.extend({parent:"",add:"i--add",remove:"i--remove",text:"",action:"remove"},i);var n=e.children("i").removeClass(i.add).addClass(i.remove);i.parent&&i.parent.addClass("added"),e.attr("data-action",i.action),e.text(i.text),e.prepend(n)},setAddable:function(e,i){i=t.extend({parent:"",add:"i--add",remove:"i--remove",text:"",action:"add"},i);var n=e.children("i").removeClass(i.remove).addClass(i.add);i.parent&&i.parent.removeClass("added"),e.attr("data-action",i.action),e.text(i.text),e.prepend(n)},updateFavoriteState:function(i,n,s,o,r){var a="",l="";if("add"===n)("lineup"===s||"schedule"===s)&&("lineup"===s&&(a=i.parent("a")),"schedule"===s&&(a=i.parents(".session")),this.setRemoveable(i,{add:"i--add--inverse",remove:"i--remove--inverse",parent:a})),"artist"===s&&(a=i.parents(".summary__summary").find(".summary__title")),"artist"===s&&(i.parents(".summary").length||(l=" "+e("Remove")),this.setRemoveable(i,{text:l,parent:a})),"my-festival"===s&&this.setRemoveable(i,{parent:i.parents(".session"),remove:"i--remove--inverse"});else if("remove"===n&&(("lineup"===s||"schedule"===s)&&("lineup"===s&&(a=i.parent("a")),"schedule"===s&&(a=i.parents(".session")),this.setAddable(i,{parent:a,remove:"i--remove--inverse",add:"i--add--inverse"})),"artist"===s&&(a=i.parents(".summary__summary").find(".summary__title")),"artist"===s&&(i.parents(".summary").length||(l=" "+e("Add")),this.setAddable(i,{text:l,parent:a})),"my-festival"===s)){if(r){var u=null,c=i.closest(".my-item, .session-wrapper, .excerpt");c.hasClass("my-item")?(u=i.closest("a, article"),u.animate({height:"hide"},350,function(){c.animate({width:"hide"},350)})):c.hasClass("session-wrapper")&&(u=i.parents(".session"),u.animate({height:"hide"},350),c.find(".session__title").animate({height:"hide"},250),c.find(".session__time").animate({height:"hide"},250))}if(r){var d=i.attr("data-post-type"),h=t("#content").find(".js-myfest-type--"+d),f=parseInt(h.text(),10);h.text(f-1)}}},updateLoginState:function(t){this.model.set("loggedIn",t.loggedIn)},updateSelectedYear:function(t){this.model.set("selectedYear",t.selectedYear)},showAccountLink:function(){t("#menu-desktop-footer").find(".js-hidden-logout").show()},hideAccountLink:function(){t("#menu-desktop-footer").find(".js-hidden-logout").hide()},showLoggedInHeaderLinks:function(){var i=t("#header").find(".js-login").first();i.removeClass("js-login").addClass("js-logout"),i.text(e("Sign Out")),i.parent().show()},showLoggedOutHeaderLinks:function(){var i=t("#header").find(".js-logout").first();i.removeClass("js-logout").addClass("js-login"),i.text(e("Sign In/Sign Up")),i.parent().hide()},showLoggedInMenu:function(){t(".c-engagement-bar__myfest__out, #palm-myfest-menu-out").hide(),t(".c-engagement-bar__myfest__in, #palm-myfest-menu-in").show()},showLoggedOutMenu:function(){t(".c-engagement-bar__myfest__out, #palm-myfest-menu-out").show(),t(".c-engagement-bar__myfest__in, #palm-myfest-menu-in").hide()},_onChangeLastLogin:function(t,e){t.setLastLogin(e)}});C3APP.MyFestView=i}(),function(){"use strict";var t=jQuery,e={elements:{gallery:".gallery",galleryPage:".gallery__page",galleryBox:".gallery__box",navigation:".gallery__nav",nextBtn:".gallery__btn--next",prevBtn:".gallery__btn--prev",tabPrev:".gallery__tab--prev",tabNext:".gallery__tab--next"},classes:{disabled:"is-disabled",active:"is-active"}},i=Backbone.View.extend({events:{},initialize:function(){var i=this.$el;this._bindEvents(),i.each(function(){var i=t(this),n=i.find(e.elements.galleryPage),s=n.length;(1===s||n.find(e.elements.galleryBox).hasClass("one-whole"))&&i.find(e.elements.navigation).addClass(e.classes.disabled),n.each(function(){"1"===t(this).attr("data-page")?t(this).addClass(e.classes.active):t(this).hide()})}),this.$el.trigger("update-buttons"),this.$el.each(function(){var e=t(this),i=e.attr("id");t('a[rel="'+i+'"]').each(function(){var e=void 0===t(this).attr("data-description")?!1:!0,i=function(){return e?!1:!0},n=function(){return e?!1:720},s=function(){return e?!1:480},o=function(){var i,n,s,o,r,a=t(this);return e?(i=a.attr("title"),n=a.attr("data-description"),s=a.attr("data-photopage-url"),o=a.attr("title"),'<div id="cboxInfo"><span class="cboxTitle">'+i+'</span><span class="cboxPhotoDescription">'+n+"</span></div>"):(r=a.attr("data-video-url"),i=a.attr("title"),'<div id="cboxInfo"><span class="cboxTitle">'+i+"</span></div>")};t(this).colorbox({transition:"none",iframe:i,opacity:.7,innerWidth:n,innerHeight:s,maxHeight:"90%",maxWidth:"90%",title:o,close:C3FMConfig.colorbox.close,next:'<span class="gallery__tab gallery__tab--next">&lt;</span>',previous:'<span class="gallery__tab gallery__tab--prev">&lt;</span>'})})})},calculateTop:function(){var t=40;return C3APP.Utils.isMobile()?t:!1},updateButtons:function(i){var n=t(i.currentTarget),s=n.find("."+e.classes.active).next(e.elements.galleryPage).length,o=n.find("."+e.classes.active).prev(e.elements.galleryPage).length;0!==s?(n.find(e.elements.nextBtn).removeClass(e.classes.disabled),n.find(e.elements.tabNext).removeClass(e.classes.disabled)):(n.find(e.elements.nextBtn).addClass(e.classes.disabled),n.find(e.elements.tabNext).addClass(e.classes.disabled)),0!==o?(n.find(e.elements.prevBtn).removeClass(e.classes.disabled),n.find(e.elements.tabPrev).removeClass(e.classes.disabled)):(n.find(e.elements.prevBtn).addClass(e.classes.disabled),n.find(e.elements.tabPrev).addClass(e.classes.disabled));

},nextPage:function(i){i.preventDefault();var n=t(i.currentTarget),s=n.find("."+e.classes.active),o=s.next(e.elements.galleryPage).length;o&&s.hide().removeClass(e.classes.active).next(e.elements.galleryPage).addClass(e.classes.active).show().find("img").each(function(){var e=t(this),i=e.attr("src"),n=e.attr("data-src");"//:0"===i&&e.attr("src",n)})},prevPage:function(i){i.preventDefault();var n=t(i.currentTarget),s=n.find("."+e.classes.active),o=s.prev(e.elements.galleryPage).length;o&&s.hide().removeClass(e.classes.active).prev(e.elements.galleryPage).addClass(e.classes.active).show()},_bindEvents:function(){this.$el.find(e.elements.navigation).on("click",function(){t(this).parents(e.elements.gallery).trigger("update-buttons")}),this.$el.find(e.elements.prevBtn).on("click",function(){t(this).parents(e.elements.gallery).trigger("prev-page")}),this.$el.find(e.elements.tabPrev).on("click",function(){t(this).parents(e.elements.gallery).trigger("prev-page"),t(this).parents(e.elements.gallery).trigger("update-buttons")}),this.$el.find(e.elements.nextBtn).on("click",function(){t(this).parents(e.elements.gallery).trigger("next-page")}),this.$el.find(e.elements.tabNext).on("click",function(){t(this).parents(e.elements.gallery).trigger("next-page"),t(this).parents(e.elements.gallery).trigger("update-buttons")}),this.$el.on("update-buttons",this.updateButtons),this.$el.on("next-page",this.nextPage),this.$el.on("prev-page",this.prevPage)}});C3APP.GalleryView=i}(),function(){"use strict";var t=jQuery,e=C3APP.Utils.__,i=Backbone.View.extend({_$btn:null,_published:[],events:{"click a":"pubClick"},initialize:function(){C3APP.Utils.isMobile()||this.attachMasonry(),this._$btn=this.$el.next(".btn--see-more"),this._$btn.on("click",_.bind(this.loadExcerpts,this)),this.checkImageErrors(),t(window).on("DOMContentLoaded.socialag load.socialag resize.socialag scroll.socialag",_.bind(this.fireIfVisible,this))},setPublished:function(t){var e=t.attributes["data-time-key"].value;this._published[e]=!0},isPublished:function(t){var e=t.attributes["data-time-key"].value;return!!this._published[e]},pubImpression:function(e){if(this.isPublished(e))return void t(window).off(".socialag",_.bind(this.fireIfVisible,this));var i={title:document.title,curl:location.pathname};Backbone.Mediator.pub("socialposts:impression",i),this.setPublished(e)},fireIfVisible:function(){var e=this;t(".social-box--advertisement").each(function(t,i){C3APP.Utils.isElementInViewport(i)&&e.pubImpression(i)})},checkImageErrors:function(){this.$el.find("img").on("error",_.bind(this.onImageError,this))},attachMasonry:function(){var t=this;this.$el.imagesLoaded(function(){t.$el.masonry({itemSelector:".grid__item",columnWidth:".grid__item.one-third",isResizeBound:!0,isInuitGrid:!0})})},reloadMasonry:function(){var t=this;this.$el.imagesLoaded(function(){t.$el.masonry("reload")})},appendMasonry:function(t){var e=this;this.$el.imagesLoaded(function(){e.$el.masonry("appended",t,!0)})},getLabel:function(){return this.$el.data("label")},getQuery:function(){return this.$el.data("query")},getNetworks:function(){return this.$el.data("networks")},getProvider:function(){return this.$el.data("provider")},getStreamKey:function(){return this.$el.data("stream-key")},getMaxTime:function(){return this.$(".social-box").last().data("time-key")},hasAds:function(){return this.$el.data("ads-enabled")},getAdSource:function(){return this.$el.data("ad-source")},getLimit:function(){return this.$el.data("limit")},loadExcerpts:function(i){var n=this,s={action:"load_more_social_posts",query:this.getQuery(),label:this.getLabel(),provider:this.getProvider(),stream_key:this.getStreamKey(),max_time_key:this.getMaxTime(),enable_ads:this.hasAds(),ad_source:this.getAdSource(),limit:this.getLimit()};this.getNetworks().length>0&&(s.networks=this.getNetworks()),i&&(i.preventDefault(),i.stopPropagation()),this._$btn.text(e("Retrieving...")),t.get(C3FMConfig.ajaxUrl,s,function(i){var s=t(i),o=s.find(".grid__item");n.$el.append(o),n.checkImageErrors(),n.appendMasonry(o),n._$btn.text(e("See More Posts")),0===o.length&&n._$btn.hide(),"object"!=typeof window.twttr&&t.getScript("//platform.twitter.com/widgets.js")})},getAction:function(t){var e=t.attr("class");return"string"!=typeof e?"unknown-link":e},pubClick:function(e){var i=t(e.currentTarget),n={};n.title=document.title,n.curl=location.pathname,n.turl=i.attr("href"),n.action=this.getAction(i),Backbone.Mediator.pub("socialposts:click",n)},onImageError:function(e){var i=t(e.currentTarget),n=i.parents(".social-box").attr("data-feed-record-id");this.reportBrokenRecord(n),i.parents(".social-box").parent("div").remove()},reportBrokenRecord:function(e){t.ajax({url:"https://connect.tradablebits.com/streams/api/report_broken_image",data:{stream_key:this.getStreamKey(),feed_record_id:e},type:"get",dataType:"jsonp",crossDomain:!0})}});C3APP.SocialAggregatorView=i}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({_published:!1,touchPrevents:!1,events:{"click a":"pubClick"},initialize:function(){t(window).on("DOMContentLoaded.cta load.cta resize.cta scroll.cta",_.bind(this.fireIfVisible,this))},destroy:function(){t(window).off(".cta")},setPublished:function(){this._published=!0},isPublished:function(){return this._published},fireIfVisible:function(){var t=this.el;C3APP.Utils.isElementInViewport(t)&&this.pubImpression()},pubImpression:function(){if(this.isPublished())return void t(window).off(".cta");var e={title:document.title,url:location.pathname};Backbone.Mediator.pub("calltoaction:impression",e),this.setPublished()},pubClick:function(e){var i=t(e.currentTarget),n={text:i.find(".action-nav__call").text(),curl:location.pathname,turl:i.attr("href")};Backbone.Mediator.pub("calltoaction:click",n)}});C3APP.CallToActionView=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({_published:!1,touchPrevents:!1,events:{"click a":"pubClick"},initialize:function(){t(window).on("DOMContentLoaded.related load.related resize.related scroll.related",_.bind(this.fireIfVisible,this))},destroy:function(){t(window).off(".related")},setPublished:function(){this._published=!0},isPublished:function(){return this._published},fireIfVisible:function(){var t=this.el;C3APP.Utils.isElementInViewport(t)&&this.pubImpression()},pubImpression:function(){if(this.isPublished())return void t(window).off(".related");var e={title:document.title,url:location.pathname};Backbone.Mediator.pub("relatedposts:impression",e),this.setPublished()},pubClick:function(e){var i=t(e.currentTarget),n={curl:location.pathname,turl:i.attr("href")};Backbone.Mediator.pub("relatedposts:click",n)}});C3APP.RelatedPostsView=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({_published:!1,touchPrevents:!1,events:{"click a":"pubClick"},initialize:function(){t(window).on("DOMContentLoaded.blognav load.blognav resize.blognav scroll.blognav",_.bind(this.fireIfVisible,this))},destroy:function(){t(window).off(".blognav")},setPublished:function(){this._published=!0},isPublished:function(){return this._published},fireIfVisible:function(){var t=this.el;C3APP.Utils.isElementInViewport(t)&&this.pubImpression()},pubImpression:function(){if(this.isPublished())return void t(window).off(".blognav");var e={title:document.title,url:location.pathname};Backbone.Mediator.pub("blognavigation:impression",e),this.setPublished()},pubClick:function(e){var i=t(e.currentTarget),n={curl:location.pathname,turl:i.attr("href")};Backbone.Mediator.pub("blognavigation:click",n)}});C3APP.BlogNavigationView=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({fired:[],events:{"click summary":"pubClick"},initialize:function(){},pubClick:function(e){var i=t(e.currentTarget),n={curl:location.pathname,question:i.text()},s=C3APP.Utils.normalizeTitle(n.question);-1===t.inArray(s,this.fired)&&(Backbone.Mediator.pub("faq:click",n),this.fired.push(s))}});C3APP.FaqView=e}(),function(){"use strict";var t=Backbone.View.extend({ALERTS_KEY:"c3_dismissed_alerts",touchPrevents:!1,_published:0,events:{"click .js-dismiss-one":"dismissOne","click .alert__message":"pubClick"},initialize:function(){if(C3APP.Utils.supportsLocalStorage()){$(window).on("DOMContentLoaded.alerts load.alerts resize.alerts scroll.alerts",_.bind(this.fireIfVisible,this));var t=this,e=this.$el.find(".alert");e.length&&e.each(function(e,i){t.isExpired(i)?t.deleteIfExpired(i):t.showIfNotDismissed(i)})}},fireIfVisible:_.debounce(function(){C3APP.Utils.isElementInViewport(this.el)&&this.pubImpression()},1e3,!0),deleteIfExpired:function(t){this.isExpired(t)&&this.deleteAlert(t)},isExpired:function(t){var e=new Date,i=parseInt(t.getAttribute("data-expires"),10),n=60*e.getTimezoneOffset(),s=parseInt(e.getTime()/1e3,10);return s-=n,s>i},deleteAlert:function(t){var e=this.getAlerts(),i=t.getAttribute("id"),n="#"+i,s=$.inArray(i,e);-1!==s&&e.splice(s,1),localStorage.setItem(this.ALERTS_KEY,JSON.stringify(e)),$(n).remove()},getAlert:function(t){var e=this.getAlerts(),i=$.inArray(t,e);return-1===i?null:e[i]},getAlerts:function(){var t=JSON.parse(localStorage.getItem(this.ALERTS_KEY));return $.isArray(t)||(t=[]),t},setAlert:function(t){var e=this.getAlerts();e.push(t),localStorage.setItem(this.ALERTS_KEY,JSON.stringify(e))},showIfNotDismissed:function(t){if(!this.isExpired(t)){var e=t.getAttribute("id"),i="#"+e,n=this.getAlert(e);null===n&&$(i).fadeIn(400,function(){Backbone.Mediator.pub("alert:show")})}},dismissOne:function(t){var e=$(t.currentTarget).parents(".alert"),i=e.find(".alert__message"),n=e.attr("id"),s={curl:location.pathname,type:e.data("type"),message:i.text(),turl:i.attr("href")};this.setAlert(n),e.fadeOut(400,function(){Backbone.Mediator.pub("alert:dismiss",s)})},setPublished:function(){this._published+=1},isPublished:function(){return this._published>1?!0:!1},pubImpression:function(){return this.isPublished()?void $(window).off(".alerts"):(this.$el.find(".alert").each(function(t,e){var i=$(e),n=i.find(".alert__message").first(),s={curl:location.pathname,type:i.data("type"),turl:n.attr("href"),message:n.text()};Backbone.Mediator.pub("alert:impression",s)}),void this.setPublished())},pubClick:function(t){var e=$(t.currentTarget),i=e.parents(".alert"),n={curl:location.pathname,type:i.data("type"),message:e.text(),turl:e.attr("href")};Backbone.Mediator.pub("alert:click",n)}});C3APP.AlertsView=t}(),function(){"use strict";var t=jQuery,e=C3APP.Utils,i=Backbone.View.extend({model:null,newModalTop:0,events:{},initialize:function(){Backbone.Mediator.sub("modal:open",t.proxy(this.onOpen,this)),Backbone.Mediator.sub("modal:change",t.proxy(this.onChange,this)),Backbone.Mediator.sub("modal:close",t.proxy(this.onClose,this)),t(document).on("click",".js-show-email-login",t.proxy(this.onShowEmailLogin,this)),t(document).on("click",".js-show-email-register",t.proxy(this.onShowEmailRegister,this)),t(document).on("click",".js-show-login-form",t.proxy(this.onShowLoginForm,this)),t(document).on("click",".js-show-register-form",t.proxy(this.onShowRegisterForm,this)),t(document).on("click",".js-delete-ask",t.proxy(this.onDeleteAsk,this)),t(document).on("click",".js-delete-confirm",t.proxy(this.onDeleteConfirm,this)),t(document).on("click",".js-make-private",t.proxy(this.onPrivateAsk,this)),t(document).on("click",".js-private-confirm",t.proxy(this.onPrivateConfirm,this)),t(document).on("click",".js-make-public",t.proxy(this.onPublicAsk,this)),t(document).on("click",".js-public-confirm",t.proxy(this.onPublicConfirm,this)),t(document).on("click","#full-login-link",t.proxy(this.onClickFullLoginLink,this)),t(document).on("submit","#email-register-form",t.proxy(this.onSubmitEmailRegister,this)),t(document).on("submit","#forgot-password-form",t.proxy(this.onSubmitForgotPassword,this)),t(document).on("submit","#confirm-email-form",t.proxy(this.onSubmitConfirmEmail,this)),t(document).on("submit","#email-connect-form",t.proxy(this.onSubmitConnectEmail,this)),t(document).on("submit","#first-login-form",t.proxy(this.onSubmitFirstLogin,this)),t(document).on("click",".js-forgot-password",function(t){t.preventDefault(),Backbone.Mediator.pub("social:onForgotPassword")}),t(document).on("cbox_complete",function(){C3APP.Utils.isMobile()&&setTimeout(function(){t("#colorbox").removeAttr("top"),t("#colorbox").css({top:t(document).scrollTop()+40})},100)})},onOpen:function(i){t.colorbox.remove(),"string"==typeof i&&(i=t.parseJSON(i));var n="open"+C3APP.Utils.capitalCase(i.template);if("function"==typeof this[n])return this[n].apply(this,[i]);var s=C3APP.Utils.sprintf("#modal-%s",i.template),o=C3APP.Utils.sprintf("#%s-errors",i.template),r=t(s).html();i.replacements&&(r=e.supplant(t(s).html(),i.replacements)),i.error&&t(r).find(o).text(i.error),this.openModal(r)},openModal:function(e){t.colorbox({close:C3FMConfig.colorbox.close,className:"colorbox--modal",scrolling:!1,html:e,overlayClose:!1,maxWidth:"90%",transition:"none"})},openReturningLogin:function(i){var n=t("<div/>").append(t("#modal-returning-login").html());n.find(".btn--modal").hide(),n.find(e.sprintf('[data-network="%s"]',i)).css("display","block").addClass("btn--fill"),"email"===i&&(n.find("#email-login").show(),n.find("#email-login-form").show()),this.openModal(n.html())},openLogin:function(e){var i=C3APP.Utils.sprintf("#modal-%s",e.template),n=C3APP.Utils.sprintf("#%s-errors",e.template),s=C3APP.Utils.getLastLogin(),o=t(i).html(),r=["spotify","facebook","instagram","twitter","google","email"],a=t(o);if(s&&!e.override&&-1!==t.inArray(s,r))return this.openReturningLogin(s);if(e.error){var l=t("<p/>",{"class":"msg is-error",text:e.error});a.find(n).append(l)}this.openModal(a.get(0).outerHTML)},onChange:function(){t.colorbox.resize()},onClose:function(){t.colorbox.remove()},clearErrors:function(){t("[id*=errors]").each(function(){t(this).html("")})},showLoginForm:function(){t("#email-login-form").slideDown("fast",function(){Backbone.Mediator.pub("modal:change"),t("#email-login-form").find("input:visible").first().focus()})},hideLoginForm:function(){t("#email-login-form").slideUp("fast",function(){Backbone.Mediator.pub("modal:change")})},showRegisterForm:function(){t("#email-register-form").slideDown("fast",function(){Backbone.Mediator.pub("modal:change"),t("#email-register-form").find("input:visible").first().focus()})},hideRegisterForm:function(){t("#email-register-form").slideUp("fast",function(){Backbone.Mediator.pub("modal:change")})},onShowLoginForm:function(t){t.preventDefault(),this.hideRegisterForm(),this.showLoginForm()},onShowRegisterForm:function(t){t.preventDefault(),this.hideLoginForm(),this.showRegisterForm()},onShowEmailRegister:function(t){t.preventDefault(),this.showEmailRegister(),this.hideEmailLogin(),this.clearErrors()},onShowEmailLogin:function(t){t.preventDefault(),this.showEmailLogin(),this.hideEmailRegister(),this.clearErrors()},onSubmitEmailLogin:function(e){e.preventDefault();var i=t(e.currentTarget),n=this;this.clearError("#login-errors"),t.ajax({url:C3FMConfig.ajaxUrl,type:"POST",data:i.serialize(),dataType:"json"}).done(function(t){Backbone.Mediator.pub("social:login",t),Backbone.Mediator.pub("modal:close")}).fail(function(e){var i=t.parseJSON(e.responseText);n.showError("#login-errors",i.errors)})},clearError:function(e){t(e).html("").removeAttr("class")},showError:function(e,i){t(e).html(i).addClass("msg is-error"),Backbone.Mediator.pub("modal:change")},onSubmitConnectEmail:function(e){e.preventDefault();var i=t(e.currentTarget),n=this;this.clearError("#connect-email-errors"),t.ajax({url:C3FMConfig.ajaxUrl,type:"POST",data:i.serialize()}).done(function(){Backbone.Mediator.pub("network:connect","email"),Backbone.Mediator.pub("modal:close")}).fail(function(e){var i=t.parseJSON(e.responseText),s="<ul><li>"+i.errors.join("</li><li>")+"</li></ul>";n.showError("#connect-email-errors",s)})},onSubmitEmailRegister:function(e){e.preventDefault();var i=t(e.currentTarget),n=this;this.clearError("#login-errors"),t.ajax({url:C3FMConfig.ajaxUrl,type:"POST",data:i.serialize()}).done(function(t){Backbone.Mediator.pub("social:login",t),Backbone.Mediator.pub("modal:close")}).fail(function(e){var i=t.parseJSON(e.responseText),s="<ul><li>"+i.errors.join("</li><li>")+"</li></ul>";n.showError("#login-errors",s)})},onSubmitForgotPassword:function(e){e.preventDefault();var i=t(e.currentTarget),n=this;this.clearError("#forgot-password-errors"),t.ajax({url:C3FMConfig.ajaxUrl,type:"POST",data:i.serialize(),dataType:"json"}).done(function(t){if(t.ID)return Backbone.Mediator.pub("modal:close"),void Backbone.Mediator.pub("social:login",t);var e={template:"forgot-password-success"};Backbone.Mediator.pub("modal:open",e)}).fail(function(e){var i=t.parseJSON(e.responseText),s="<ul><li>"+i.errors.join("</li><li>")+"</li></ul>";n.showError("#forgot-password-errors",s)})},onSubmitConfirmEmail:function(e){e.preventDefault();var i=t(e.currentTarget),n=this;this.clearError("#confirm-email-errors"),t.ajax({url:C3FMConfig.ajaxUrl,type:"POST",data:i.serialize(),dataType:"json"}).done(function(){var t={template:"confirm-email-success"};Backbone.Mediator.pub("modal:open",t)}).fail(function(e){var i=t.parseJSON(e.responseText),s="<ul><li>"+i.errors.join("</li><li>")+"</li></ul>";n.showError("#confirm-email-errors",s)})},onSubmitFirstLogin:function(e){e.preventDefault();var i=t(e.currentTarget),n=this;this.clearError("#first-login-errors"),t.ajax({url:C3FMConfig.ajaxUrl,type:"POST",data:i.serialize(),dataType:"json"}).done(function(){Backbone.Mediator.pub("modal:close")}).fail(function(e){var i=t.parseJSON(e.responseText),s="<ul><li>"+i.errors.join("</li><li>")+"</li></ul>";n.showError("#first-login-errors",s)})},showEmailRegister:function(){t("#email-register").slideDown("fast",function(){Backbone.Mediator.pub("modal:change")})},hideEmailRegister:function(){t("#email-register").slideUp("fast",function(){Backbone.Mediator.pub("modal:change")})},showEmailLogin:function(){t("#email-login").slideDown("fast",function(){Backbone.Mediator.pub("modal:change")})},hideEmailLogin:function(){t("#email-login").slideUp("fast",function(){Backbone.Mediator.pub("modal:change")})},onDeleteAsk:function(t){t.preventDefault(),this.openModal(C3FMConfig.messages.myaccount.deleteAsk)},onDeleteConfirm:function(t){t.preventDefault(),Backbone.Mediator.pub("social:deleteAccount"),Backbone.Mediator.pub("modal:close")},onPrivateAsk:function(t){t.preventDefault(),this.openModal(C3FMConfig.messages.myaccount.privateAsk)},onPrivateConfirm:function(t){t.preventDefault(),Backbone.Mediator.pub("social:makePrivate"),Backbone.Mediator.pub("modal:close")},onPublicAsk:function(t){t.preventDefault(),this.openModal(C3FMConfig.messages.myaccount.publicAsk)},onPublicConfirm:function(t){t.preventDefault(),Backbone.Mediator.pub("social:makePublic"),Backbone.Mediator.pub("modal:close")},onClickFullLoginLink:function(t){t.preventDefault(),Backbone.Mediator.pub("modal:open",{template:"login",override:!0})}});C3APP.ModalView=i}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({$slides:null,events:{"click .js-next-slide":"nextSlide","click a":"pubCallToAction"},initialize:function(){var e=this;this.$slides=this.$el.find(".carousel__slides").first(),t(document).on("gform_confirmation_loaded",function(i,n){var s=t(e.$el.find(".carousel__slide").get(e.getCurrentSlide()));s.find(".carousel__slide-content").hide(),e.nextSlide();var o={curl:location.pathname+location.search+location.hash,id:n};Backbone.Mediator.pub("contest:enter",o)}),t(document).on("click",".js-scroll-and-enter",function(i){i.preventDefault();var n=190,s={curl:location.pathname+location.search+location.hash};t("html, body").animate({scrollTop:e.$el.offset().top-n}),0===e.getCurrentSlide()&&setTimeout(function(){e.nextSlide()},500),Backbone.Mediator.pub("contest:button-click",s)})},getCurrentSlide:function(){return parseInt(this.$slides.attr("data-current-slide"),10)},setCurrentSlide:function(t){this.$slides.attr("data-current-slide",t)},nextSlide:function(){var t=this.getCurrentSlide()+1,e={curl:location.pathname+location.search+location.hash};1===t&&Backbone.Mediator.pub("contest:start",e),this.setCurrentSlide(t)},pubCallToAction:function(e){var i=t(e.currentTarget),n={curl:location.pathname,turl:i.attr("href")};Backbone.Mediator.pub("contest:cta",n)}});C3APP.CarouselView=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({FLASH_MESSAGES_KEY:"C3_FLASH_MESSAGES",initialize:function(){var t=this;C3APP.Utils.supportsLocalStorage()&&t.showIfNotDismissed()},getMessage:function(e){var i=this.getMessages(),n=t.inArray(e,i);return-1===n?null:i[n]},getMessages:function(){var e=JSON.parse(localStorage.getItem(this.FLASH_MESSAGES_KEY));return t.isArray(e)||(e=[]),e},setMessage:function(t){var e=[];e.push(t),localStorage.setItem(this.FLASH_MESSAGES_KEY,JSON.stringify(e))},showIfNotDismissed:function(){var t=this,e=this.$el.attr("id"),i=this.getMessage(e);null===i&&(this.$el.fadeIn(400,function(){setInterval(function(){t.$el.slideUp("slow")},6e3)}),this.setMessage(e))}});C3APP.FlashMessageView=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({events:{"click .js-connect-email":"onConnectEmail","click .js-disconnect":"onDisconnectNetwork","submit #fan-profile-form":"onSubmitFanProfileForm","submit #update-password-form":"onSubmitUpdatePasswordForm"},initialize:function(){Backbone.Mediator.sub("network:connect",t.proxy(this.onNetworkConnect,this)),Backbone.Mediator.sub("network:disconnect",t.proxy(this.afterNetworkDisconnect,this))},clearError:function(e){t(e).html("").removeAttr("class")},showError:function(e,i){t(e).html(i).addClass("msg is-error")},onConnectEmail:function(t){t.preventDefault();var e={template:"connect-email"};Backbone.Mediator.pub("modal:open",e)},onDisconnectNetwork:function(e){e.preventDefault();var i=t(e.currentTarget),n=i.attr("data-network");0!==i.siblings().length&&t.ajax({url:C3FMConfig.ajaxUrl,type:"POST",data:{action:"disconnect_network",network:n},dataType:"json"}).done(function(){Backbone.Mediator.pub("network:disconnect",n)}).fail(function(t){console.log(t.responseText)})},afterNetworkDisconnect:function(e){var i=this.$el.find("#active-networks"),n=i.find('a[class*="btn--'+e+'"]'),s=n.clone();s.removeClass("js-disconnect"),s.find(".fa-times-circle").remove(),"email"===e&&s.addClass("js-connect-email"),n.remove(),s.prependTo(this.$el.find("#inactive-networks").first()),1===i.find("a").length&&i.find(".fa-times-circle").remove(),"email"===e&&t("#email-user-password").hide()},onNetworkConnect:function(e){var i=this.$el.find("#inactive-networks").find('a[class*="btn--'+e+'"]'),n=i.clone();n.find(".fa-times-circle").length||n.append('<i class="fa fa-times-circle"></i>'),n.removeClass("js-connect-email"),n.addClass("js-disconnect"),i.remove(),n.prependTo(this.$el.find("#active-networks").first()),"email"===e&&t("#email-user-password").show()},onSubmitFanProfileForm:function(e){e.preventDefault();var i=t(e.currentTarget),n=this;this.clearError("#fan-profile-form-errors"),t.ajax({url:C3FMConfig.ajaxUrl,type:"POST",data:i.serialize(),dataType:"json"}).done(function(e){i.prepend('<p id="updated-profile-msg" class="msg is-success">'+e+"</p>"),setTimeout(function(){t("#updated-profile-msg").fadeOut()},3e3)}).fail(function(e){var i=t.parseJSON(e.responseText);n.showError("#fan-profile-form-errors",i.errors)})},onSubmitUpdatePasswordForm:function(e){e.preventDefault();var i=t(e.currentTarget),n=this;this.clearError("#update-password-form-errors"),t.ajax({url:C3FMConfig.ajaxUrl,type:"POST",data:i.serialize(),dataType:"json"}).done(function(e){i.prepend('<p id="updated-password-msg" class="msg is-success">'+e+"</p>"),setTimeout(function(){t("#updated-password-msg").fadeOut()},3e3),i.find('input[type="password"]').val("")}).fail(function(e){var i=t.parseJSON(e.responseText),s="<ul><li>"+i.errors.join("</li><li>")+"</li></ul>";n.showError("#update-password-form-errors",s)})}});C3APP.MyAccountView=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({events:{"click .js-quicklook":"toggleQuickLook"},toggleQuickLook:function(e){e.preventDefault();{var i=t(e.currentTarget),n=i.attr("data-target"),s=t(n);s.find("iframe")}"open"===s.attr("data-state")?this.closeQuickLook(e):this.openQuickLook(e)},openQuickLook:function(e){var i=t(e.currentTarget),n=i.attr("data-target"),s=t(n),o=s.find("iframe");s.attr("data-state","open"),t(".js-quicklook").filter('[data-target="'+n+'"]').removeClass("btn--small").addClass("btn--square").find(".btn__inner").html('<i class="fa fa-close"></i>'),o.attr("src")||o.attr("src",o.attr("data-src")),o.length||s.find(".quicklook__video").hide(),Backbone.Mediator.pub("quicklook:open",{quicklook:s})},closeQuickLook:function(e){{var i=t(e.currentTarget),n=i.attr("data-target"),s=t(n);s.find("iframe")}s.attr("data-state","closed"),t(".js-quicklook").filter('[data-target="'+n+'"]').removeClass("btn--square").addClass("btn--small").find(".btn__inner").html("Quick Look"),Backbone.Mediator.pub("quicklook:close",{quicklook:s})}});C3APP.QuicklookView=e}(),function(){"use strict";var t=jQuery,e=Backbone.View.extend({el:"#page",touchPrevents:!1,_subViews:[],_header:null,_menu:null,_audioPlayer:null,_audioTrackCollection:null,events:{'click a[href*="frontgatetickets.com"]':"tldTracking",'click a[href*="store.lollapalooza.com"]':"tldTracking","click .js-play":"playTracks","click .js-favorite":"updateFavorites","click .js-scrollto":"scrollToSection","click .js-print":"printSchedule","click .call-to-actions a":"trackCallToActions","submit .gform_wrapper form":"trackGravityFormSubmit"},initialize:function(){this.bindEvents(),this.initOnce(),this.initMany()},initMany:function(){this.removeOldSubViews(),this.initializeSubViews(),t("details").details(),C3APP.ExactTarget.initialize(),C3APP.CFE.initialize(),C3APP.YouTube.initialize(),this.runTrackingScripts(),this.layoutMatch(),t(".sticky").Stickyfill()},initOnce:function(){var e=this;window.location.hash&&"#_=_"===window.location.hash&&(window.location.hash=""),this.model=new C3APP.MyFestModel,this._menu=new C3APP.MyFestView({model:this.model}),this._modal=new C3APP.ModalView,this.model.set("loggedIn",!1),this.model.set("selectedYear",C3FMConfig.selectedYear),C3FMConfig.currentUser.ID&&(this.model.set(C3FMConfig.currentUser),this.model.set("counts",new C3APP.CountsModel(C3FMConfig.currentUser.counts))),this._header=new C3APP.HeaderView,this._mobileMenu=new C3APP.PalmMenuView,this.setBrowserClass(),Backbone.Mediator.sub("soundcloud:loaded",function(){e.attachAudioPlayer()}),t(window).on("resize",function(){t(".grid--match").each(C3APP.Utils.isMobile()?function(){t(this).children(".grid__item").height("auto")}:function(){var e=t(this).height();t(this).children(".grid__item").each(function(){t(this).height(e)})})}),t(".sticky").Stickyfill()},bindEvents:function(){var e=this;t("body").on("click",".js-colorbox-close",_.bind(this.colorboxClose,this)),t("body").on("change",".js-select-link",_.bind(this.selectLink,this)),t("body").on("click",".js-feedback-open",_.bind(this.feedbackOpen,this)),t("body").on("click",".js-logout",_.bind(this.triggerLogout,this)),t("body").on("click",".js-login",_.bind(this.triggerLogin,this)),t("body").on("submit",".search-form",_.bind(this.onSearch,this)),t(window).on("orientationchange",_.bind(this.setOrientation,this)),Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_START,this.setViewport,this),Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_FINISH,this.reInitialize,this),Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_FINISH,this.scrollIfNecessary,this),Backbone.Mediator.sub(C3APP.AudioPlayer.AudioEvent.PLAY_TRACK,this.playTrack,this),Backbone.Mediator.sub("audioPlayer:trackError",this.flagTrackWithError,this),Backbone.Mediator.sub(C3APP.RouterEvent.NAVIGATE_FINISH,function(){C3APP.isActive=!1}),Backbone.Mediator.sub("myaccount:madePrivate",this.accountPrivate,this),Backbone.Mediator.sub("myaccount:madePublic",this.accountPublic,this),Backbone.Mediator.sub("myaccount:isFacebook",this.accountFacebook,this),C3APP.Utils.isMobile(),C3APP.Utils.isMobile()||t(window).on("scroll",this.closeTrackList),t("body").on("click",function(i){var n=!Boolean(t(".audioplayer").find(i.target).length);n&&e.closeTrackList()}),Backbone.Mediator.sub("modal:open",function(){setTimeout(function(){C3APP.CFE.initialize()},300)}),Backbone.Mediator.sub("modal:change",function(){C3APP.CFE.initialize()})},reInitialize:function(){this.initMany(),C3APP.Utils.supportsPushState()&&!location.hash&&window.scrollTo(0,0),C3APP.Utils.isOldIe()&&(window.resizeBy(25,0),setTimeout(function(){window.resizeBy(-25,0)},500))},initializeSubViews:function(){var e=this,i=0,n={".billboard":"BillboardView",".tickets":"TicketsView",".js-linkdown":"LinkDownView",".js-summaries":"SummaryView",".slider":"SliderView","#blog-excerpts":"BlogExcerptsView",".lineup":"LineupView","#disqus_thread":"DisqusView",".schedule-container":"ScheduleView",".artist-list":"ArtistListView",".gallery":"GalleryView",".social-records":"SocialAggregatorView",".call-to-actions":"CallToActionView",".related-posts":"RelatedPostsView",".blog-navigation":"BlogNavigationView",".faqs":"FaqView","#content-grid":"ContentGridView",".flash-message":"FlashMessageView","#my-account-page":"MyAccountView",".carousel":"CarouselView",".quicklook-wrapper":"QuicklookView"};if(_.each(n,function(t,n){if(e.$(n).length>0){var s=e.$(n);for(i=0;i<s.length;i+=1)e._subViews.push(new C3APP[t]({el:s[i]}))}}),t(".alerts").length>0){var s=t(".alerts");for(i=0;i<s.length;i+=1)this._subViews.push(new C3APP.AlertsView({el:s[i]}))}},removeOldSubViews:function(){for(var t=0;t<this._subViews.length;t+=1)"function"==typeof this._subViews[t].destroy&&this._subViews[t].destroy(),this._subViews[t].undelegateEvents(),this._subViews[t].remove(),delete this._subViews[t];this._subViews=[]},attachAudioPlayer:function(){if(!C3FMConfig.audioplayer.disabled){var t=C3APP.AudioPlayer.PlayerUtils,e=t.returnGlobalPlaylist();0!==e.length&&(this._audioPlayer=new C3APP.AudioPlayer.PlayerView({collection:e}),t.isMobile()?this.$("#palm-audioplayer").append(this._audioPlayer.render().view.render().el):this.$("#engagement-bar-wrapper").append(this._audioPlayer.render().view.render().el),Backbone.Mediator.sub(C3APP.AudioPlayer.AudioEvent.PLAY_TRACK,this.playTrack,this))}},playerHandler:function(e){if(e.target===e.currentTarget){var i=t(e.currentTarget);i.trigger(i.hasClass("is-closed")?"open":"close")}},playTrack:function(t){var e=C3APP.AudioPlayer.PlayerUtils.returnPlaylistDataFromHTML(t.trackHTML);e.isEmpty()||this._audioPlayer.addTrack(e.returnTrackData(),{play:!0})},playTracks:function(e){e.stopPropagation(),e.preventDefault(),Backbone.Mediator.pub(C3APP.AudioPlayer.AudioEvent.PLAY_TRACK,{trackHTML:t(e.currentTarget)[0]}),C3APP.Utils.isMobile()||Backbone.Mediator.pub(C3APP.AudioPlayer.UIEvent.GLIMPSE_PLAYLIST)},tldTracking:function(t){var e=t.currentTarget;e&&e.href&&ga("linker:decorate",e)},closeTrackList:function(){var e=C3APP.AudioPlayer.PlayerUtils;e.isMobile()||t(".audioplayer").find(".track-list").is(":visible")&&Backbone.Mediator.pub(C3APP.AudioPlayer.UIEvent.CLOSE_TRACKLIST)},resizeDropkick:function(){t("select").each(function(){t(this).show();var e=t(this).outerWidth();t(this).prev(".dk_container").find(".dk_toggle").css({width:e+"px"}),t(this).hide()})},scrollToSection:function(e){var i=t(e.currentTarget);e.preventDefault(),this.scrollTo(i.attr("href"))},scrollTo:function(e){var i=125;C3APP.Utils.isMobile()&&(i=20),t(e).length>0&&t("html, body").animate({scrollTop:t(e).offset().top-i})},scrollIfNecessary:function(){if(C3APP.Utils.supportsPushState()){var e=this,i=location.hash.replace("/","");i.length>1&&t("#content").imagesLoaded(function(){e.scrollTo(i)})}},makePlayerSticky:function(e){{var i=t("#palm-music");i.find(".body-player"),t("#palm-nav-wrapper").offset().top,t(document).scrollTop(),i.attr("style")}i.css({position:"fixed",top:0,left:0,"z-index":100}),i.next().width("45%")},makePlayerUnsticky:function(e){var i=t("#palm-music");i.removeClass("is-playing").css({position:"inherit",top:"inherit",left:"inherit"}),
i.next().width("30%")},addBufferingIcon:function(){t(".js-music-note").removeClass("i--music-note").addClass("i--music-note--buffering")},removeBufferingIcon:function(){t(".js-music-note").removeClass("i--music-note--buffering").addClass("i--music-note")},flagTrackWithError:function(e){e.errorCode<=0||t.post(C3FMConfig.ajaxUrl,{action:"artist_flag_track",errorData:e},function(t){},"json")},triggerLogin:function(t){t.preventDefault(),this.model.isLoggedIn()||this.model.login()},triggerLogout:function(t){t.preventDefault(),this.model.logout()},updateFavorites:function(e){return e.stopPropagation(),e.preventDefault(),this.model.isLoggedIn()?(this.model.updateFavorite(t(e.currentTarget)),!1):(this.model.login(),this.model.pushFavoriteQueue(t(e.currentTarget)),!1)},colorboxClose:function(e){e.preventDefault(),t.colorbox.close()},accountPublic:function(){t(".js-make-private").show(),t(".js-make-public").hide()},accountPrivate:function(){t(".js-make-private").hide(),t(".js-make-public").show()},feedbackOpen:function(t){var e={title:document.title,curl:location.pathname},i=C3APP.Utils.sprintf("&body=%0D%0A%0D%0A%0D%0A===== Please leave the following info for diagnostic purposes if you are reporting a problem with the website. =====%0D%0A%0D%0AUserAgent: %s",window.navigator.userAgent);Backbone.Mediator.pub("feedback:open",e),setTimeout(function(){window.location.href=C3FMConfig.feedback.href+i},1e3)},trackCallToActions:function(e){var i=t(e.currentTarget),n={text:i.find(".action-nav__call").text(),curl:location.pathname,turl:i.attr("href")};Backbone.Mediator.pub("calltoaction:click",n)},trackGravityFormSubmit:function(e){var i=t(e.currentTarget),n={id:i.attr("id"),url:location.pathname};Backbone.Mediator.pub("form:submit",n)},setBrowserClass:function(){var e=/constructor/i.test(window.HTMLElement),i=!!navigator.userAgent.match(/firefox/i),n=document.all&&!window.atob,s=void 0!==document.body.style.msTouchAction;e&&t("html").addClass("safari"),i&&t("html").addClass("firefox"),n&&t("html").addClass("oldie"),s&&t("html").addClass("ie")},onSearch:function(e){e.preventDefault();var i=t(e.currentTarget),n=i.find("[name=s]").val(),s=C3APP.Utils.sprintf("/search/%s",n),o={curl:location.pathname,location:i.parent().attr("class"),terms:n};Backbone.Mediator.pub("search:submit",o),Backbone.history.navigate(s,{trigger:!0})},setViewport:function(){t("meta[name=viewport]").attr("content","width=device-width")},setOrientation:function(){C3APP.Utils.isLandscape()?t("html").addClass("is-landscape"):t("html").removeClass("is-landscape")},printSchedule:function(){var t=location.pathname+"?print=1",e=window.open(t,"Custom Schedule","width=1024,height=1019");e.print(),Backbone.Mediator.pub("myfest:print")},runTrackingScripts:function(){-1!==location.host.indexOf("www")&&C3APP.TrackingHelper.initialize()},layoutMatch:function(){C3APP.Utils.isMobile()||t(".grid--match").imagesLoaded(function(){t(".grid--match").each(function(){var e=t(this).height();t(this).children(".grid__item").each(function(){t(this).height(e)})})})},selectLink:function(e){var i=t(e.currentTarget).find("option:selected").val();-1!==location.href.indexOf("my-festival")&&this.model.set("selectedYear",i.substr(-4)),Backbone.history.navigate(i,{trigger:!0})}});C3APP.C3AppView=e}(),function(){"use strict";var t,e=jQuery;C3APP.router=new C3APP.Router({regionManager:C3APP.RegionManager}),C3APP.GoogleAnalytics.loadScripts(function(){C3APP.GoogleAnalytics.initAnalytics(),Backbone.Mediator.pub("analytics:pageview",location.pathname+location.search)}),C3APP.MailChimpGoal.initialize(),C3APP.MailChimpGoal.loadScripts(function(){});var i=(window.navigator.userLanguage||window.navigator.language).substring(0,2).toLowerCase(),n=e(".o-language__label");switch(i){case"en":n.text("Language");break;case"de":n.text("Sprache");break;default:n.text("Language")}C3APP.YouTube.loadScripts(function(){}),C3APP.ScriptLoader.loadSoundCloud(function(){Backbone.Mediator.pub("soundcloud:loaded")}),C3APP.GoogleAnalyticsEvents.initialize(),window.soundManager.setup({url:C3FMConfig.themeUrl+"js/vendor/soundmanager2/",flashVersion:9,useFlashBlock:!1,useHighPerformance:!0,preferFlash:!1,html5PollingInterval:50,debugMode:!1}),window.soundManager.beginDelayedInit();var s=C3APP.Utils.supportsPushState(),o={pushState:s,silent:!0,hashChange:s?!1:!0};Backbone.history.start(o),e(document).on("click","a[href]",function(){var t="curl::%s::turl::%s::type::%s::text::%s",i="all-clicks",n=C3APP.Utils.normalizeTitle(e(this).text()),s={prop:e(this).prop("href"),attr:e(this).attr("href")};t=C3APP.Utils.sprintf(t,location.pathname,s.attr,"link",n),C3APP.GoogleAnalytics.subTrackEvent(i,"ac-click",t)}),e(document).on("click","button",function(){var t="curl::%s::turl::%s::type::%s::text::%s",i="all-clicks",n=C3APP.Utils.normalizeTitle(e(this).text());t=C3APP.Utils.sprintf(t,location.pathname,void 0,"button",n),C3APP.GoogleAnalytics.subTrackEvent(i,"ac-click",t)}),C3APP.isActive=!1,e(document).on("click","a[href]:not([data-bypass])",function(t){var i={prop:e(this).prop("href"),attr:e(this).attr("href")};if("#"!==i.attr){var n=location.protocol+"//"+location.hostname+(location.port&&":"+location.port)+"/",s=i.prop.replace("https","http","gi").slice(0,n.length),o=i.prop.replace("https","http","gi").slice(n.length);if(s===n&&!(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||"_blank"===e(this).attr("target"))){if(e(this).parents("#lang-selector").length)return;if(t.preventDefault(),C3APP.isActive)return;Backbone.history.navigate(o,{trigger:!0})}}}),t=new C3APP.C3AppView}();